function qI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Dm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jb={exports:{}},jd={},Cb={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ql=Symbol.for("react.element"),HI=Symbol.for("react.portal"),WI=Symbol.for("react.fragment"),GI=Symbol.for("react.strict_mode"),KI=Symbol.for("react.profiler"),QI=Symbol.for("react.provider"),JI=Symbol.for("react.context"),YI=Symbol.for("react.forward_ref"),XI=Symbol.for("react.suspense"),ZI=Symbol.for("react.memo"),ek=Symbol.for("react.lazy"),$y=Symbol.iterator;function tk(t){return t===null||typeof t!="object"?null:(t=$y&&t[$y]||t["@@iterator"],typeof t=="function"?t:null)}var Rb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pb=Object.assign,Db={};function Qo(t,e,n){this.props=t,this.context=e,this.refs=Db,this.updater=n||Rb}Qo.prototype.isReactComponent={};Qo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ob(){}Ob.prototype=Qo.prototype;function Om(t,e,n){this.props=t,this.context=e,this.refs=Db,this.updater=n||Rb}var Lm=Om.prototype=new Ob;Lm.constructor=Om;Pb(Lm,Qo.prototype);Lm.isPureReactComponent=!0;var zy=Array.isArray,Lb=Object.prototype.hasOwnProperty,Vm={current:null},Vb={key:!0,ref:!0,__self:!0,__source:!0};function Mb(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Lb.call(e,r)&&!Vb.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ql,type:t,key:i,ref:a,props:s,_owner:Vm.current}}function nk(t,e){return{$$typeof:Ql,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ql}function rk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qy=/\/+/g;function Qh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rk(""+t.key):e.toString(36)}function iu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ql:case HI:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Qh(a,0):r,zy(s)?(n="",t!=null&&(n=t.replace(qy,"$&/")+"/"),iu(s,e,n,"",function(d){return d})):s!=null&&(Mm(s)&&(s=nk(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(qy,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",zy(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Qh(i,l);a+=iu(i,e,n,c,s)}else if(c=tk(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Qh(i,l++),a+=iu(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Pc(t,e,n){if(t==null)return t;var r=[],s=0;return iu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function sk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xt={current:null},ou={transition:null},ik={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:ou,ReactCurrentOwner:Vm};function Fb(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Pc,forEach:function(t,e,n){Pc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pc(t,function(){e++}),e},toArray:function(t){return Pc(t,function(e){return e})||[]},only:function(t){if(!Mm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=Qo;we.Fragment=WI;we.Profiler=KI;we.PureComponent=Om;we.StrictMode=GI;we.Suspense=XI;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ik;we.act=Fb;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Pb({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Vm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Lb.call(e,c)&&!Vb.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Ql,type:t.type,key:s,ref:i,props:r,_owner:a}};we.createContext=function(t){return t={$$typeof:JI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QI,_context:t},t.Consumer=t};we.createElement=Mb;we.createFactory=function(t){var e=Mb.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:YI,render:t}};we.isValidElement=Mm;we.lazy=function(t){return{$$typeof:ek,_payload:{_status:-1,_result:t},_init:sk}};we.memo=function(t,e){return{$$typeof:ZI,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=ou.transition;ou.transition={};try{t()}finally{ou.transition=e}};we.unstable_act=Fb;we.useCallback=function(t,e){return Xt.current.useCallback(t,e)};we.useContext=function(t){return Xt.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return Xt.current.useDeferredValue(t)};we.useEffect=function(t,e){return Xt.current.useEffect(t,e)};we.useId=function(){return Xt.current.useId()};we.useImperativeHandle=function(t,e,n){return Xt.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return Xt.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return Xt.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return Xt.current.useMemo(t,e)};we.useReducer=function(t,e,n){return Xt.current.useReducer(t,e,n)};we.useRef=function(t){return Xt.current.useRef(t)};we.useState=function(t){return Xt.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return Xt.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return Xt.current.useTransition()};we.version="18.3.1";Cb.exports=we;var O=Cb.exports;const Lt=Dm(O),ok=qI({__proto__:null,default:Lt},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ak=O,lk=Symbol.for("react.element"),ck=Symbol.for("react.fragment"),uk=Object.prototype.hasOwnProperty,dk=ak.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hk={key:!0,ref:!0,__self:!0,__source:!0};function Ub(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)uk.call(e,r)&&!hk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:lk,type:t,key:i,ref:a,props:s,_owner:dk.current}}jd.Fragment=ck;jd.jsx=Ub;jd.jsxs=Ub;jb.exports=jd;var o=jb.exports,Qf={},Bb={exports:{}},In={},$b={exports:{}},zb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,ne){var re=q.length;q.push(ne);e:for(;0<re;){var ye=re-1>>>1,Te=q[ye];if(0<s(Te,ne))q[ye]=ne,q[re]=Te,re=ye;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var ne=q[0],re=q.pop();if(re!==ne){q[0]=re;e:for(var ye=0,Te=q.length,De=Te>>>1;ye<De;){var tt=2*(ye+1)-1,vt=q[tt],Rt=tt+1,Ht=q[Rt];if(0>s(vt,re))Rt<Te&&0>s(Ht,vt)?(q[ye]=Ht,q[Rt]=re,ye=Rt):(q[ye]=vt,q[tt]=re,ye=tt);else if(Rt<Te&&0>s(Ht,re))q[ye]=Ht,q[Rt]=re,ye=Rt;else break e}}return ne}function s(q,ne){var re=q.sortIndex-ne.sortIndex;return re!==0?re:q.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,m=3,w=!1,y=!1,E=!1,v=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(q){for(var ne=n(d);ne!==null;){if(ne.callback===null)r(d);else if(ne.startTime<=q)r(d),ne.sortIndex=ne.expirationTime,e(c,ne);else break;ne=n(d)}}function R(q){if(E=!1,N(q),!y)if(n(c)!==null)y=!0,te(C);else{var ne=n(d);ne!==null&&fe(R,ne.startTime-q)}}function C(q,ne){y=!1,E&&(E=!1,T(_),_=-1),w=!0;var re=m;try{for(N(ne),f=n(c);f!==null&&(!(f.expirationTime>ne)||q&&!I());){var ye=f.callback;if(typeof ye=="function"){f.callback=null,m=f.priorityLevel;var Te=ye(f.expirationTime<=ne);ne=t.unstable_now(),typeof Te=="function"?f.callback=Te:f===n(c)&&r(c),N(ne)}else r(c);f=n(c)}if(f!==null)var De=!0;else{var tt=n(d);tt!==null&&fe(R,tt.startTime-ne),De=!1}return De}finally{f=null,m=re,w=!1}}var L=!1,b=null,_=-1,A=5,j=-1;function I(){return!(t.unstable_now()-j<A)}function P(){if(b!==null){var q=t.unstable_now();j=q;var ne=!0;try{ne=b(!0,q)}finally{ne?k():(L=!1,b=null)}}else L=!1}var k;if(typeof x=="function")k=function(){x(P)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ge=oe.port2;oe.port1.onmessage=P,k=function(){ge.postMessage(null)}}else k=function(){v(P,0)};function te(q){b=q,L||(L=!0,k())}function fe(q,ne){_=v(function(){q(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){y||w||(y=!0,te(C))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(q){switch(m){case 1:case 2:case 3:var ne=3;break;default:ne=m}var re=m;m=ne;try{return q()}finally{m=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,ne){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var re=m;m=q;try{return ne()}finally{m=re}},t.unstable_scheduleCallback=function(q,ne,re){var ye=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ye+re:ye):re=ye,q){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=re+Te,q={id:h++,callback:ne,priorityLevel:q,startTime:re,expirationTime:Te,sortIndex:-1},re>ye?(q.sortIndex=re,e(d,q),n(c)===null&&q===n(d)&&(E?(T(_),_=-1):E=!0,fe(R,re-ye))):(q.sortIndex=Te,e(c,q),y||w||(y=!0,te(C))),q},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(q){var ne=m;return function(){var re=m;m=ne;try{return q.apply(this,arguments)}finally{m=re}}}})(zb);$b.exports=zb;var fk=$b.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pk=O,Tn=fk;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qb=new Set,yl={};function Oi(t,e){jo(t,e),jo(t+"Capture",e)}function jo(t,e){for(yl[t]=e,t=0;t<e.length;t++)qb.add(e[t])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jf=Object.prototype.hasOwnProperty,mk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hy={},Wy={};function gk(t){return Jf.call(Wy,t)?!0:Jf.call(Hy,t)?!1:mk.test(t)?Wy[t]=!0:(Hy[t]=!0,!1)}function yk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xk(t,e,n,r){if(e===null||typeof e>"u"||yk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jt[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jt[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jt[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jt[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jt[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jt[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jt[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jt[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jt[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fm=/[\-:]([a-z])/g;function Um(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fm,Um);jt[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fm,Um);jt[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fm,Um);jt[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});jt.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bm(t,e,n,r){var s=jt.hasOwnProperty(e)?jt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xk(e,n,s,r)&&(n=null),r||s===null?gk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hr=pk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dc=Symbol.for("react.element"),ro=Symbol.for("react.portal"),so=Symbol.for("react.fragment"),$m=Symbol.for("react.strict_mode"),Yf=Symbol.for("react.profiler"),Hb=Symbol.for("react.provider"),Wb=Symbol.for("react.context"),zm=Symbol.for("react.forward_ref"),Xf=Symbol.for("react.suspense"),Zf=Symbol.for("react.suspense_list"),qm=Symbol.for("react.memo"),rs=Symbol.for("react.lazy"),Gb=Symbol.for("react.offscreen"),Gy=Symbol.iterator;function Ca(t){return t===null||typeof t!="object"?null:(t=Gy&&t[Gy]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Jh;function za(t){if(Jh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jh=e&&e[1]||""}return`
`+Jh+t}var Yh=!1;function Xh(t,e){if(!t||Yh)return"";Yh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Yh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?za(t):""}function vk(t){switch(t.tag){case 5:return za(t.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 2:case 15:return t=Xh(t.type,!1),t;case 11:return t=Xh(t.type.render,!1),t;case 1:return t=Xh(t.type,!0),t;default:return""}}function ep(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case so:return"Fragment";case ro:return"Portal";case Yf:return"Profiler";case $m:return"StrictMode";case Xf:return"Suspense";case Zf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Wb:return(t.displayName||"Context")+".Consumer";case Hb:return(t._context.displayName||"Context")+".Provider";case zm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qm:return e=t.displayName||null,e!==null?e:ep(t.type)||"Memo";case rs:e=t._payload,t=t._init;try{return ep(t(e))}catch{}}return null}function wk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ep(e);case 8:return e===$m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function js(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bk(t){var e=Kb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Oc(t){t._valueTracker||(t._valueTracker=bk(t))}function Qb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Kb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tp(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ky(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=js(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jb(t,e){e=e.checked,e!=null&&Bm(t,"checked",e,!1)}function np(t,e){Jb(t,e);var n=js(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rp(t,e.type,n):e.hasOwnProperty("defaultValue")&&rp(t,e.type,js(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rp(t,e,n){(e!=="number"||Cu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qa=Array.isArray;function yo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+js(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(qa(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:js(n)}}function Yb(t,e){var n=js(e.value),r=js(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Yy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Xb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ip(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Xb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lc,Zb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lc=Lc||document.createElement("div"),Lc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Za={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_k=["Webkit","ms","Moz","O"];Object.keys(Za).forEach(function(t){_k.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Za[e]=Za[t]})});function e_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Za.hasOwnProperty(t)&&Za[t]?(""+e).trim():e+"px"}function t_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=e_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Ek=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function op(t,e){if(e){if(Ek[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function ap(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lp=null;function Hm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cp=null,xo=null,vo=null;function Xy(t){if(t=Xl(t)){if(typeof cp!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Od(e),cp(t.stateNode,t.type,e))}}function n_(t){xo?vo?vo.push(t):vo=[t]:xo=t}function r_(){if(xo){var t=xo,e=vo;if(vo=xo=null,Xy(t),e)for(t=0;t<e.length;t++)Xy(e[t])}}function s_(t,e){return t(e)}function i_(){}var Zh=!1;function o_(t,e,n){if(Zh)return t(e,n);Zh=!0;try{return s_(t,e,n)}finally{Zh=!1,(xo!==null||vo!==null)&&(i_(),r_())}}function vl(t,e){var n=t.stateNode;if(n===null)return null;var r=Od(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var up=!1;if(Lr)try{var Ra={};Object.defineProperty(Ra,"passive",{get:function(){up=!0}}),window.addEventListener("test",Ra,Ra),window.removeEventListener("test",Ra,Ra)}catch{up=!1}function Nk(t,e,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var el=!1,Ru=null,Pu=!1,dp=null,Tk={onError:function(t){el=!0,Ru=t}};function Sk(t,e,n,r,s,i,a,l,c){el=!1,Ru=null,Nk.apply(Tk,arguments)}function Ik(t,e,n,r,s,i,a,l,c){if(Sk.apply(this,arguments),el){if(el){var d=Ru;el=!1,Ru=null}else throw Error(H(198));Pu||(Pu=!0,dp=d)}}function Li(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function a_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zy(t){if(Li(t)!==t)throw Error(H(188))}function kk(t){var e=t.alternate;if(!e){if(e=Li(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Zy(s),t;if(i===r)return Zy(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function l_(t){return t=kk(t),t!==null?c_(t):null}function c_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=c_(t);if(e!==null)return e;t=t.sibling}return null}var u_=Tn.unstable_scheduleCallback,ex=Tn.unstable_cancelCallback,Ak=Tn.unstable_shouldYield,jk=Tn.unstable_requestPaint,st=Tn.unstable_now,Ck=Tn.unstable_getCurrentPriorityLevel,Wm=Tn.unstable_ImmediatePriority,d_=Tn.unstable_UserBlockingPriority,Du=Tn.unstable_NormalPriority,Rk=Tn.unstable_LowPriority,h_=Tn.unstable_IdlePriority,Cd=null,ur=null;function Pk(t){if(ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(Cd,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:Lk,Dk=Math.log,Ok=Math.LN2;function Lk(t){return t>>>=0,t===0?32:31-(Dk(t)/Ok|0)|0}var Vc=64,Mc=4194304;function Ha(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ou(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Ha(l):(i&=a,i!==0&&(r=Ha(i)))}else a=n&~s,a!==0?r=Ha(a):i!==0&&(r=Ha(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kn(e),s=1<<n,r|=t[n],e&=~s;return r}function Vk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Kn(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=Vk(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function hp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function f_(){var t=Vc;return Vc<<=1,!(Vc&4194240)&&(Vc=64),t}function ef(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kn(e),t[e]=n}function Fk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Kn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Gm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Re=0;function p_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var m_,Km,g_,y_,x_,fp=!1,Fc=[],ys=null,xs=null,vs=null,wl=new Map,bl=new Map,is=[],Uk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tx(t,e){switch(t){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":wl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bl.delete(e.pointerId)}}function Pa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Xl(e),e!==null&&Km(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Bk(t,e,n,r,s){switch(e){case"focusin":return ys=Pa(ys,t,e,n,r,s),!0;case"dragenter":return xs=Pa(xs,t,e,n,r,s),!0;case"mouseover":return vs=Pa(vs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return wl.set(i,Pa(wl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,bl.set(i,Pa(bl.get(i)||null,t,e,n,r,s)),!0}return!1}function v_(t){var e=ai(t.target);if(e!==null){var n=Li(e);if(n!==null){if(e=n.tag,e===13){if(e=a_(n),e!==null){t.blockedOn=e,x_(t.priority,function(){g_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function au(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lp=r,n.target.dispatchEvent(r),lp=null}else return e=Xl(n),e!==null&&Km(e),t.blockedOn=n,!1;e.shift()}return!0}function nx(t,e,n){au(t)&&n.delete(e)}function $k(){fp=!1,ys!==null&&au(ys)&&(ys=null),xs!==null&&au(xs)&&(xs=null),vs!==null&&au(vs)&&(vs=null),wl.forEach(nx),bl.forEach(nx)}function Da(t,e){t.blockedOn===e&&(t.blockedOn=null,fp||(fp=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,$k)))}function _l(t){function e(s){return Da(s,t)}if(0<Fc.length){Da(Fc[0],t);for(var n=1;n<Fc.length;n++){var r=Fc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ys!==null&&Da(ys,t),xs!==null&&Da(xs,t),vs!==null&&Da(vs,t),wl.forEach(e),bl.forEach(e),n=0;n<is.length;n++)r=is[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<is.length&&(n=is[0],n.blockedOn===null);)v_(n),n.blockedOn===null&&is.shift()}var wo=Hr.ReactCurrentBatchConfig,Lu=!0;function zk(t,e,n,r){var s=Re,i=wo.transition;wo.transition=null;try{Re=1,Qm(t,e,n,r)}finally{Re=s,wo.transition=i}}function qk(t,e,n,r){var s=Re,i=wo.transition;wo.transition=null;try{Re=4,Qm(t,e,n,r)}finally{Re=s,wo.transition=i}}function Qm(t,e,n,r){if(Lu){var s=pp(t,e,n,r);if(s===null)df(t,e,r,Vu,n),tx(t,r);else if(Bk(s,t,e,n,r))r.stopPropagation();else if(tx(t,r),e&4&&-1<Uk.indexOf(t)){for(;s!==null;){var i=Xl(s);if(i!==null&&m_(i),i=pp(t,e,n,r),i===null&&df(t,e,r,Vu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else df(t,e,r,null,n)}}var Vu=null;function pp(t,e,n,r){if(Vu=null,t=Hm(r),t=ai(t),t!==null)if(e=Li(t),e===null)t=null;else if(n=e.tag,n===13){if(t=a_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vu=t,null}function w_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ck()){case Wm:return 1;case d_:return 4;case Du:case Rk:return 16;case h_:return 536870912;default:return 16}default:return 16}}var fs=null,Jm=null,lu=null;function b_(){if(lu)return lu;var t,e=Jm,n=e.length,r,s="value"in fs?fs.value:fs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return lu=s.slice(t,1<r?1-r:void 0)}function cu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uc(){return!0}function rx(){return!1}function kn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Uc:rx,this.isPropagationStopped=rx,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uc)},persist:function(){},isPersistent:Uc}),e}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ym=kn(Jo),Yl=Ge({},Jo,{view:0,detail:0}),Hk=kn(Yl),tf,nf,Oa,Rd=Ge({},Yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oa&&(Oa&&t.type==="mousemove"?(tf=t.screenX-Oa.screenX,nf=t.screenY-Oa.screenY):nf=tf=0,Oa=t),tf)},movementY:function(t){return"movementY"in t?t.movementY:nf}}),sx=kn(Rd),Wk=Ge({},Rd,{dataTransfer:0}),Gk=kn(Wk),Kk=Ge({},Yl,{relatedTarget:0}),rf=kn(Kk),Qk=Ge({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),Jk=kn(Qk),Yk=Ge({},Jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xk=kn(Yk),Zk=Ge({},Jo,{data:0}),ix=kn(Zk),eA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nA[t])?!!e[t]:!1}function Xm(){return rA}var sA=Ge({},Yl,{key:function(t){if(t.key){var e=eA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xm,charCode:function(t){return t.type==="keypress"?cu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iA=kn(sA),oA=Ge({},Rd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ox=kn(oA),aA=Ge({},Yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xm}),lA=kn(aA),cA=Ge({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),uA=kn(cA),dA=Ge({},Rd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hA=kn(dA),fA=[9,13,27,32],Zm=Lr&&"CompositionEvent"in window,tl=null;Lr&&"documentMode"in document&&(tl=document.documentMode);var pA=Lr&&"TextEvent"in window&&!tl,__=Lr&&(!Zm||tl&&8<tl&&11>=tl),ax=" ",lx=!1;function E_(t,e){switch(t){case"keyup":return fA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function N_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var io=!1;function mA(t,e){switch(t){case"compositionend":return N_(e);case"keypress":return e.which!==32?null:(lx=!0,ax);case"textInput":return t=e.data,t===ax&&lx?null:t;default:return null}}function gA(t,e){if(io)return t==="compositionend"||!Zm&&E_(t,e)?(t=b_(),lu=Jm=fs=null,io=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return __&&e.locale!=="ko"?null:e.data;default:return null}}var yA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yA[t.type]:e==="textarea"}function T_(t,e,n,r){n_(r),e=Mu(e,"onChange"),0<e.length&&(n=new Ym("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var nl=null,El=null;function xA(t){L_(t,0)}function Pd(t){var e=lo(t);if(Qb(e))return t}function vA(t,e){if(t==="change")return e}var S_=!1;if(Lr){var sf;if(Lr){var of="oninput"in document;if(!of){var ux=document.createElement("div");ux.setAttribute("oninput","return;"),of=typeof ux.oninput=="function"}sf=of}else sf=!1;S_=sf&&(!document.documentMode||9<document.documentMode)}function dx(){nl&&(nl.detachEvent("onpropertychange",I_),El=nl=null)}function I_(t){if(t.propertyName==="value"&&Pd(El)){var e=[];T_(e,El,t,Hm(t)),o_(xA,e)}}function wA(t,e,n){t==="focusin"?(dx(),nl=e,El=n,nl.attachEvent("onpropertychange",I_)):t==="focusout"&&dx()}function bA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pd(El)}function _A(t,e){if(t==="click")return Pd(e)}function EA(t,e){if(t==="input"||t==="change")return Pd(e)}function NA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jn=typeof Object.is=="function"?Object.is:NA;function Nl(t,e){if(Jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Jf.call(e,s)||!Jn(t[s],e[s]))return!1}return!0}function hx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fx(t,e){var n=hx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hx(n)}}function k_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?k_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function A_(){for(var t=window,e=Cu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cu(t.document)}return e}function eg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TA(t){var e=A_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&k_(n.ownerDocument.documentElement,n)){if(r!==null&&eg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=fx(n,i);var a=fx(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var SA=Lr&&"documentMode"in document&&11>=document.documentMode,oo=null,mp=null,rl=null,gp=!1;function px(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gp||oo==null||oo!==Cu(r)||(r=oo,"selectionStart"in r&&eg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rl&&Nl(rl,r)||(rl=r,r=Mu(mp,"onSelect"),0<r.length&&(e=new Ym("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=oo)))}function Bc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ao={animationend:Bc("Animation","AnimationEnd"),animationiteration:Bc("Animation","AnimationIteration"),animationstart:Bc("Animation","AnimationStart"),transitionend:Bc("Transition","TransitionEnd")},af={},j_={};Lr&&(j_=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function Dd(t){if(af[t])return af[t];if(!ao[t])return t;var e=ao[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in j_)return af[t]=e[n];return t}var C_=Dd("animationend"),R_=Dd("animationiteration"),P_=Dd("animationstart"),D_=Dd("transitionend"),O_=new Map,mx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $s(t,e){O_.set(t,e),Oi(e,[t])}for(var lf=0;lf<mx.length;lf++){var cf=mx[lf],IA=cf.toLowerCase(),kA=cf[0].toUpperCase()+cf.slice(1);$s(IA,"on"+kA)}$s(C_,"onAnimationEnd");$s(R_,"onAnimationIteration");$s(P_,"onAnimationStart");$s("dblclick","onDoubleClick");$s("focusin","onFocus");$s("focusout","onBlur");$s(D_,"onTransitionEnd");jo("onMouseEnter",["mouseout","mouseover"]);jo("onMouseLeave",["mouseout","mouseover"]);jo("onPointerEnter",["pointerout","pointerover"]);jo("onPointerLeave",["pointerout","pointerover"]);Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wa));function gx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Ik(r,e,void 0,t),t.currentTarget=null}function L_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;gx(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;gx(s,l,d),i=c}}}if(Pu)throw t=dp,Pu=!1,dp=null,t}function Ue(t,e){var n=e[bp];n===void 0&&(n=e[bp]=new Set);var r=t+"__bubble";n.has(r)||(V_(e,t,2,!1),n.add(r))}function uf(t,e,n){var r=0;e&&(r|=4),V_(n,t,r,e)}var $c="_reactListening"+Math.random().toString(36).slice(2);function Tl(t){if(!t[$c]){t[$c]=!0,qb.forEach(function(n){n!=="selectionchange"&&(AA.has(n)||uf(n,!1,t),uf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$c]||(e[$c]=!0,uf("selectionchange",!1,e))}}function V_(t,e,n,r){switch(w_(e)){case 1:var s=zk;break;case 4:s=qk;break;default:s=Qm}n=s.bind(null,e,n,t),s=void 0,!up||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function df(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ai(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}o_(function(){var d=i,h=Hm(n),f=[];e:{var m=O_.get(t);if(m!==void 0){var w=Ym,y=t;switch(t){case"keypress":if(cu(n)===0)break e;case"keydown":case"keyup":w=iA;break;case"focusin":y="focus",w=rf;break;case"focusout":y="blur",w=rf;break;case"beforeblur":case"afterblur":w=rf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=sx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Gk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=lA;break;case C_:case R_:case P_:w=Jk;break;case D_:w=uA;break;case"scroll":w=Hk;break;case"wheel":w=hA;break;case"copy":case"cut":case"paste":w=Xk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ox}var E=(e&4)!==0,v=!E&&t==="scroll",T=E?m!==null?m+"Capture":null:m;E=[];for(var x=d,N;x!==null;){N=x;var R=N.stateNode;if(N.tag===5&&R!==null&&(N=R,T!==null&&(R=vl(x,T),R!=null&&E.push(Sl(x,R,N)))),v)break;x=x.return}0<E.length&&(m=new w(m,y,null,n,h),f.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",m&&n!==lp&&(y=n.relatedTarget||n.fromElement)&&(ai(y)||y[Vr]))break e;if((w||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,w?(y=n.relatedTarget||n.toElement,w=d,y=y?ai(y):null,y!==null&&(v=Li(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(w=null,y=d),w!==y)){if(E=sx,R="onMouseLeave",T="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(E=ox,R="onPointerLeave",T="onPointerEnter",x="pointer"),v=w==null?m:lo(w),N=y==null?m:lo(y),m=new E(R,x+"leave",w,n,h),m.target=v,m.relatedTarget=N,R=null,ai(h)===d&&(E=new E(T,x+"enter",y,n,h),E.target=N,E.relatedTarget=v,R=E),v=R,w&&y)t:{for(E=w,T=y,x=0,N=E;N;N=Qi(N))x++;for(N=0,R=T;R;R=Qi(R))N++;for(;0<x-N;)E=Qi(E),x--;for(;0<N-x;)T=Qi(T),N--;for(;x--;){if(E===T||T!==null&&E===T.alternate)break t;E=Qi(E),T=Qi(T)}E=null}else E=null;w!==null&&yx(f,m,w,E,!1),y!==null&&v!==null&&yx(f,v,y,E,!0)}}e:{if(m=d?lo(d):window,w=m.nodeName&&m.nodeName.toLowerCase(),w==="select"||w==="input"&&m.type==="file")var C=vA;else if(cx(m))if(S_)C=EA;else{C=bA;var L=wA}else(w=m.nodeName)&&w.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(C=_A);if(C&&(C=C(t,d))){T_(f,C,n,h);break e}L&&L(t,m,d),t==="focusout"&&(L=m._wrapperState)&&L.controlled&&m.type==="number"&&rp(m,"number",m.value)}switch(L=d?lo(d):window,t){case"focusin":(cx(L)||L.contentEditable==="true")&&(oo=L,mp=d,rl=null);break;case"focusout":rl=mp=oo=null;break;case"mousedown":gp=!0;break;case"contextmenu":case"mouseup":case"dragend":gp=!1,px(f,n,h);break;case"selectionchange":if(SA)break;case"keydown":case"keyup":px(f,n,h)}var b;if(Zm)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else io?E_(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(__&&n.locale!=="ko"&&(io||_!=="onCompositionStart"?_==="onCompositionEnd"&&io&&(b=b_()):(fs=h,Jm="value"in fs?fs.value:fs.textContent,io=!0)),L=Mu(d,_),0<L.length&&(_=new ix(_,t,null,n,h),f.push({event:_,listeners:L}),b?_.data=b:(b=N_(n),b!==null&&(_.data=b)))),(b=pA?mA(t,n):gA(t,n))&&(d=Mu(d,"onBeforeInput"),0<d.length&&(h=new ix("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=b))}L_(f,e)})}function Sl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=vl(t,n),i!=null&&r.unshift(Sl(t,i,s)),i=vl(t,e),i!=null&&r.push(Sl(t,i,s))),t=t.return}return r}function Qi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yx(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=vl(n,i),c!=null&&a.unshift(Sl(n,c,l))):s||(c=vl(n,i),c!=null&&a.push(Sl(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var jA=/\r\n?/g,CA=/\u0000|\uFFFD/g;function xx(t){return(typeof t=="string"?t:""+t).replace(jA,`
`).replace(CA,"")}function zc(t,e,n){if(e=xx(e),xx(t)!==e&&n)throw Error(H(425))}function Fu(){}var yp=null,xp=null;function vp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wp=typeof setTimeout=="function"?setTimeout:void 0,RA=typeof clearTimeout=="function"?clearTimeout:void 0,vx=typeof Promise=="function"?Promise:void 0,PA=typeof queueMicrotask=="function"?queueMicrotask:typeof vx<"u"?function(t){return vx.resolve(null).then(t).catch(DA)}:wp;function DA(t){setTimeout(function(){throw t})}function hf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),_l(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_l(e)}function ws(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yo=Math.random().toString(36).slice(2),lr="__reactFiber$"+Yo,Il="__reactProps$"+Yo,Vr="__reactContainer$"+Yo,bp="__reactEvents$"+Yo,OA="__reactListeners$"+Yo,LA="__reactHandles$"+Yo;function ai(t){var e=t[lr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vr]||n[lr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wx(t);t!==null;){if(n=t[lr])return n;t=wx(t)}return e}t=n,n=t.parentNode}return null}function Xl(t){return t=t[lr]||t[Vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Od(t){return t[Il]||null}var _p=[],co=-1;function zs(t){return{current:t}}function Be(t){0>co||(t.current=_p[co],_p[co]=null,co--)}function Ve(t,e){co++,_p[co]=t.current,t.current=e}var Cs={},zt=zs(Cs),dn=zs(!1),wi=Cs;function Co(t,e){var n=t.type.contextTypes;if(!n)return Cs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function hn(t){return t=t.childContextTypes,t!=null}function Uu(){Be(dn),Be(zt)}function bx(t,e,n){if(zt.current!==Cs)throw Error(H(168));Ve(zt,e),Ve(dn,n)}function M_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,wk(t)||"Unknown",s));return Ge({},n,r)}function Bu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cs,wi=zt.current,Ve(zt,t),Ve(dn,dn.current),!0}function _x(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=M_(t,e,wi),r.__reactInternalMemoizedMergedChildContext=t,Be(dn),Be(zt),Ve(zt,t)):Be(dn),Ve(dn,n)}var kr=null,Ld=!1,ff=!1;function F_(t){kr===null?kr=[t]:kr.push(t)}function VA(t){Ld=!0,F_(t)}function qs(){if(!ff&&kr!==null){ff=!0;var t=0,e=Re;try{var n=kr;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kr=null,Ld=!1}catch(s){throw kr!==null&&(kr=kr.slice(t+1)),u_(Wm,qs),s}finally{Re=e,ff=!1}}return null}var uo=[],ho=0,$u=null,zu=0,jn=[],Cn=0,bi=null,Ar=1,jr="";function si(t,e){uo[ho++]=zu,uo[ho++]=$u,$u=t,zu=e}function U_(t,e,n){jn[Cn++]=Ar,jn[Cn++]=jr,jn[Cn++]=bi,bi=t;var r=Ar;t=jr;var s=32-Kn(r)-1;r&=~(1<<s),n+=1;var i=32-Kn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ar=1<<32-Kn(e)+s|n<<s|r,jr=i+t}else Ar=1<<i|n<<s|r,jr=t}function tg(t){t.return!==null&&(si(t,1),U_(t,1,0))}function ng(t){for(;t===$u;)$u=uo[--ho],uo[ho]=null,zu=uo[--ho],uo[ho]=null;for(;t===bi;)bi=jn[--Cn],jn[Cn]=null,jr=jn[--Cn],jn[Cn]=null,Ar=jn[--Cn],jn[Cn]=null}var En=null,wn=null,ze=!1,qn=null;function B_(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ex(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,En=t,wn=ws(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,En=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bi!==null?{id:Ar,overflow:jr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,En=t,wn=null,!0):!1;default:return!1}}function Ep(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Np(t){if(ze){var e=wn;if(e){var n=e;if(!Ex(t,e)){if(Ep(t))throw Error(H(418));e=ws(n.nextSibling);var r=En;e&&Ex(t,e)?B_(r,n):(t.flags=t.flags&-4097|2,ze=!1,En=t)}}else{if(Ep(t))throw Error(H(418));t.flags=t.flags&-4097|2,ze=!1,En=t}}}function Nx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;En=t}function qc(t){if(t!==En)return!1;if(!ze)return Nx(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vp(t.type,t.memoizedProps)),e&&(e=wn)){if(Ep(t))throw $_(),Error(H(418));for(;e;)B_(t,e),e=ws(e.nextSibling)}if(Nx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=ws(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=En?ws(t.stateNode.nextSibling):null;return!0}function $_(){for(var t=wn;t;)t=ws(t.nextSibling)}function Ro(){wn=En=null,ze=!1}function rg(t){qn===null?qn=[t]:qn.push(t)}var MA=Hr.ReactCurrentBatchConfig;function La(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Hc(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Tx(t){var e=t._init;return e(t._payload)}function z_(t){function e(T,x){if(t){var N=T.deletions;N===null?(T.deletions=[x],T.flags|=16):N.push(x)}}function n(T,x){if(!t)return null;for(;x!==null;)e(T,x),x=x.sibling;return null}function r(T,x){for(T=new Map;x!==null;)x.key!==null?T.set(x.key,x):T.set(x.index,x),x=x.sibling;return T}function s(T,x){return T=Ns(T,x),T.index=0,T.sibling=null,T}function i(T,x,N){return T.index=N,t?(N=T.alternate,N!==null?(N=N.index,N<x?(T.flags|=2,x):N):(T.flags|=2,x)):(T.flags|=1048576,x)}function a(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,x,N,R){return x===null||x.tag!==6?(x=wf(N,T.mode,R),x.return=T,x):(x=s(x,N),x.return=T,x)}function c(T,x,N,R){var C=N.type;return C===so?h(T,x,N.props.children,R,N.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===rs&&Tx(C)===x.type)?(R=s(x,N.props),R.ref=La(T,x,N),R.return=T,R):(R=gu(N.type,N.key,N.props,null,T.mode,R),R.ref=La(T,x,N),R.return=T,R)}function d(T,x,N,R){return x===null||x.tag!==4||x.stateNode.containerInfo!==N.containerInfo||x.stateNode.implementation!==N.implementation?(x=bf(N,T.mode,R),x.return=T,x):(x=s(x,N.children||[]),x.return=T,x)}function h(T,x,N,R,C){return x===null||x.tag!==7?(x=mi(N,T.mode,R,C),x.return=T,x):(x=s(x,N),x.return=T,x)}function f(T,x,N){if(typeof x=="string"&&x!==""||typeof x=="number")return x=wf(""+x,T.mode,N),x.return=T,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Dc:return N=gu(x.type,x.key,x.props,null,T.mode,N),N.ref=La(T,null,x),N.return=T,N;case ro:return x=bf(x,T.mode,N),x.return=T,x;case rs:var R=x._init;return f(T,R(x._payload),N)}if(qa(x)||Ca(x))return x=mi(x,T.mode,N,null),x.return=T,x;Hc(T,x)}return null}function m(T,x,N,R){var C=x!==null?x.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return C!==null?null:l(T,x,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Dc:return N.key===C?c(T,x,N,R):null;case ro:return N.key===C?d(T,x,N,R):null;case rs:return C=N._init,m(T,x,C(N._payload),R)}if(qa(N)||Ca(N))return C!==null?null:h(T,x,N,R,null);Hc(T,N)}return null}function w(T,x,N,R,C){if(typeof R=="string"&&R!==""||typeof R=="number")return T=T.get(N)||null,l(x,T,""+R,C);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Dc:return T=T.get(R.key===null?N:R.key)||null,c(x,T,R,C);case ro:return T=T.get(R.key===null?N:R.key)||null,d(x,T,R,C);case rs:var L=R._init;return w(T,x,N,L(R._payload),C)}if(qa(R)||Ca(R))return T=T.get(N)||null,h(x,T,R,C,null);Hc(x,R)}return null}function y(T,x,N,R){for(var C=null,L=null,b=x,_=x=0,A=null;b!==null&&_<N.length;_++){b.index>_?(A=b,b=null):A=b.sibling;var j=m(T,b,N[_],R);if(j===null){b===null&&(b=A);break}t&&b&&j.alternate===null&&e(T,b),x=i(j,x,_),L===null?C=j:L.sibling=j,L=j,b=A}if(_===N.length)return n(T,b),ze&&si(T,_),C;if(b===null){for(;_<N.length;_++)b=f(T,N[_],R),b!==null&&(x=i(b,x,_),L===null?C=b:L.sibling=b,L=b);return ze&&si(T,_),C}for(b=r(T,b);_<N.length;_++)A=w(b,T,_,N[_],R),A!==null&&(t&&A.alternate!==null&&b.delete(A.key===null?_:A.key),x=i(A,x,_),L===null?C=A:L.sibling=A,L=A);return t&&b.forEach(function(I){return e(T,I)}),ze&&si(T,_),C}function E(T,x,N,R){var C=Ca(N);if(typeof C!="function")throw Error(H(150));if(N=C.call(N),N==null)throw Error(H(151));for(var L=C=null,b=x,_=x=0,A=null,j=N.next();b!==null&&!j.done;_++,j=N.next()){b.index>_?(A=b,b=null):A=b.sibling;var I=m(T,b,j.value,R);if(I===null){b===null&&(b=A);break}t&&b&&I.alternate===null&&e(T,b),x=i(I,x,_),L===null?C=I:L.sibling=I,L=I,b=A}if(j.done)return n(T,b),ze&&si(T,_),C;if(b===null){for(;!j.done;_++,j=N.next())j=f(T,j.value,R),j!==null&&(x=i(j,x,_),L===null?C=j:L.sibling=j,L=j);return ze&&si(T,_),C}for(b=r(T,b);!j.done;_++,j=N.next())j=w(b,T,_,j.value,R),j!==null&&(t&&j.alternate!==null&&b.delete(j.key===null?_:j.key),x=i(j,x,_),L===null?C=j:L.sibling=j,L=j);return t&&b.forEach(function(P){return e(T,P)}),ze&&si(T,_),C}function v(T,x,N,R){if(typeof N=="object"&&N!==null&&N.type===so&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Dc:e:{for(var C=N.key,L=x;L!==null;){if(L.key===C){if(C=N.type,C===so){if(L.tag===7){n(T,L.sibling),x=s(L,N.props.children),x.return=T,T=x;break e}}else if(L.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===rs&&Tx(C)===L.type){n(T,L.sibling),x=s(L,N.props),x.ref=La(T,L,N),x.return=T,T=x;break e}n(T,L);break}else e(T,L);L=L.sibling}N.type===so?(x=mi(N.props.children,T.mode,R,N.key),x.return=T,T=x):(R=gu(N.type,N.key,N.props,null,T.mode,R),R.ref=La(T,x,N),R.return=T,T=R)}return a(T);case ro:e:{for(L=N.key;x!==null;){if(x.key===L)if(x.tag===4&&x.stateNode.containerInfo===N.containerInfo&&x.stateNode.implementation===N.implementation){n(T,x.sibling),x=s(x,N.children||[]),x.return=T,T=x;break e}else{n(T,x);break}else e(T,x);x=x.sibling}x=bf(N,T.mode,R),x.return=T,T=x}return a(T);case rs:return L=N._init,v(T,x,L(N._payload),R)}if(qa(N))return y(T,x,N,R);if(Ca(N))return E(T,x,N,R);Hc(T,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,x!==null&&x.tag===6?(n(T,x.sibling),x=s(x,N),x.return=T,T=x):(n(T,x),x=wf(N,T.mode,R),x.return=T,T=x),a(T)):n(T,x)}return v}var Po=z_(!0),q_=z_(!1),qu=zs(null),Hu=null,fo=null,sg=null;function ig(){sg=fo=Hu=null}function og(t){var e=qu.current;Be(qu),t._currentValue=e}function Tp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bo(t,e){Hu=t,sg=fo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(sg!==t)if(t={context:t,memoizedValue:e,next:null},fo===null){if(Hu===null)throw Error(H(308));fo=t,Hu.dependencies={lanes:0,firstContext:t}}else fo=fo.next=t;return e}var li=null;function ag(t){li===null?li=[t]:li.push(t)}function H_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ag(e)):(n.next=s.next,s.next=n),e.interleaved=n,Mr(t,r)}function Mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ss=!1;function lg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function W_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function bs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Mr(t,n)}return s=r.interleaved,s===null?(e.next=e,ag(r)):(e.next=s.next,s.next=e),r.interleaved=e,Mr(t,n)}function uu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gm(t,n)}}function Sx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wu(t,e,n,r){var s=t.updateQueue;ss=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,h=d=c=null,l=i;do{var m=l.lane,w=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,E=l;switch(m=e,w=n,E.tag){case 1:if(y=E.payload,typeof y=="function"){f=y.call(w,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=E.payload,m=typeof y=="function"?y.call(w,f,m):y,m==null)break e;f=Ge({},f,m);break e;case 2:ss=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else w={eventTime:w,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=w,c=f):h=h.next=w,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ei|=a,t.lanes=a,t.memoizedState=f}}function Ix(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var Zl={},dr=zs(Zl),kl=zs(Zl),Al=zs(Zl);function ci(t){if(t===Zl)throw Error(H(174));return t}function cg(t,e){switch(Ve(Al,e),Ve(kl,t),Ve(dr,Zl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ip(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ip(e,t)}Be(dr),Ve(dr,e)}function Do(){Be(dr),Be(kl),Be(Al)}function G_(t){ci(Al.current);var e=ci(dr.current),n=ip(e,t.type);e!==n&&(Ve(kl,t),Ve(dr,n))}function ug(t){kl.current===t&&(Be(dr),Be(kl))}var qe=zs(0);function Gu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pf=[];function dg(){for(var t=0;t<pf.length;t++)pf[t]._workInProgressVersionPrimary=null;pf.length=0}var du=Hr.ReactCurrentDispatcher,mf=Hr.ReactCurrentBatchConfig,_i=0,He=null,mt=null,Et=null,Ku=!1,sl=!1,jl=0,FA=0;function Pt(){throw Error(H(321))}function hg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jn(t[n],e[n]))return!1;return!0}function fg(t,e,n,r,s,i){if(_i=i,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,du.current=t===null||t.memoizedState===null?zA:qA,t=n(r,s),sl){i=0;do{if(sl=!1,jl=0,25<=i)throw Error(H(301));i+=1,Et=mt=null,e.updateQueue=null,du.current=HA,t=n(r,s)}while(sl)}if(du.current=Qu,e=mt!==null&&mt.next!==null,_i=0,Et=mt=He=null,Ku=!1,e)throw Error(H(300));return t}function pg(){var t=jl!==0;return jl=0,t}function ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?He.memoizedState=Et=t:Et=Et.next=t,Et}function Mn(){if(mt===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var e=Et===null?He.memoizedState:Et.next;if(e!==null)Et=e,mt=t;else{if(t===null)throw Error(H(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Et===null?He.memoizedState=Et=t:Et=Et.next=t}return Et}function Cl(t,e){return typeof e=="function"?e(t):e}function gf(t){var e=Mn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=mt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((_i&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,He.lanes|=h,Ei|=h}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,Jn(r,e.memoizedState)||(cn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,He.lanes|=i,Ei|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yf(t){var e=Mn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Jn(i,e.memoizedState)||(cn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function K_(){}function Q_(t,e){var n=He,r=Mn(),s=e(),i=!Jn(r.memoizedState,s);if(i&&(r.memoizedState=s,cn=!0),r=r.queue,mg(X_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,Rl(9,Y_.bind(null,n,r,s,e),void 0,null),Nt===null)throw Error(H(349));_i&30||J_(n,e,s)}return s}function J_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Y_(t,e,n,r){e.value=n,e.getSnapshot=r,Z_(e)&&e1(t)}function X_(t,e,n){return n(function(){Z_(e)&&e1(t)})}function Z_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jn(t,n)}catch{return!0}}function e1(t){var e=Mr(t,1);e!==null&&Qn(e,t,1,-1)}function kx(t){var e=ir();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:t},e.queue=t,t=t.dispatch=$A.bind(null,He,t),[e.memoizedState,t]}function Rl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function t1(){return Mn().memoizedState}function hu(t,e,n,r){var s=ir();He.flags|=t,s.memoizedState=Rl(1|e,n,void 0,r===void 0?null:r)}function Vd(t,e,n,r){var s=Mn();r=r===void 0?null:r;var i=void 0;if(mt!==null){var a=mt.memoizedState;if(i=a.destroy,r!==null&&hg(r,a.deps)){s.memoizedState=Rl(e,n,i,r);return}}He.flags|=t,s.memoizedState=Rl(1|e,n,i,r)}function Ax(t,e){return hu(8390656,8,t,e)}function mg(t,e){return Vd(2048,8,t,e)}function n1(t,e){return Vd(4,2,t,e)}function r1(t,e){return Vd(4,4,t,e)}function s1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function i1(t,e,n){return n=n!=null?n.concat([t]):null,Vd(4,4,s1.bind(null,e,t),n)}function gg(){}function o1(t,e){var n=Mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function a1(t,e){var n=Mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function l1(t,e,n){return _i&21?(Jn(n,e)||(n=f_(),He.lanes|=n,Ei|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=n)}function UA(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=mf.transition;mf.transition={};try{t(!1),e()}finally{Re=n,mf.transition=r}}function c1(){return Mn().memoizedState}function BA(t,e,n){var r=Es(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},u1(t))d1(e,n);else if(n=H_(t,e,n,r),n!==null){var s=Jt();Qn(n,t,r,s),h1(n,e,r)}}function $A(t,e,n){var r=Es(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(u1(t))d1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Jn(l,a)){var c=e.interleaved;c===null?(s.next=s,ag(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=H_(t,e,s,r),n!==null&&(s=Jt(),Qn(n,t,r,s),h1(n,e,r))}}function u1(t){var e=t.alternate;return t===He||e!==null&&e===He}function d1(t,e){sl=Ku=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function h1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gm(t,n)}}var Qu={readContext:Vn,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},zA={readContext:Vn,useCallback:function(t,e){return ir().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:Ax,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hu(4194308,4,s1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hu(4194308,4,t,e)},useInsertionEffect:function(t,e){return hu(4,2,t,e)},useMemo:function(t,e){var n=ir();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ir();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=BA.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=ir();return t={current:t},e.memoizedState=t},useState:kx,useDebugValue:gg,useDeferredValue:function(t){return ir().memoizedState=t},useTransition:function(){var t=kx(!1),e=t[0];return t=UA.bind(null,t[1]),ir().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,s=ir();if(ze){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Nt===null)throw Error(H(349));_i&30||J_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ax(X_.bind(null,r,i,t),[t]),r.flags|=2048,Rl(9,Y_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ir(),e=Nt.identifierPrefix;if(ze){var n=jr,r=Ar;n=(r&~(1<<32-Kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=jl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=FA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qA={readContext:Vn,useCallback:o1,useContext:Vn,useEffect:mg,useImperativeHandle:i1,useInsertionEffect:n1,useLayoutEffect:r1,useMemo:a1,useReducer:gf,useRef:t1,useState:function(){return gf(Cl)},useDebugValue:gg,useDeferredValue:function(t){var e=Mn();return l1(e,mt.memoizedState,t)},useTransition:function(){var t=gf(Cl)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:K_,useSyncExternalStore:Q_,useId:c1,unstable_isNewReconciler:!1},HA={readContext:Vn,useCallback:o1,useContext:Vn,useEffect:mg,useImperativeHandle:i1,useInsertionEffect:n1,useLayoutEffect:r1,useMemo:a1,useReducer:yf,useRef:t1,useState:function(){return yf(Cl)},useDebugValue:gg,useDeferredValue:function(t){var e=Mn();return mt===null?e.memoizedState=t:l1(e,mt.memoizedState,t)},useTransition:function(){var t=yf(Cl)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:K_,useSyncExternalStore:Q_,useId:c1,unstable_isNewReconciler:!1};function $n(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Md={isMounted:function(t){return(t=t._reactInternals)?Li(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jt(),s=Es(t),i=Pr(r,s);i.payload=e,n!=null&&(i.callback=n),e=bs(t,i,s),e!==null&&(Qn(e,t,s,r),uu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jt(),s=Es(t),i=Pr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=bs(t,i,s),e!==null&&(Qn(e,t,s,r),uu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),r=Es(t),s=Pr(n,r);s.tag=2,e!=null&&(s.callback=e),e=bs(t,s,r),e!==null&&(Qn(e,t,r,n),uu(e,t,r))}};function jx(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Nl(n,r)||!Nl(s,i):!0}function f1(t,e,n){var r=!1,s=Cs,i=e.contextType;return typeof i=="object"&&i!==null?i=Vn(i):(s=hn(e)?wi:zt.current,r=e.contextTypes,i=(r=r!=null)?Co(t,s):Cs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Md,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Cx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Md.enqueueReplaceState(e,e.state,null)}function Ip(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},lg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vn(i):(i=hn(e)?wi:zt.current,s.context=Co(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Sp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Md.enqueueReplaceState(s,s.state,null),Wu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Oo(t,e){try{var n="",r=e;do n+=vk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function xf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WA=typeof WeakMap=="function"?WeakMap:Map;function p1(t,e,n){n=Pr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Yu||(Yu=!0,Mp=r),kp(t,e)},n}function m1(t,e,n){n=Pr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){kp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){kp(t,e),typeof r!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Rx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WA;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=o2.bind(null,t,e,n),e.then(t,t))}function Px(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pr(-1,1),e.tag=2,bs(n,e,1))),n.lanes|=1),t)}var GA=Hr.ReactCurrentOwner,cn=!1;function Kt(t,e,n,r){e.child=t===null?q_(e,null,n,r):Po(e,t.child,n,r)}function Ox(t,e,n,r,s){n=n.render;var i=e.ref;return bo(e,s),r=fg(t,e,n,r,i,s),n=pg(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fr(t,e,s)):(ze&&n&&tg(e),e.flags|=1,Kt(t,e,r,s),e.child)}function Lx(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ng(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,g1(t,e,i,r,s)):(t=gu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Nl,n(a,r)&&t.ref===e.ref)return Fr(t,e,s)}return e.flags|=1,t=Ns(i,r),t.ref=e.ref,t.return=e,e.child=t}function g1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Nl(i,r)&&t.ref===e.ref)if(cn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,Fr(t,e,s)}return Ap(t,e,n,r,s)}function y1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(mo,xn),xn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(mo,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ve(mo,xn),xn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ve(mo,xn),xn|=r;return Kt(t,e,s,n),e.child}function x1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ap(t,e,n,r,s){var i=hn(n)?wi:zt.current;return i=Co(e,i),bo(e,s),n=fg(t,e,n,r,i,s),r=pg(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fr(t,e,s)):(ze&&r&&tg(e),e.flags|=1,Kt(t,e,n,s),e.child)}function Vx(t,e,n,r,s){if(hn(n)){var i=!0;Bu(e)}else i=!1;if(bo(e,s),e.stateNode===null)fu(t,e),f1(e,n,r),Ip(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Vn(d):(d=hn(n)?wi:zt.current,d=Co(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Cx(e,a,r,d),ss=!1;var m=e.memoizedState;a.state=m,Wu(e,r,a,s),c=e.memoizedState,l!==r||m!==c||dn.current||ss?(typeof h=="function"&&(Sp(e,n,h,r),c=e.memoizedState),(l=ss||jx(e,n,l,r,m,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,W_(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:$n(e.type,l),a.props=d,f=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Vn(c):(c=hn(n)?wi:zt.current,c=Co(e,c));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Cx(e,a,r,c),ss=!1,m=e.memoizedState,a.state=m,Wu(e,r,a,s);var y=e.memoizedState;l!==f||m!==y||dn.current||ss?(typeof w=="function"&&(Sp(e,n,w,r),y=e.memoizedState),(d=ss||jx(e,n,d,r,m,y,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return jp(t,e,n,r,i,s)}function jp(t,e,n,r,s,i){x1(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&_x(e,n,!1),Fr(t,e,i);r=e.stateNode,GA.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Po(e,t.child,null,i),e.child=Po(e,null,l,i)):Kt(t,e,l,i),e.memoizedState=r.state,s&&_x(e,n,!0),e.child}function v1(t){var e=t.stateNode;e.pendingContext?bx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bx(t,e.context,!1),cg(t,e.containerInfo)}function Mx(t,e,n,r,s){return Ro(),rg(s),e.flags|=256,Kt(t,e,n,r),e.child}var Cp={dehydrated:null,treeContext:null,retryLane:0};function Rp(t){return{baseLanes:t,cachePool:null,transitions:null}}function w1(t,e,n){var r=e.pendingProps,s=qe.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ve(qe,s&1),t===null)return Np(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Bd(a,r,0,null),t=mi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Rp(n),e.memoizedState=Cp,t):yg(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return KA(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ns(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ns(l,i):(i=mi(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Rp(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Cp,r}return i=t.child,t=i.sibling,r=Ns(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function yg(t,e){return e=Bd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wc(t,e,n,r){return r!==null&&rg(r),Po(e,t.child,null,n),t=yg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function KA(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=xf(Error(H(422))),Wc(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Bd({mode:"visible",children:r.children},s,0,null),i=mi(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Po(e,t.child,null,a),e.child.memoizedState=Rp(a),e.memoizedState=Cp,i);if(!(e.mode&1))return Wc(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(H(419)),r=xf(i,r,void 0),Wc(t,e,a,r)}if(l=(a&t.childLanes)!==0,cn||l){if(r=Nt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Mr(t,s),Qn(r,t,s,-1))}return Eg(),r=xf(Error(H(421))),Wc(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=a2.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,wn=ws(s.nextSibling),En=e,ze=!0,qn=null,t!==null&&(jn[Cn++]=Ar,jn[Cn++]=jr,jn[Cn++]=bi,Ar=t.id,jr=t.overflow,bi=e),e=yg(e,r.children),e.flags|=4096,e)}function Fx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tp(t.return,e,n)}function vf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function b1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Kt(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fx(t,n,e);else if(t.tag===19)Fx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve(qe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Gu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),vf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Gu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}vf(e,!0,n,null,i);break;case"together":vf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ei|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Ns(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ns(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function QA(t,e,n){switch(e.tag){case 3:v1(e),Ro();break;case 5:G_(e);break;case 1:hn(e.type)&&Bu(e);break;case 4:cg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ve(qu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?w1(t,e,n):(Ve(qe,qe.current&1),t=Fr(t,e,n),t!==null?t.sibling:null);Ve(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return b1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ve(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,y1(t,e,n)}return Fr(t,e,n)}var _1,Pp,E1,N1;_1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pp=function(){};E1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ci(dr.current);var i=null;switch(n){case"input":s=tp(t,s),r=tp(t,r),i=[];break;case"select":s=Ge({},s,{value:void 0}),r=Ge({},r,{value:void 0}),i=[];break;case"textarea":s=sp(t,s),r=sp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fu)}op(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(yl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(yl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ue("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};N1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Va(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function JA(t,e,n){var r=e.pendingProps;switch(ng(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return hn(e.type)&&Uu(),Dt(e),null;case 3:return r=e.stateNode,Do(),Be(dn),Be(zt),dg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qn!==null&&(Bp(qn),qn=null))),Pp(t,e),Dt(e),null;case 5:ug(e);var s=ci(Al.current);if(n=e.type,t!==null&&e.stateNode!=null)E1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Dt(e),null}if(t=ci(dr.current),qc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[lr]=e,r[Il]=i,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(s=0;s<Wa.length;s++)Ue(Wa[s],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ky(r,i),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ue("invalid",r);break;case"textarea":Jy(r,i),Ue("invalid",r)}op(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&zc(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&zc(r.textContent,l,t),s=["children",""+l]):yl.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ue("scroll",r)}switch(n){case"input":Oc(r),Qy(r,i,!0);break;case"textarea":Oc(r),Yy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Fu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Xb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[lr]=e,t[Il]=r,_1(t,e,!1,!1),e.stateNode=t;e:{switch(a=ap(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),s=r;break;case"iframe":case"object":case"embed":Ue("load",t),s=r;break;case"video":case"audio":for(s=0;s<Wa.length;s++)Ue(Wa[s],t);s=r;break;case"source":Ue("error",t),s=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),s=r;break;case"details":Ue("toggle",t),s=r;break;case"input":Ky(t,r),s=tp(t,r),Ue("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ge({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":Jy(t,r),s=sp(t,r),Ue("invalid",t);break;default:s=r}op(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?t_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Zb(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&xl(t,c):typeof c=="number"&&xl(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ue("scroll",t):c!=null&&Bm(t,i,c,a))}switch(n){case"input":Oc(t),Qy(t,r,!1);break;case"textarea":Oc(t),Yy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+js(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?yo(t,!!r.multiple,i,!1):r.defaultValue!=null&&yo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Fu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)N1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=ci(Al.current),ci(dr.current),qc(e)){if(r=e.stateNode,n=e.memoizedProps,r[lr]=e,(i=r.nodeValue!==n)&&(t=En,t!==null))switch(t.tag){case 3:zc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lr]=e,e.stateNode=r}return Dt(e),null;case 13:if(Be(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&wn!==null&&e.mode&1&&!(e.flags&128))$_(),Ro(),e.flags|=98560,i=!1;else if(i=qc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[lr]=e}else Ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),i=!1}else qn!==null&&(Bp(qn),qn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?gt===0&&(gt=3):Eg())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return Do(),Pp(t,e),t===null&&Tl(e.stateNode.containerInfo),Dt(e),null;case 10:return og(e.type._context),Dt(e),null;case 17:return hn(e.type)&&Uu(),Dt(e),null;case 19:if(Be(qe),i=e.memoizedState,i===null)return Dt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Va(i,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Gu(t),a!==null){for(e.flags|=128,Va(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(qe,qe.current&1|2),e.child}t=t.sibling}i.tail!==null&&st()>Lo&&(e.flags|=128,r=!0,Va(i,!1),e.lanes=4194304)}else{if(!r)if(t=Gu(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Va(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ze)return Dt(e),null}else 2*st()-i.renderingStartTime>Lo&&n!==1073741824&&(e.flags|=128,r=!0,Va(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=st(),e.sibling=null,n=qe.current,Ve(qe,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return _g(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function YA(t,e){switch(ng(e),e.tag){case 1:return hn(e.type)&&Uu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Do(),Be(dn),Be(zt),dg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ug(e),null;case 13:if(Be(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(qe),null;case 4:return Do(),null;case 10:return og(e.type._context),null;case 22:case 23:return _g(),null;case 24:return null;default:return null}}var Gc=!1,Vt=!1,XA=typeof WeakSet=="function"?WeakSet:Set,Z=null;function po(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(t,e,r)}else n.current=null}function Dp(t,e,n){try{n()}catch(r){Je(t,e,r)}}var Ux=!1;function ZA(t,e){if(yp=Lu,t=A_(),eg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var w;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(w=f.firstChild)!==null;)m=f,f=w;for(;;){if(f===t)break t;if(m===n&&++d===s&&(l=a),m===i&&++h===r&&(c=a),(w=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=w}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xp={focusedElem:t,selectionRange:n},Lu=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,v=y.memoizedState,T=e.stateNode,x=T.getSnapshotBeforeUpdate(e.elementType===e.type?E:$n(e.type,E),v);T.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(R){Je(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return y=Ux,Ux=!1,y}function il(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dp(e,n,i)}s=s.next}while(s!==r)}}function Fd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Op(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function T1(t){var e=t.alternate;e!==null&&(t.alternate=null,T1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lr],delete e[Il],delete e[bp],delete e[OA],delete e[LA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function S1(t){return t.tag===5||t.tag===3||t.tag===4}function Bx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||S1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fu));else if(r!==4&&(t=t.child,t!==null))for(Lp(t,e,n),t=t.sibling;t!==null;)Lp(t,e,n),t=t.sibling}function Vp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Vp(t,e,n),t=t.sibling;t!==null;)Vp(t,e,n),t=t.sibling}var Tt=null,zn=!1;function ts(t,e,n){for(n=n.child;n!==null;)I1(t,e,n),n=n.sibling}function I1(t,e,n){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(Cd,n)}catch{}switch(n.tag){case 5:Vt||po(n,e);case 6:var r=Tt,s=zn;Tt=null,ts(t,e,n),Tt=r,zn=s,Tt!==null&&(zn?(t=Tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tt.removeChild(n.stateNode));break;case 18:Tt!==null&&(zn?(t=Tt,n=n.stateNode,t.nodeType===8?hf(t.parentNode,n):t.nodeType===1&&hf(t,n),_l(t)):hf(Tt,n.stateNode));break;case 4:r=Tt,s=zn,Tt=n.stateNode.containerInfo,zn=!0,ts(t,e,n),Tt=r,zn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Dp(n,e,a),s=s.next}while(s!==r)}ts(t,e,n);break;case 1:if(!Vt&&(po(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Je(n,e,l)}ts(t,e,n);break;case 21:ts(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,ts(t,e,n),Vt=r):ts(t,e,n);break;default:ts(t,e,n)}}function $x(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new XA),e.forEach(function(r){var s=l2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Bn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Tt=l.stateNode,zn=!1;break e;case 3:Tt=l.stateNode.containerInfo,zn=!0;break e;case 4:Tt=l.stateNode.containerInfo,zn=!0;break e}l=l.return}if(Tt===null)throw Error(H(160));I1(i,a,s),Tt=null,zn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Je(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)k1(e,t),e=e.sibling}function k1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bn(e,t),rr(t),r&4){try{il(3,t,t.return),Fd(3,t)}catch(E){Je(t,t.return,E)}try{il(5,t,t.return)}catch(E){Je(t,t.return,E)}}break;case 1:Bn(e,t),rr(t),r&512&&n!==null&&po(n,n.return);break;case 5:if(Bn(e,t),rr(t),r&512&&n!==null&&po(n,n.return),t.flags&32){var s=t.stateNode;try{xl(s,"")}catch(E){Je(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Jb(s,i),ap(l,a);var d=ap(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?t_(s,f):h==="dangerouslySetInnerHTML"?Zb(s,f):h==="children"?xl(s,f):Bm(s,h,f,d)}switch(l){case"input":np(s,i);break;case"textarea":Yb(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?yo(s,!!i.multiple,w,!1):m!==!!i.multiple&&(i.defaultValue!=null?yo(s,!!i.multiple,i.defaultValue,!0):yo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Il]=i}catch(E){Je(t,t.return,E)}}break;case 6:if(Bn(e,t),rr(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){Je(t,t.return,E)}}break;case 3:if(Bn(e,t),rr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_l(e.containerInfo)}catch(E){Je(t,t.return,E)}break;case 4:Bn(e,t),rr(t);break;case 13:Bn(e,t),rr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(wg=st())),r&4&&$x(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(d=Vt)||h,Bn(e,t),Vt=d):Bn(e,t),rr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(Z=t,h=t.child;h!==null;){for(f=Z=h;Z!==null;){switch(m=Z,w=m.child,m.tag){case 0:case 11:case 14:case 15:il(4,m,m.return);break;case 1:po(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(E){Je(r,n,E)}}break;case 5:po(m,m.return);break;case 22:if(m.memoizedState!==null){qx(f);continue}}w!==null?(w.return=m,Z=w):qx(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=e_("display",a))}catch(E){Je(t,t.return,E)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(E){Je(t,t.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Bn(e,t),rr(t),r&4&&$x(t);break;case 21:break;default:Bn(e,t),rr(t)}}function rr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(S1(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xl(s,""),r.flags&=-33);var i=Bx(t);Vp(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Bx(t);Lp(t,l,a);break;default:throw Error(H(161))}}catch(c){Je(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function e2(t,e,n){Z=t,A1(t)}function A1(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Gc;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Vt;l=Gc;var d=Vt;if(Gc=a,(Vt=c)&&!d)for(Z=s;Z!==null;)a=Z,c=a.child,a.tag===22&&a.memoizedState!==null?Hx(s):c!==null?(c.return=a,Z=c):Hx(s);for(;i!==null;)Z=i,A1(i),i=i.sibling;Z=s,Gc=l,Vt=d}zx(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):zx(t)}}function zx(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||Fd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ix(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ix(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&_l(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Vt||e.flags&512&&Op(e)}catch(m){Je(e,e.return,m)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function qx(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Hx(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fd(4,e)}catch(c){Je(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Je(e,s,c)}}var i=e.return;try{Op(e)}catch(c){Je(e,i,c)}break;case 5:var a=e.return;try{Op(e)}catch(c){Je(e,a,c)}}}catch(c){Je(e,e.return,c)}if(e===t){Z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Z=l;break}Z=e.return}}var t2=Math.ceil,Ju=Hr.ReactCurrentDispatcher,xg=Hr.ReactCurrentOwner,Dn=Hr.ReactCurrentBatchConfig,Se=0,Nt=null,lt=null,At=0,xn=0,mo=zs(0),gt=0,Pl=null,Ei=0,Ud=0,vg=0,ol=null,on=null,wg=0,Lo=1/0,Ir=null,Yu=!1,Mp=null,_s=null,Kc=!1,ps=null,Xu=0,al=0,Fp=null,pu=-1,mu=0;function Jt(){return Se&6?st():pu!==-1?pu:pu=st()}function Es(t){return t.mode&1?Se&2&&At!==0?At&-At:MA.transition!==null?(mu===0&&(mu=f_()),mu):(t=Re,t!==0||(t=window.event,t=t===void 0?16:w_(t.type)),t):1}function Qn(t,e,n,r){if(50<al)throw al=0,Fp=null,Error(H(185));Jl(t,n,r),(!(Se&2)||t!==Nt)&&(t===Nt&&(!(Se&2)&&(Ud|=n),gt===4&&os(t,At)),fn(t,r),n===1&&Se===0&&!(e.mode&1)&&(Lo=st()+500,Ld&&qs()))}function fn(t,e){var n=t.callbackNode;Mk(t,e);var r=Ou(t,t===Nt?At:0);if(r===0)n!==null&&ex(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ex(n),e===1)t.tag===0?VA(Wx.bind(null,t)):F_(Wx.bind(null,t)),PA(function(){!(Se&6)&&qs()}),n=null;else{switch(p_(r)){case 1:n=Wm;break;case 4:n=d_;break;case 16:n=Du;break;case 536870912:n=h_;break;default:n=Du}n=V1(n,j1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function j1(t,e){if(pu=-1,mu=0,Se&6)throw Error(H(327));var n=t.callbackNode;if(_o()&&t.callbackNode!==n)return null;var r=Ou(t,t===Nt?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zu(t,r);else{e=r;var s=Se;Se|=2;var i=R1();(Nt!==t||At!==e)&&(Ir=null,Lo=st()+500,pi(t,e));do try{s2();break}catch(l){C1(t,l)}while(!0);ig(),Ju.current=i,Se=s,lt!==null?e=0:(Nt=null,At=0,e=gt)}if(e!==0){if(e===2&&(s=hp(t),s!==0&&(r=s,e=Up(t,s))),e===1)throw n=Pl,pi(t,0),os(t,r),fn(t,st()),n;if(e===6)os(t,r);else{if(s=t.current.alternate,!(r&30)&&!n2(s)&&(e=Zu(t,r),e===2&&(i=hp(t),i!==0&&(r=i,e=Up(t,i))),e===1))throw n=Pl,pi(t,0),os(t,r),fn(t,st()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:ii(t,on,Ir);break;case 3:if(os(t,r),(r&130023424)===r&&(e=wg+500-st(),10<e)){if(Ou(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Jt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wp(ii.bind(null,t,on,Ir),e);break}ii(t,on,Ir);break;case 4:if(os(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Kn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*t2(r/1960))-r,10<r){t.timeoutHandle=wp(ii.bind(null,t,on,Ir),r);break}ii(t,on,Ir);break;case 5:ii(t,on,Ir);break;default:throw Error(H(329))}}}return fn(t,st()),t.callbackNode===n?j1.bind(null,t):null}function Up(t,e){var n=ol;return t.current.memoizedState.isDehydrated&&(pi(t,e).flags|=256),t=Zu(t,e),t!==2&&(e=on,on=n,e!==null&&Bp(e)),t}function Bp(t){on===null?on=t:on.push.apply(on,t)}function n2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Jn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function os(t,e){for(e&=~vg,e&=~Ud,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kn(e),r=1<<n;t[n]=-1,e&=~r}}function Wx(t){if(Se&6)throw Error(H(327));_o();var e=Ou(t,0);if(!(e&1))return fn(t,st()),null;var n=Zu(t,e);if(t.tag!==0&&n===2){var r=hp(t);r!==0&&(e=r,n=Up(t,r))}if(n===1)throw n=Pl,pi(t,0),os(t,e),fn(t,st()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ii(t,on,Ir),fn(t,st()),null}function bg(t,e){var n=Se;Se|=1;try{return t(e)}finally{Se=n,Se===0&&(Lo=st()+500,Ld&&qs())}}function Ni(t){ps!==null&&ps.tag===0&&!(Se&6)&&_o();var e=Se;Se|=1;var n=Dn.transition,r=Re;try{if(Dn.transition=null,Re=1,t)return t()}finally{Re=r,Dn.transition=n,Se=e,!(Se&6)&&qs()}}function _g(){xn=mo.current,Be(mo)}function pi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RA(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(ng(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Uu();break;case 3:Do(),Be(dn),Be(zt),dg();break;case 5:ug(r);break;case 4:Do();break;case 13:Be(qe);break;case 19:Be(qe);break;case 10:og(r.type._context);break;case 22:case 23:_g()}n=n.return}if(Nt=t,lt=t=Ns(t.current,null),At=xn=e,gt=0,Pl=null,vg=Ud=Ei=0,on=ol=null,li!==null){for(e=0;e<li.length;e++)if(n=li[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}li=null}return t}function C1(t,e){do{var n=lt;try{if(ig(),du.current=Qu,Ku){for(var r=He.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ku=!1}if(_i=0,Et=mt=He=null,sl=!1,jl=0,xg.current=null,n===null||n.return===null){gt=1,Pl=e,lt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=At,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=Px(a);if(w!==null){w.flags&=-257,Dx(w,a,l,i,e),w.mode&1&&Rx(i,d,e),e=w,c=d;var y=e.updateQueue;if(y===null){var E=new Set;E.add(c),e.updateQueue=E}else y.add(c);break e}else{if(!(e&1)){Rx(i,d,e),Eg();break e}c=Error(H(426))}}else if(ze&&l.mode&1){var v=Px(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Dx(v,a,l,i,e),rg(Oo(c,l));break e}}i=c=Oo(c,l),gt!==4&&(gt=2),ol===null?ol=[i]:ol.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=p1(i,c,e);Sx(i,T);break e;case 1:l=c;var x=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(_s===null||!_s.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=m1(i,l,e);Sx(i,R);break e}}i=i.return}while(i!==null)}D1(n)}catch(C){e=C,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function R1(){var t=Ju.current;return Ju.current=Qu,t===null?Qu:t}function Eg(){(gt===0||gt===3||gt===2)&&(gt=4),Nt===null||!(Ei&268435455)&&!(Ud&268435455)||os(Nt,At)}function Zu(t,e){var n=Se;Se|=2;var r=R1();(Nt!==t||At!==e)&&(Ir=null,pi(t,e));do try{r2();break}catch(s){C1(t,s)}while(!0);if(ig(),Se=n,Ju.current=r,lt!==null)throw Error(H(261));return Nt=null,At=0,gt}function r2(){for(;lt!==null;)P1(lt)}function s2(){for(;lt!==null&&!Ak();)P1(lt)}function P1(t){var e=L1(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?D1(t):lt=e,xg.current=null}function D1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=YA(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,lt=null;return}}else if(n=JA(n,e,xn),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);gt===0&&(gt=5)}function ii(t,e,n){var r=Re,s=Dn.transition;try{Dn.transition=null,Re=1,i2(t,e,n,r)}finally{Dn.transition=s,Re=r}return null}function i2(t,e,n,r){do _o();while(ps!==null);if(Se&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Fk(t,i),t===Nt&&(lt=Nt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kc||(Kc=!0,V1(Du,function(){return _o(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Dn.transition,Dn.transition=null;var a=Re;Re=1;var l=Se;Se|=4,xg.current=null,ZA(t,n),k1(n,t),TA(xp),Lu=!!yp,xp=yp=null,t.current=n,e2(n),jk(),Se=l,Re=a,Dn.transition=i}else t.current=n;if(Kc&&(Kc=!1,ps=t,Xu=s),i=t.pendingLanes,i===0&&(_s=null),Pk(n.stateNode),fn(t,st()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Yu)throw Yu=!1,t=Mp,Mp=null,t;return Xu&1&&t.tag!==0&&_o(),i=t.pendingLanes,i&1?t===Fp?al++:(al=0,Fp=t):al=0,qs(),null}function _o(){if(ps!==null){var t=p_(Xu),e=Dn.transition,n=Re;try{if(Dn.transition=null,Re=16>t?16:t,ps===null)var r=!1;else{if(t=ps,ps=null,Xu=0,Se&6)throw Error(H(331));var s=Se;for(Se|=4,Z=t.current;Z!==null;){var i=Z,a=i.child;if(Z.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Z=d;Z!==null;){var h=Z;switch(h.tag){case 0:case 11:case 15:il(8,h,i)}var f=h.child;if(f!==null)f.return=h,Z=f;else for(;Z!==null;){h=Z;var m=h.sibling,w=h.return;if(T1(h),h===d){Z=null;break}if(m!==null){m.return=w,Z=m;break}Z=w}}}var y=i.alternate;if(y!==null){var E=y.child;if(E!==null){y.child=null;do{var v=E.sibling;E.sibling=null,E=v}while(E!==null)}}Z=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Z=a;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:il(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,Z=T;break e}Z=i.return}}var x=t.current;for(Z=x;Z!==null;){a=Z;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,Z=N;else e:for(a=x;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Fd(9,l)}}catch(C){Je(l,l.return,C)}if(l===a){Z=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,Z=R;break e}Z=l.return}}if(Se=s,qs(),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(Cd,t)}catch{}r=!0}return r}finally{Re=n,Dn.transition=e}}return!1}function Gx(t,e,n){e=Oo(n,e),e=p1(t,e,1),t=bs(t,e,1),e=Jt(),t!==null&&(Jl(t,1,e),fn(t,e))}function Je(t,e,n){if(t.tag===3)Gx(t,t,n);else for(;e!==null;){if(e.tag===3){Gx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_s===null||!_s.has(r))){t=Oo(n,t),t=m1(e,t,1),e=bs(e,t,1),t=Jt(),e!==null&&(Jl(e,1,t),fn(e,t));break}}e=e.return}}function o2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,Nt===t&&(At&n)===n&&(gt===4||gt===3&&(At&130023424)===At&&500>st()-wg?pi(t,0):vg|=n),fn(t,e)}function O1(t,e){e===0&&(t.mode&1?(e=Mc,Mc<<=1,!(Mc&130023424)&&(Mc=4194304)):e=1);var n=Jt();t=Mr(t,e),t!==null&&(Jl(t,e,n),fn(t,n))}function a2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),O1(t,n)}function l2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),O1(t,n)}var L1;L1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dn.current)cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cn=!1,QA(t,e,n);cn=!!(t.flags&131072)}else cn=!1,ze&&e.flags&1048576&&U_(e,zu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fu(t,e),t=e.pendingProps;var s=Co(e,zt.current);bo(e,n),s=fg(null,e,r,t,s,n);var i=pg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(r)?(i=!0,Bu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lg(e),s.updater=Md,e.stateNode=s,s._reactInternals=e,Ip(e,r,t,n),e=jp(null,e,r,!0,i,n)):(e.tag=0,ze&&i&&tg(e),Kt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=u2(r),t=$n(r,t),s){case 0:e=Ap(null,e,r,t,n);break e;case 1:e=Vx(null,e,r,t,n);break e;case 11:e=Ox(null,e,r,t,n);break e;case 14:e=Lx(null,e,r,$n(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),Ap(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),Vx(t,e,r,s,n);case 3:e:{if(v1(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,W_(t,e),Wu(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Oo(Error(H(423)),e),e=Mx(t,e,r,n,s);break e}else if(r!==s){s=Oo(Error(H(424)),e),e=Mx(t,e,r,n,s);break e}else for(wn=ws(e.stateNode.containerInfo.firstChild),En=e,ze=!0,qn=null,n=q_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ro(),r===s){e=Fr(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return G_(e),t===null&&Np(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,vp(r,s)?a=null:i!==null&&vp(r,i)&&(e.flags|=32),x1(t,e),Kt(t,e,a,n),e.child;case 6:return t===null&&Np(e),null;case 13:return w1(t,e,n);case 4:return cg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Po(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),Ox(t,e,r,s,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ve(qu,r._currentValue),r._currentValue=a,i!==null)if(Jn(i.value,a)){if(i.children===s.children&&!dn.current){e=Fr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Pr(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Tp(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(H(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Tp(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Kt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,bo(e,n),s=Vn(s),r=r(s),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,s=$n(r,e.pendingProps),s=$n(r.type,s),Lx(t,e,r,s,n);case 15:return g1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),fu(t,e),e.tag=1,hn(r)?(t=!0,Bu(e)):t=!1,bo(e,n),f1(e,r,s),Ip(e,r,s,n),jp(null,e,r,!0,t,n);case 19:return b1(t,e,n);case 22:return y1(t,e,n)}throw Error(H(156,e.tag))};function V1(t,e){return u_(t,e)}function c2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,r){return new c2(t,e,n,r)}function Ng(t){return t=t.prototype,!(!t||!t.isReactComponent)}function u2(t){if(typeof t=="function")return Ng(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zm)return 11;if(t===qm)return 14}return 2}function Ns(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gu(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Ng(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case so:return mi(n.children,s,i,e);case $m:a=8,s|=8;break;case Yf:return t=Pn(12,n,e,s|2),t.elementType=Yf,t.lanes=i,t;case Xf:return t=Pn(13,n,e,s),t.elementType=Xf,t.lanes=i,t;case Zf:return t=Pn(19,n,e,s),t.elementType=Zf,t.lanes=i,t;case Gb:return Bd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Hb:a=10;break e;case Wb:a=9;break e;case zm:a=11;break e;case qm:a=14;break e;case rs:a=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Pn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function mi(t,e,n,r){return t=Pn(7,t,r,e),t.lanes=n,t}function Bd(t,e,n,r){return t=Pn(22,t,r,e),t.elementType=Gb,t.lanes=n,t.stateNode={isHidden:!1},t}function wf(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function bf(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function d2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ef(0),this.expirationTimes=ef(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ef(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Tg(t,e,n,r,s,i,a,l,c){return t=new d2(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lg(i),t}function h2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ro,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function M1(t){if(!t)return Cs;t=t._reactInternals;e:{if(Li(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(hn(n))return M_(t,n,e)}return e}function F1(t,e,n,r,s,i,a,l,c){return t=Tg(n,r,!0,t,s,i,a,l,c),t.context=M1(null),n=t.current,r=Jt(),s=Es(n),i=Pr(r,s),i.callback=e??null,bs(n,i,s),t.current.lanes=s,Jl(t,s,r),fn(t,r),t}function $d(t,e,n,r){var s=e.current,i=Jt(),a=Es(s);return n=M1(n),e.context===null?e.context=n:e.pendingContext=n,e=Pr(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=bs(s,e,a),t!==null&&(Qn(t,s,a,i),uu(t,s,a)),a}function ed(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Kx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sg(t,e){Kx(t,e),(t=t.alternate)&&Kx(t,e)}function f2(){return null}var U1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ig(t){this._internalRoot=t}zd.prototype.render=Ig.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));$d(t,e,null,null)};zd.prototype.unmount=Ig.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ni(function(){$d(null,t,null,null)}),e[Vr]=null}};function zd(t){this._internalRoot=t}zd.prototype.unstable_scheduleHydration=function(t){if(t){var e=y_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<is.length&&e!==0&&e<is[n].priority;n++);is.splice(n,0,t),n===0&&v_(t)}};function kg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qx(){}function p2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=ed(a);i.call(d)}}var a=F1(e,r,t,0,null,!1,!1,"",Qx);return t._reactRootContainer=a,t[Vr]=a.current,Tl(t.nodeType===8?t.parentNode:t),Ni(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=ed(c);l.call(d)}}var c=Tg(t,0,!1,null,null,!1,!1,"",Qx);return t._reactRootContainer=c,t[Vr]=c.current,Tl(t.nodeType===8?t.parentNode:t),Ni(function(){$d(e,c,n,r)}),c}function Hd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=ed(a);l.call(c)}}$d(e,a,t,s)}else a=p2(n,e,t,s,r);return ed(a)}m_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ha(e.pendingLanes);n!==0&&(Gm(e,n|1),fn(e,st()),!(Se&6)&&(Lo=st()+500,qs()))}break;case 13:Ni(function(){var r=Mr(t,1);if(r!==null){var s=Jt();Qn(r,t,1,s)}}),Sg(t,1)}};Km=function(t){if(t.tag===13){var e=Mr(t,134217728);if(e!==null){var n=Jt();Qn(e,t,134217728,n)}Sg(t,134217728)}};g_=function(t){if(t.tag===13){var e=Es(t),n=Mr(t,e);if(n!==null){var r=Jt();Qn(n,t,e,r)}Sg(t,e)}};y_=function(){return Re};x_=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};cp=function(t,e,n){switch(e){case"input":if(np(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Od(r);if(!s)throw Error(H(90));Qb(r),np(r,s)}}}break;case"textarea":Yb(t,n);break;case"select":e=n.value,e!=null&&yo(t,!!n.multiple,e,!1)}};s_=bg;i_=Ni;var m2={usingClientEntryPoint:!1,Events:[Xl,lo,Od,n_,r_,bg]},Ma={findFiberByHostInstance:ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g2={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=l_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||f2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{Cd=Qc.inject(g2),ur=Qc}catch{}}In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m2;In.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kg(e))throw Error(H(200));return h2(t,e,null,n)};In.createRoot=function(t,e){if(!kg(t))throw Error(H(299));var n=!1,r="",s=U1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Tg(t,1,!1,null,null,n,!1,r,s),t[Vr]=e.current,Tl(t.nodeType===8?t.parentNode:t),new Ig(e)};In.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=l_(e),t=t===null?null:t.stateNode,t};In.flushSync=function(t){return Ni(t)};In.hydrate=function(t,e,n){if(!qd(e))throw Error(H(200));return Hd(null,t,e,!0,n)};In.hydrateRoot=function(t,e,n){if(!kg(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=U1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=F1(e,null,t,1,n??null,s,!1,i,a),t[Vr]=e.current,Tl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new zd(e)};In.render=function(t,e,n){if(!qd(e))throw Error(H(200));return Hd(null,t,e,!1,n)};In.unmountComponentAtNode=function(t){if(!qd(t))throw Error(H(40));return t._reactRootContainer?(Ni(function(){Hd(null,null,t,!1,function(){t._reactRootContainer=null,t[Vr]=null})}),!0):!1};In.unstable_batchedUpdates=bg;In.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!qd(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Hd(t,e,n,!1,r)};In.version="18.3.1-next-f1338f8080-20240426";function B1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B1)}catch(t){console.error(t)}}B1(),Bb.exports=In;var y2=Bb.exports,Jx=y2;Qf.createRoot=Jx.createRoot,Qf.hydrateRoot=Jx.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dl(){return Dl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dl.apply(this,arguments)}var ms;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ms||(ms={}));const Yx="popstate";function x2(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:l}=r.location;return $p("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:td(s)}return w2(e,n,null,t)}function We(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function v2(){return Math.random().toString(36).substr(2,8)}function Xx(t,e){return{usr:t.state,key:t.key,idx:e}}function $p(t,e,n,r){return n===void 0&&(n=null),Dl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xo(e):e,{state:n,key:e&&e.key||r||v2()})}function td(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function w2(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=ms.Pop,c=null,d=h();d==null&&(d=0,a.replaceState(Dl({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){l=ms.Pop;let v=h(),T=v==null?null:v-d;d=v,c&&c({action:l,location:E.location,delta:T})}function m(v,T){l=ms.Push;let x=$p(E.location,v,T);d=h()+1;let N=Xx(x,d),R=E.createHref(x);try{a.pushState(N,"",R)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(R)}i&&c&&c({action:l,location:E.location,delta:1})}function w(v,T){l=ms.Replace;let x=$p(E.location,v,T);d=h();let N=Xx(x,d),R=E.createHref(x);a.replaceState(N,"",R),i&&c&&c({action:l,location:E.location,delta:0})}function y(v){let T=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof v=="string"?v:td(v);return x=x.replace(/ $/,"%20"),We(T,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,T)}let E={get action(){return l},get location(){return t(s,a)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Yx,f),c=v,()=>{s.removeEventListener(Yx,f),c=null}},createHref(v){return e(s,v)},createURL:y,encodeLocation(v){let T=y(v);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:m,replace:w,go(v){return a.go(v)}};return E}var Zx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Zx||(Zx={}));function b2(t,e,n){return n===void 0&&(n="/"),_2(t,e,n)}function _2(t,e,n,r){let s=typeof e=="string"?Xo(e):e,i=Vo(s.pathname||"/",n);if(i==null)return null;let a=z1(t);E2(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=D2(i);l=R2(a[c],d)}return l}function z1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(We(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Ts([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(We(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),z1(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:j2(d,i.index),routesMeta:h})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of q1(i.path))s(i,a,c)}),e}function q1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=q1(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function E2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:C2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const N2=/^:[\w-]+$/,T2=3,S2=2,I2=1,k2=10,A2=-2,ev=t=>t==="*";function j2(t,e){let n=t.split("/"),r=n.length;return n.some(ev)&&(r+=A2),e&&(r+=S2),n.filter(s=>!ev(s)).reduce((s,i)=>s+(N2.test(i)?T2:i===""?I2:k2),r)}function C2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function R2(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=zp({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Ts([i,f.pathname]),pathnameBase:M2(Ts([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Ts([i,f.pathnameBase]))}return a}function zp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=P2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,f)=>{let{paramName:m,isOptional:w}=h;if(m==="*"){let E=l[f]||"";a=i.slice(0,i.length-E.length).replace(/(.)\/+$/,"$1")}const y=l[f];return w&&!y?d[m]=void 0:d[m]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function P2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function D2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Vo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function O2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Xo(t):t;return{pathname:n?n.startsWith("/")?n:L2(n,e):e,search:F2(r),hash:U2(s)}}function L2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function _f(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function V2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ag(t,e){let n=V2(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function jg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Xo(t):(s=Dl({},t),We(!s.pathname||!s.pathname.includes("?"),_f("?","pathname","search",s)),We(!s.pathname||!s.pathname.includes("#"),_f("#","pathname","hash",s)),We(!s.search||!s.search.includes("#"),_f("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=O2(s,l),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Ts=t=>t.join("/").replace(/\/\/+/g,"/"),M2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),F2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,U2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function B2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const H1=["post","put","patch","delete"];new Set(H1);const $2=["get",...H1];new Set($2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ol(){return Ol=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ol.apply(this,arguments)}const Wd=O.createContext(null),W1=O.createContext(null),Wr=O.createContext(null),Gd=O.createContext(null),wr=O.createContext({outlet:null,matches:[],isDataRoute:!1}),G1=O.createContext(null);function z2(t,e){let{relative:n}=e===void 0?{}:e;Zo()||We(!1);let{basename:r,navigator:s}=O.useContext(Wr),{hash:i,pathname:a,search:l}=Kd(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Ts([r,a])),s.createHref({pathname:c,search:l,hash:i})}function Zo(){return O.useContext(Gd)!=null}function ea(){return Zo()||We(!1),O.useContext(Gd).location}function K1(t){O.useContext(Wr).static||O.useLayoutEffect(t)}function gn(){let{isDataRoute:t}=O.useContext(wr);return t?sj():q2()}function q2(){Zo()||We(!1);let t=O.useContext(Wd),{basename:e,future:n,navigator:r}=O.useContext(Wr),{matches:s}=O.useContext(wr),{pathname:i}=ea(),a=JSON.stringify(Ag(s,n.v7_relativeSplatPath)),l=O.useRef(!1);return K1(()=>{l.current=!0}),O.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=jg(d,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ts([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,a,i,t])}const H2=O.createContext(null);function W2(t){let e=O.useContext(wr).outlet;return e&&O.createElement(H2.Provider,{value:t},e)}function Hs(){let{matches:t}=O.useContext(wr),e=t[t.length-1];return e?e.params:{}}function Kd(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(Wr),{matches:s}=O.useContext(wr),{pathname:i}=ea(),a=JSON.stringify(Ag(s,r.v7_relativeSplatPath));return O.useMemo(()=>jg(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function G2(t,e){return K2(t,e)}function K2(t,e,n,r){Zo()||We(!1);let{navigator:s}=O.useContext(Wr),{matches:i}=O.useContext(wr),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=ea(),h;if(e){var f;let v=typeof e=="string"?Xo(e):e;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||We(!1),h=v}else h=d;let m=h.pathname||"/",w=m;if(c!=="/"){let v=c.replace(/^\//,"").split("/");w="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=b2(t,{pathname:w}),E=Z2(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Ts([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Ts([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&E?O.createElement(Gd.Provider,{value:{location:Ol({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ms.Pop}},E):E}function Q2(){let t=rj(),e=B2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,null)}const J2=O.createElement(Q2,null);class Y2 extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(wr.Provider,{value:this.props.routeContext},O.createElement(G1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function X2(t){let{routeContext:e,match:n,children:r}=t,s=O.useContext(Wd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(wr.Provider,{value:e},r)}function Z2(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||We(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:m,errors:w}=n,y=f.route.loader&&m[f.route.id]===void 0&&(!w||w[f.route.id]===void 0);if(f.route.lazy||y){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,m)=>{let w,y=!1,E=null,v=null;n&&(w=l&&f.route.id?l[f.route.id]:void 0,E=f.route.errorElement||J2,c&&(d<0&&m===0?(ij("route-fallback"),y=!0,v=null):d===m&&(y=!0,v=f.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,m+1)),x=()=>{let N;return w?N=E:y?N=v:f.route.Component?N=O.createElement(f.route.Component,null):f.route.element?N=f.route.element:N=h,O.createElement(X2,{match:f,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:N})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?O.createElement(Y2,{location:n.location,revalidation:n.revalidation,component:E,error:w,children:x(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):x()},null)}var Q1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Q1||{}),J1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(J1||{});function ej(t){let e=O.useContext(Wd);return e||We(!1),e}function tj(t){let e=O.useContext(W1);return e||We(!1),e}function nj(t){let e=O.useContext(wr);return e||We(!1),e}function Y1(t){let e=nj(),n=e.matches[e.matches.length-1];return n.route.id||We(!1),n.route.id}function rj(){var t;let e=O.useContext(G1),n=tj(),r=Y1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function sj(){let{router:t}=ej(Q1.UseNavigateStable),e=Y1(J1.UseNavigateStable),n=O.useRef(!1);return K1(()=>{n.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ol({fromRouteId:e},i)))},[t,e])}const tv={};function ij(t,e,n){tv[t]||(tv[t]=!0)}function oj(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ti(t){let{to:e,replace:n,state:r,relative:s}=t;Zo()||We(!1);let{future:i,static:a}=O.useContext(Wr),{matches:l}=O.useContext(wr),{pathname:c}=ea(),d=gn(),h=jg(e,Ag(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return O.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:s}),[d,f,s,n,r]),null}function aj(t){return W2(t.context)}function ve(t){We(!1)}function lj(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ms.Pop,navigator:i,static:a=!1,future:l}=t;Zo()&&We(!1);let c=e.replace(/^\/*/,"/"),d=O.useMemo(()=>({basename:c,navigator:i,static:a,future:Ol({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=Xo(r));let{pathname:h="/",search:f="",hash:m="",state:w=null,key:y="default"}=r,E=O.useMemo(()=>{let v=Vo(h,c);return v==null?null:{location:{pathname:v,search:f,hash:m,state:w,key:y},navigationType:s}},[c,h,f,m,w,y,s]);return E==null?null:O.createElement(Wr.Provider,{value:d},O.createElement(Gd.Provider,{children:n,value:E}))}function Qd(t){let{children:e,location:n}=t;return G2(qp(e),n)}new Promise(()=>{});function qp(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,qp(r.props.children,i));return}r.type!==ve&&We(!1),!r.props.index||!r.props.children||We(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=qp(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nd(){return nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nd.apply(this,arguments)}function X1(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function cj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uj(t,e){return t.button===0&&(!e||e==="_self")&&!cj(t)}const dj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hj=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],fj="6";try{window.__reactRouterVersion=fj}catch{}const pj=O.createContext({isTransitioning:!1}),mj="startTransition",nv=ok[mj];function gj(t){let{basename:e,children:n,future:r,window:s}=t,i=O.useRef();i.current==null&&(i.current=x2({window:s,v5Compat:!0}));let a=i.current,[l,c]=O.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},h=O.useCallback(f=>{d&&nv?nv(()=>c(f)):c(f)},[c,d]);return O.useLayoutEffect(()=>a.listen(h),[a,h]),O.useEffect(()=>oj(r),[r]),O.createElement(lj,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const yj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y=O.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,m=X1(e,dj),{basename:w}=O.useContext(Wr),y,E=!1;if(typeof d=="string"&&xj.test(d)&&(y=d,yj))try{let N=new URL(window.location.href),R=d.startsWith("//")?new URL(N.protocol+d):new URL(d),C=Vo(R.pathname,w);R.origin===N.origin&&C!=null?d=C+R.search+R.hash:E=!0}catch{}let v=z2(d,{relative:s}),T=wj(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function x(N){r&&r(N),N.defaultPrevented||T(N)}return O.createElement("a",nd({},m,{href:y||v,onClick:E||i?r:x,ref:n,target:c}))}),Z1=O.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:h}=e,f=X1(e,hj),m=Kd(c,{relative:f.relative}),w=ea(),y=O.useContext(W1),{navigator:E,basename:v}=O.useContext(Wr),T=y!=null&&bj(m)&&d===!0,x=E.encodeLocation?E.encodeLocation(m).pathname:m.pathname,N=w.pathname,R=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;s||(N=N.toLowerCase(),R=R?R.toLowerCase():null,x=x.toLowerCase()),R&&v&&(R=Vo(R,v)||R);const C=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let L=N===x||!a&&N.startsWith(x)&&N.charAt(C)==="/",b=R!=null&&(R===x||!a&&R.startsWith(x)&&R.charAt(x.length)==="/"),_={isActive:L,isPending:b,isTransitioning:T},A=L?r:void 0,j;typeof i=="function"?j=i(_):j=[i,L?"active":null,b?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let I=typeof l=="function"?l(_):l;return O.createElement(Y,nd({},f,{"aria-current":A,className:j,ref:n,style:I,to:c,viewTransition:d}),typeof h=="function"?h(_):h)});var Hp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Hp||(Hp={}));var rv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rv||(rv={}));function vj(t){let e=O.useContext(Wd);return e||We(!1),e}function wj(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=gn(),d=ea(),h=Kd(t,{relative:a});return O.useCallback(f=>{if(uj(f,n)){f.preventDefault();let m=r!==void 0?r:td(d)===td(h);c(t,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,h,r,s,n,t,i,a,l])}function bj(t,e){e===void 0&&(e={});let n=O.useContext(pj);n==null&&We(!1);let{basename:r}=vj(Hp.useViewTransitionState),s=Kd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Vo(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Vo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return zp(s.pathname,a)!=null||zp(s.pathname,i)!=null}const _j={},sv=t=>{let e;const n=new Set,r=(h,f)=>{const m=typeof h=="function"?h(e):h;if(!Object.is(m,e)){const w=e;e=f??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(y=>y(e,w))}},s=()=>e,c={setState:r,getState:s,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(_j?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(r,s,c);return c},Ej=t=>t?sv(t):sv;var eE={exports:{}},tE={},nE={exports:{}},rE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mo=O;function Nj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tj=typeof Object.is=="function"?Object.is:Nj,Sj=Mo.useState,Ij=Mo.useEffect,kj=Mo.useLayoutEffect,Aj=Mo.useDebugValue;function jj(t,e){var n=e(),r=Sj({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return kj(function(){s.value=n,s.getSnapshot=e,Ef(s)&&i({inst:s})},[t,n,e]),Ij(function(){return Ef(s)&&i({inst:s}),t(function(){Ef(s)&&i({inst:s})})},[t]),Aj(n),n}function Ef(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tj(t,n)}catch{return!0}}function Cj(t,e){return e()}var Rj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Cj:jj;rE.useSyncExternalStore=Mo.useSyncExternalStore!==void 0?Mo.useSyncExternalStore:Rj;nE.exports=rE;var Pj=nE.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jd=O,Dj=Pj;function Oj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lj=typeof Object.is=="function"?Object.is:Oj,Vj=Dj.useSyncExternalStore,Mj=Jd.useRef,Fj=Jd.useEffect,Uj=Jd.useMemo,Bj=Jd.useDebugValue;tE.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Mj(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=Uj(function(){function c(w){if(!d){if(d=!0,h=w,w=r(w),s!==void 0&&a.hasValue){var y=a.value;if(s(y,w))return f=y}return f=w}if(y=f,Lj(h,w))return y;var E=r(w);return s!==void 0&&s(y,E)?(h=w,y):(h=w,f=E)}var d=!1,h,f,m=n===void 0?null:n;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,n,r,s]);var l=Vj(t,i[0],i[1]);return Fj(function(){a.hasValue=!0,a.value=l},[l]),Bj(l),l};eE.exports=tE;var $j=eE.exports;const zj=Dm($j),sE={},{useDebugValue:qj}=Lt,{useSyncExternalStoreWithSelector:Hj}=zj;let iv=!1;const Wj=t=>t;function Gj(t,e=Wj,n){(sE?"production":void 0)!=="production"&&n&&!iv&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),iv=!0);const r=Hj(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return qj(r),r}const ov=t=>{(sE?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Ej(t):t,n=(r,s)=>Gj(e,r,s);return Object.assign(n,e),n},Kj=t=>t?ov(t):ov,Qj={};function Jj(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const a=c=>c===null?null:JSON.parse(c,void 0),l=(i=n.getItem(s))!=null?i:null;return l instanceof Promise?l.then(a):a(l)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Ll=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Ll(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ll(r)(n)}}}},Yj=(t,e)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v=>v,version:0,merge:(v,T)=>({...T,...v}),...e},a=!1;const l=new Set,c=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},r,s);const h=Ll(i.serialize),f=()=>{const v=i.partialize({...r()});let T;const x=h({state:v,version:i.version}).then(N=>d.setItem(i.name,N)).catch(N=>{T=N});if(T)throw T;return x},m=s.setState;s.setState=(v,T)=>{m(v,T),f()};const w=t((...v)=>{n(...v),f()},r,s);let y;const E=()=>{var v;if(!d)return;a=!1,l.forEach(x=>x(r()));const T=((v=i.onRehydrateStorage)==null?void 0:v.call(i,r()))||void 0;return Ll(d.getItem.bind(d))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var N;return y=i.merge(x,(N=r())!=null?N:w),n(y,!0),f()}).then(()=>{T==null||T(y,void 0),a=!0,c.forEach(x=>x(y))}).catch(x=>{T==null||T(void 0,x)})};return s.persist={setOptions:v=>{i={...i,...v},v.getStorage&&(d=v.getStorage())},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>E(),hasHydrated:()=>a,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(c.add(v),()=>{c.delete(v)})},E(),y||w},Xj=(t,e)=>(n,r,s)=>{let i={storage:Jj(()=>localStorage),partialize:E=>E,version:0,merge:(E,v)=>({...v,...E}),...e},a=!1;const l=new Set,c=new Set;let d=i.storage;if(!d)return t((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...E)},r,s);const h=()=>{const E=i.partialize({...r()});return d.setItem(i.name,{state:E,version:i.version})},f=s.setState;s.setState=(E,v)=>{f(E,v),h()};const m=t((...E)=>{n(...E),h()},r,s);s.getInitialState=()=>m;let w;const y=()=>{var E,v;if(!d)return;a=!1,l.forEach(x=>{var N;return x((N=r())!=null?N:m)});const T=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(E=r())!=null?E:m))||void 0;return Ll(d.getItem.bind(d))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return[!0,i.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var N;const[R,C]=x;if(w=i.merge(C,(N=r())!=null?N:m),n(w,!0),R)return h()}).then(()=>{T==null||T(w,void 0),w=r(),a=!0,c.forEach(x=>x(w))}).catch(x=>{T==null||T(void 0,x)})};return s.persist={setOptions:E=>{i={...i,...E},E.storage&&(d=E.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>a,onHydrate:E=>(l.add(E),()=>{l.delete(E)}),onFinishHydration:E=>(c.add(E),()=>{c.delete(E)})},i.skipHydration||y(),w||m},Zj=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Qj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Yj(t,e)):Xj(t,e),eC=Zj,tC=()=>{};var av={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},nC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},oE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,w=d&63;c||(w=64,a||(m=64)),r.push(n[h],n[f],n[m],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||f==null)throw new rC;const m=i<<2|l>>4;if(r.push(m),d!==64){const w=l<<4&240|d>>2;if(r.push(w),f!==64){const y=d<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sC=function(t){const e=iE(t);return oE.encodeByteArray(e,!0)},rd=function(t){return sC(t).replace(/\./g,"")},aE=function(t){try{return oE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=()=>iC().__FIREBASE_DEFAULTS__,aC=()=>{if(typeof process>"u"||typeof av>"u")return;const t=av.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&aE(t[1]);return e&&JSON.parse(e)},Yd=()=>{try{return tC()||oC()||aC()||lC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lE=t=>{var e,n;return(n=(e=Yd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},cE=t=>{const e=lE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},uE=()=>{var t;return(t=Yd())==null?void 0:t.config},dE=t=>{var e;return(e=Yd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xd(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[rd(JSON.stringify(n)),rd(JSON.stringify(a)),""].join(".")}const ll={};function dC(){const t={prod:[],emulator:[]};for(const e of Object.keys(ll))ll[e]?t.emulator.push(e):t.prod.push(e);return t}function hC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let lv=!1;function Cg(t,e){if(typeof window>"u"||typeof document>"u"||!br(window.location.host)||ll[t]===e||ll[t]||lv)return;ll[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=dC().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,w){m.setAttribute("width","24"),m.setAttribute("id",w),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{lv=!0,a()},m}function h(m,w){m.setAttribute("id",w),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=hC(r),w=n("text"),y=document.getElementById(w)||document.createElement("span"),E=n("learnmore"),v=document.getElementById(E)||document.createElement("a"),T=n("preprendIcon"),x=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const N=m.element;l(N),h(v,E);const R=d();c(x,T),N.append(x,y,v,R),document.body.appendChild(N)}i?(y.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function pC(){var e;const t=(e=Yd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yC(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xC(){return!pC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fE(){try{return typeof indexedDB=="object"}catch{return!1}}function pE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function vC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="FirebaseError";class An extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wC,Object.setPrototypeOf(this,An.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vi.prototype.create)}}class Vi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?bC(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new An(s,l,r)}}function bC(t,e){return t.replace(_C,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const _C=/\{\$([^}]+)}/g;function EC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Rs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(cv(i)&&cv(a)){if(!Rs(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function cv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ga(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ka(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function NC(t,e){const n=new TC(t,e);return n.subscribe.bind(n)}class TC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Nf),s.error===void 0&&(s.error=Nf),s.complete===void 0&&(s.complete=Nf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=1e3,kC=2,AC=4*60*60*1e3,jC=.5;function uv(t,e=IC,n=kC){const r=e*Math.pow(n,t),s=Math.round(jC*r*(Math.random()-.5)*2);return Math.min(AC,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t){return t&&t._delegate?t._delegate:t}class Sn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PC(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RC(t){return t===oi?void 0:t}function PC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const OC={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},LC=be.INFO,VC={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},MC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=VC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zd{constructor(e){this.name=e,this._logLevel=LC,this._logHandler=MC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const FC=(t,e)=>e.some(n=>t instanceof n);let dv,hv;function UC(){return dv||(dv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BC(){return hv||(hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mE=new WeakMap,Wp=new WeakMap,gE=new WeakMap,Tf=new WeakMap,Rg=new WeakMap;function $C(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Ss(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&mE.set(n,t)}).catch(()=>{}),Rg.set(e,t),e}function zC(t){if(Wp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Wp.set(t,e)}let Gp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ss(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qC(t){Gp=t(Gp)}function HC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Sf(this),e,...n);return gE.set(r,e.sort?e.sort():[e]),Ss(r)}:BC().includes(t)?function(...e){return t.apply(Sf(this),e),Ss(mE.get(this))}:function(...e){return Ss(t.apply(Sf(this),e))}}function WC(t){return typeof t=="function"?HC(t):(t instanceof IDBTransaction&&zC(t),FC(t,UC())?new Proxy(t,Gp):t)}function Ss(t){if(t instanceof IDBRequest)return $C(t);if(Tf.has(t))return Tf.get(t);const e=WC(t);return e!==t&&(Tf.set(t,e),Rg.set(e,t)),e}const Sf=t=>Rg.get(t);function yE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Ss(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Ss(a.result),c.oldVersion,c.newVersion,Ss(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const GC=["get","getKey","getAll","getAllKeys","count"],KC=["put","add","delete","clear"],If=new Map;function fv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(If.get(e))return If.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=KC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||GC.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return If.set(e,i),i}qC(t=>({...t,get:(e,n,r)=>fv(e,n)||t.get(e,n,r),has:(e,n)=>!!fv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function JC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kp="@firebase/app",pv="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new Zd("@firebase/app"),YC="@firebase/app-compat",XC="@firebase/analytics-compat",ZC="@firebase/analytics",eR="@firebase/app-check-compat",tR="@firebase/app-check",nR="@firebase/auth",rR="@firebase/auth-compat",sR="@firebase/database",iR="@firebase/data-connect",oR="@firebase/database-compat",aR="@firebase/functions",lR="@firebase/functions-compat",cR="@firebase/installations",uR="@firebase/installations-compat",dR="@firebase/messaging",hR="@firebase/messaging-compat",fR="@firebase/performance",pR="@firebase/performance-compat",mR="@firebase/remote-config",gR="@firebase/remote-config-compat",yR="@firebase/storage",xR="@firebase/storage-compat",vR="@firebase/firestore",wR="@firebase/ai",bR="@firebase/firestore-compat",_R="firebase",ER="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="[DEFAULT]",NR={[Kp]:"fire-core",[YC]:"fire-core-compat",[ZC]:"fire-analytics",[XC]:"fire-analytics-compat",[tR]:"fire-app-check",[eR]:"fire-app-check-compat",[nR]:"fire-auth",[rR]:"fire-auth-compat",[sR]:"fire-rtdb",[iR]:"fire-data-connect",[oR]:"fire-rtdb-compat",[aR]:"fire-fn",[lR]:"fire-fn-compat",[cR]:"fire-iid",[uR]:"fire-iid-compat",[dR]:"fire-fcm",[hR]:"fire-fcm-compat",[fR]:"fire-perf",[pR]:"fire-perf-compat",[mR]:"fire-rc",[gR]:"fire-rc-compat",[yR]:"fire-gcs",[xR]:"fire-gcs-compat",[vR]:"fire-fst",[bR]:"fire-fst-compat",[wR]:"fire-vertex","fire-js":"fire-js",[_R]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=new Map,TR=new Map,Jp=new Map;function mv(t,e){try{t.container.addComponent(e)}catch(n){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fn(t){const e=t.name;if(Jp.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;Jp.set(e,t);for(const n of sd.values())mv(n,t);for(const n of TR.values())mv(n,t);return!0}function Gr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function an(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Is=new Vi("app","Firebase",SR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=ER;function xE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Qp,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Is.create("bad-app-name",{appName:String(s)});if(n||(n=uE()),!n)throw Is.create("no-options");const i=sd.get(s);if(i){if(Rs(n,i.options)&&Rs(r,i.config))return i;throw Is.create("duplicate-app",{appName:s})}const a=new DC(s);for(const c of Jp.values())a.addComponent(c);const l=new IR(n,r,a);return sd.set(s,l),l}function eh(t=Qp){const e=sd.get(t);if(!e&&t===Qp&&uE())return xE();if(!e)throw Is.create("no-app",{appName:t});return e}function Ut(t,e,n){let r=NR[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(a.join(" "));return}Fn(new Sn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR="firebase-heartbeat-database",AR=1,Vl="firebase-heartbeat-store";let kf=null;function vE(){return kf||(kf=yE(kR,AR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Vl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Is.create("idb-open",{originalErrorMessage:t.message})})),kf}async function jR(t){try{const n=(await vE()).transaction(Vl),r=await n.objectStore(Vl).get(wE(t));return await n.done,r}catch(e){if(e instanceof An)Ur.warn(e.message);else{const n=Is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(n.message)}}}async function gv(t,e){try{const r=(await vE()).transaction(Vl,"readwrite");await r.objectStore(Vl).put(e,wE(t)),await r.done}catch(n){if(n instanceof An)Ur.warn(n.message);else{const r=Is.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ur.warn(r.message)}}}function wE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=1024,RR=30;class PR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new OR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=yv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>RR){const a=LR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=yv(),{heartbeatsToSend:r,unsentEntries:s}=DR(this._heartbeatsCache.heartbeats),i=rd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ur.warn(n),""}}}function yv(){return new Date().toISOString().substring(0,10)}function DR(t,e=CR){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),xv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),xv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class OR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fE()?pE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function xv(t){return rd(JSON.stringify({version:2,heartbeats:t})).length}function LR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){Fn(new Sn("platform-logger",e=>new QC(e),"PRIVATE")),Fn(new Sn("heartbeat",e=>new PR(e),"PRIVATE")),Ut(Kp,pv,t),Ut(Kp,pv,"esm2020"),Ut("fire-js","")}VR("");var MR="firebase",FR="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ut(MR,FR,"app");const bE="@firebase/installations",Pg="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=1e4,EE=`w:${Pg}`,NE="FIS_v2",UR="https://firebaseinstallations.googleapis.com/v1",BR=60*60*1e3,$R="installations",zR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Si=new Vi($R,zR,qR);function TE(t){return t instanceof An&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE({projectId:t}){return`${UR}/projects/${t}/installations`}function IE(t){return{token:t.token,requestStatus:2,expiresIn:WR(t.expiresIn),creationTime:Date.now()}}async function kE(t,e){const r=(await e.json()).error;return Si.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function AE({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function HR(t,{refreshToken:e}){const n=AE(t);return n.append("Authorization",GR(e)),n}async function jE(t){const e=await t();return e.status>=500&&e.status<600?t():e}function WR(t){return Number(t.replace("s","000"))}function GR(t){return`${NE} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=SE(t),s=AE(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:NE,appId:t.appId,sdkVersion:EE},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await jE(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:IE(d.authToken)}}else throw await kE("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=/^[cdef][\w-]{21}$/,Yp="";function YR(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=XR(t);return JR.test(n)?n:Yp}catch{return Yp}}function XR(t){return QR(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=new Map;function PE(t,e){const n=th(t);DE(n,e),ZR(n,e)}function DE(t,e){const n=RE.get(t);if(n)for(const r of n)r(e)}function ZR(t,e){const n=e4();n&&n.postMessage({key:t,fid:e}),t4()}let ui=null;function e4(){return!ui&&"BroadcastChannel"in self&&(ui=new BroadcastChannel("[Firebase] FID Change"),ui.onmessage=t=>{DE(t.data.key,t.data.fid)}),ui}function t4(){RE.size===0&&ui&&(ui.close(),ui=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="firebase-installations-database",r4=1,Ii="firebase-installations-store";let Af=null;function Dg(){return Af||(Af=yE(n4,r4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ii)}}})),Af}async function id(t,e){const n=th(t),s=(await Dg()).transaction(Ii,"readwrite"),i=s.objectStore(Ii),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&PE(t,e.fid),e}async function OE(t){const e=th(t),r=(await Dg()).transaction(Ii,"readwrite");await r.objectStore(Ii).delete(e),await r.done}async function nh(t,e){const n=th(t),s=(await Dg()).transaction(Ii,"readwrite"),i=s.objectStore(Ii),a=await i.get(n),l=e(a);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!a||a.fid!==l.fid)&&PE(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Og(t){let e;const n=await nh(t.appConfig,r=>{const s=s4(r),i=i4(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Yp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function s4(t){const e=t||{fid:YR(),registrationStatus:0};return LE(e)}function i4(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Si.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=o4(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:a4(t)}:{installationEntry:e}}async function o4(t,e){try{const n=await KR(t,e);return id(t.appConfig,n)}catch(n){throw TE(n)&&n.customData.serverCode===409?await OE(t.appConfig):await id(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function a4(t){let e=await vv(t.appConfig);for(;e.registrationStatus===1;)await CE(100),e=await vv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Og(t);return r||n}return e}function vv(t){return nh(t,e=>{if(!e)throw Si.create("installation-not-found");return LE(e)})}function LE(t){return l4(t)?{fid:t.fid,registrationStatus:0}:t}function l4(t){return t.registrationStatus===1&&t.registrationTime+_E<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4({appConfig:t,heartbeatServiceProvider:e},n){const r=u4(t,n),s=HR(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:EE,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await jE(()=>fetch(r,l));if(c.ok){const d=await c.json();return IE(d)}else throw await kE("Generate Auth Token",c)}function u4(t,{fid:e}){return`${SE(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lg(t,e=!1){let n;const r=await nh(t.appConfig,i=>{if(!VE(i))throw Si.create("not-registered");const a=i.authToken;if(!e&&f4(a))return i;if(a.requestStatus===1)return n=d4(t,e),i;{if(!navigator.onLine)throw Si.create("app-offline");const l=m4(i);return n=h4(t,l),l}});return n?await n:r.authToken}async function d4(t,e){let n=await wv(t.appConfig);for(;n.authToken.requestStatus===1;)await CE(100),n=await wv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Lg(t,e):r}function wv(t){return nh(t,e=>{if(!VE(e))throw Si.create("not-registered");const n=e.authToken;return g4(n)?{...e,authToken:{requestStatus:0}}:e})}async function h4(t,e){try{const n=await c4(t,e),r={...e,authToken:n};return await id(t.appConfig,r),n}catch(n){if(TE(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await OE(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await id(t.appConfig,r)}throw n}}function VE(t){return t!==void 0&&t.registrationStatus===2}function f4(t){return t.requestStatus===2&&!p4(t)}function p4(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+BR}function m4(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function g4(t){return t.requestStatus===1&&t.requestTime+_E<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y4(t){const e=t,{installationEntry:n,registrationPromise:r}=await Og(e);return r?r.catch(console.error):Lg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4(t,e=!1){const n=t;return await v4(n),(await Lg(n,e)).token}async function v4(t){const{registrationPromise:e}=await Og(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t){if(!t||!t.options)throw jf("App Configuration");if(!t.name)throw jf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw jf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function jf(t){return Si.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="installations",b4="installations-internal",_4=t=>{const e=t.getProvider("app").getImmediate(),n=w4(e),r=Gr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},E4=t=>{const e=t.getProvider("app").getImmediate(),n=Gr(e,ME).getImmediate();return{getId:()=>y4(n),getToken:s=>x4(n,s)}};function N4(){Fn(new Sn(ME,_4,"PUBLIC")),Fn(new Sn(b4,E4,"PRIVATE"))}N4();Ut(bE,Pg);Ut(bE,Pg,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od="analytics",T4="firebase_id",S4="origin",I4=60*1e3,k4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt=new Zd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Nn=new Vi("analytics","Analytics",A4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(t){if(!t.startsWith(Vg)){const e=Nn.create("invalid-gtag-resource",{gtagURL:t});return Yt.warn(e.message),""}return t}function FE(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function C4(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function R4(t,e){const n=C4("firebase-js-sdk-policy",{createScriptURL:j4}),r=document.createElement("script"),s=`${Vg}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function P4(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function D4(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const c=(await FE(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(l){Yt.error(l)}t("config",s,i)}async function O4(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await FE(n);for(const c of a){const d=l.find(f=>f.measurementId===c),h=d&&e[d.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Yt.error(i)}}function L4(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[l,c]=a;await O4(t,e,n,l,c)}else if(i==="config"){const[l,c]=a;await D4(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=a;t("consent",l,c)}else if(i==="get"){const[l,c,d]=a;t("get",l,c,d)}else if(i==="set"){const[l]=a;t("set",l)}else t(i,...a)}catch(l){Yt.error(l)}}return s}function V4(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=L4(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function M4(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Vg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=30,U4=1e3;class B4{constructor(e={},n=U4){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const UE=new B4;function $4(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function z4(t){var a;const{appId:e,apiKey:n}=t,r={method:"GET",headers:$4(n)},s=k4.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();(a=c.error)!=null&&a.message&&(l=c.error.message)}catch{}throw Nn.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function q4(t,e=UE,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Nn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Nn.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new G4;return setTimeout(async()=>{l.abort()},I4),BE({appId:r,apiKey:s,measurementId:i},a,l,e)}async function BE(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=UE){var l;const{appId:i,measurementId:a}=t;try{await H4(r,e)}catch(c){if(a)return Yt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:a};throw c}try{const c=await z4(t);return s.deleteThrottleMetadata(i),c}catch(c){const d=c;if(!W4(d)){if(s.deleteThrottleMetadata(i),a)return Yt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:a};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?uv(n,s.intervalMillis,F4):uv(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(i,f),Yt.debug(`Calling attemptFetch again in ${h} millis`),BE(t,f,r,s)}}function H4(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Nn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function W4(t){if(!(t instanceof An)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class G4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function K4(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a={...r,send_to:i};t("event",n,a)}}async function Q4(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J4(){if(fE())try{await pE()}catch(t){return Yt.warn(Nn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Yt.warn(Nn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Y4(t,e,n,r,s,i,a){const l=q4(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Yt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Yt.error(m)),e.push(l);const c=J4().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,c]);M4(i)||R4(i,d.measurementId),s("js",new Date);const f=(a==null?void 0:a.config)??{};return f[S4]="firebase",f.update=!0,h!=null&&(f[T4]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.app=e}_delete(){return delete Eo[this.app.options.appId],Promise.resolve()}}let Eo={},bv=[];const _v={};let Cf="dataLayer",Z4="gtag",Ev,Mg,Nv=!1;function eP(){const t=[];if(hE()&&t.push("This is a browser extension environment."),vC()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Nn.create("invalid-analytics-context",{errorInfo:e});Yt.warn(n.message)}}function tP(t,e,n){eP();const r=t.options.appId;if(!r)throw Nn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Yt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Nn.create("no-api-key");if(Eo[r]!=null)throw Nn.create("already-exists",{id:r});if(!Nv){P4(Cf);const{wrappedGtag:i,gtagCore:a}=V4(Eo,bv,_v,Cf,Z4);Mg=i,Ev=a,Nv=!0}return Eo[r]=Y4(t,bv,_v,e,Ev,Cf,n),new X4(t)}function nP(t=eh()){t=Pe(t);const e=Gr(t,od);return e.isInitialized()?e.getImmediate():rP(t)}function rP(t,e={}){const n=Gr(t,od);if(n.isInitialized()){const s=n.getImmediate();if(Rs(e,n.getOptions()))return s;throw Nn.create("already-initialized")}return n.initialize({options:e})}function sP(t,e,n){t=Pe(t),Q4(Mg,Eo[t.app.options.appId],e,n).catch(r=>Yt.error(r))}function iP(t,e,n,r){t=Pe(t),K4(Mg,Eo[t.app.options.appId],e,n,r).catch(s=>Yt.error(s))}const Tv="@firebase/analytics",Sv="0.10.19";function oP(){Fn(new Sn(od,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return tP(r,s,n)},"PUBLIC")),Fn(new Sn("analytics-internal",t,"PRIVATE")),Ut(Tv,Sv),Ut(Tv,Sv,"esm2020");function t(e){try{const n=e.getProvider(od).getImmediate();return{logEvent:(r,s,i)=>iP(n,r,s,i),setUserProperties:(r,s)=>sP(n,r,s)}}catch(n){throw Nn.create("interop-component-reg-failed",{reason:n})}}}oP();function $E(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aP=$E,zE=new Vi("auth","Firebase",$E());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=new Zd("@firebase/auth");function lP(t,...e){ad.logLevel<=be.WARN&&ad.warn(`Auth (${Mi}): ${t}`,...e)}function yu(t,...e){ad.logLevel<=be.ERROR&&ad.error(`Auth (${Mi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t,...e){throw Fg(t,...e)}function hr(t,...e){return Fg(t,...e)}function qE(t,e,n){const r={...aP(),[e]:n};return new Vi("auth","Firebase",r).create(e,{appName:t.name})}function Dr(t){return qE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zE.create(t,...e)}function le(t,e,...n){if(!t)throw Fg(e,...n)}function Cr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yu(e),new Error(e)}function Br(t,e){t||Cr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function cP(){return Iv()==="http:"||Iv()==="https:"}function Iv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cP()||hE()||"connection"in navigator)?navigator.onLine:!0}function dP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Br(n>e,"Short delay should be less than long delay!"),this.isMobile=fC()||gC()}get(){return uP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t,e){Br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pP=new tc(3e4,6e4);function Ws(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Kr(t,e,n,r,s={}){return WE(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=ec({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return mC()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&br(t.emulatorConfig.host)&&(d.credentials="include"),HE.fetch()(await GE(t,t.config.apiHost,n,l),d)})}async function WE(t,e,n){t._canInitEmulator=!1;const r={...hP,...e};try{const s=new gP(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Jc(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jc(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Jc(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Jc(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw qE(t,h,d);Yn(t,h)}}catch(s){if(s instanceof An)throw s;Yn(t,"network-request-failed",{message:String(s)})}}async function nc(t,e,n,r,s={}){const i=await Kr(t,e,n,r,s);return"mfaPendingCredential"in i&&Yn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function GE(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?Ug(t.config,s):`${t.config.apiScheme}://${s}`;return fP.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function mP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hr(this.auth,"network-request-failed")),pP.get())})}}function Jc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=hr(t,e,r);return s.customData._tokenResponse=n,s}function kv(t){return t!==void 0&&t.enterprise!==void 0}class yP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return mP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xP(t,e){return Kr(t,"GET","/v2/recaptchaConfig",Ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(t,e){return Kr(t,"POST","/v1/accounts:delete",e)}async function ld(t,e){return Kr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wP(t,e=!1){const n=Pe(t),r=await n.getIdToken(e),s=Bg(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:cl(Rf(s.auth_time)),issuedAtTime:cl(Rf(s.iat)),expirationTime:cl(Rf(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Rf(t){return Number(t)*1e3}function Bg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yu("JWT malformed, contained fewer than 3 sections"),null;try{const s=aE(n);return s?JSON.parse(s):(yu("Failed to decode base64 JWT payload"),null)}catch(s){return yu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Av(t){const e=Bg(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof An&&bP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function bP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cl(this.lastLoginAt),this.creationTime=cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cd(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Fo(t,ld(e,{idToken:n}));le(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?KE(s.providerUserInfo):[],a=NP(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Zp(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function EP(t){const e=Pe(t);await cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NP(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function KE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TP(t,e){const n=await WE(t,{},async()=>{const r=ec({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await GE(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&br(t.emulatorConfig.host)&&(c.credentials="include"),HE.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SP(t,e){return Kr(t,"POST","/v2/accounts:revokeToken",Ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Av(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=Av(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await TP(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new No;return r&&(le(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return Cr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new _P(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Zp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Fo(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wP(this,e)}reload(){return EP(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await cd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(Dr(this.auth));const e=await this.getIdToken();return await Fo(this,vP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:w,providerData:y,stsTokenManager:E}=n;le(f&&E,e,"internal-error");const v=No.fromJSON(this.name,E);le(typeof f=="string",e,"internal-error"),ns(r,e.name),ns(s,e.name),le(typeof m=="boolean",e,"internal-error"),le(typeof w=="boolean",e,"internal-error"),ns(i,e.name),ns(a,e.name),ns(l,e.name),ns(c,e.name),ns(d,e.name),ns(h,e.name);const T=new Gn({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:w,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:v,createdAt:d,lastLoginAt:h});return y&&Array.isArray(y)&&(T.providerData=y.map(x=>({...x}))),c&&(T._redirectEventId=c),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new No;s.updateFromServerResponse(n);const i=new Gn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await cd(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];le(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?KE(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new No;l.updateFromIdToken(r);const c=new Gn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Zp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=new Map;function Rr(t){Br(t instanceof Function,"Expected a class definition");let e=jv.get(t);return e?(Br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,jv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}QE.type="NONE";const Cv=QE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t,e,n){return`firebase:${t}:${e}:${n}`}class To{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=xu(this.userKey,s.apiKey,i),this.fullPersistenceKey=xu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ld(this.auth,{idToken:e}).catch(()=>{});return n?Gn._fromGetAccountInfoResponse(this.auth,n,e):null}return Gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new To(Rr(Cv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Rr(Cv);const a=xu(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(a);if(h){let f;if(typeof h=="string"){const m=await ld(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Gn._fromGetAccountInfoResponse(e,m,h)}else f=Gn._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new To(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new To(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tN(e))return"Blackberry";if(nN(e))return"Webos";if(YE(e))return"Safari";if((e.includes("chrome/")||XE(e))&&!e.includes("edge/"))return"Chrome";if(eN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function JE(t=qt()){return/firefox\//i.test(t)}function YE(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XE(t=qt()){return/crios\//i.test(t)}function ZE(t=qt()){return/iemobile/i.test(t)}function eN(t=qt()){return/android/i.test(t)}function tN(t=qt()){return/blackberry/i.test(t)}function nN(t=qt()){return/webos/i.test(t)}function $g(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function IP(t=qt()){var e;return $g(t)&&!!((e=window.navigator)!=null&&e.standalone)}function kP(){return yC()&&document.documentMode===10}function rN(t=qt()){return $g(t)||eN(t)||nN(t)||tN(t)||/windows phone/i.test(t)||ZE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t,e=[]){let n;switch(t){case"Browser":n=Rv(qt());break;case"Worker":n=`${Rv(qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(t,e={}){return Kr(t,"GET","/v2/passwordPolicy",Ws(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=6;class RP{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??CP,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pv(this),this.idTokenSubscription=new Pv(this),this.beforeStateQueue=new AP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await To.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ld(this,{idToken:e}),r=await Gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(an(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(Dr(this));const n=e?Pe(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(Dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(Dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jP(this),n=new RP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await SP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rr(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&lP(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Fi(t){return Pe(t)}class Pv{constructor(e){this.auth=e,this.observer=null,this.addObserver=NC(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DP(t){rh=t}function iN(t){return rh.loadJS(t)}function OP(){return rh.recaptchaEnterpriseScript}function LP(){return rh.gapiScript}function VP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class MP{constructor(){this.enterprise=new FP}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class FP{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const UP="recaptcha-enterprise",oN="NO_RECAPTCHA";class BP{constructor(e){this.type=UP,this.auth=Fi(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{xP(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new yP(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;kv(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(oN)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MP().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&kv(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=OP();c.length!==0&&(c+=l),iN(c).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function Dv(t,e,n,r=!1,s=!1){const i=new BP(t);let a;if(s)a=oN;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function em(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Dv(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Dv(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t,e){const n=Gr(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Rs(i,e??{}))return s;Yn(s,"already-initialized")}return n.initialize({options:e})}function zP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Rr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function qP(t,e,n){const r=Fi(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=aN(e),{host:a,port:l}=HP(e),c=l===null?"":`:${l}`,d={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(Rs(d,r.config.emulator)&&Rs(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,br(a)?(Xd(`${i}//${a}${c}`),Cg("Auth",!0)):WP()}function aN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HP(t){const e=aN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ov(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Ov(a)}}}function Ov(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Cr("not implemented")}_getIdTokenResponse(e){return Cr("not implemented")}_linkToIdToken(e,n){return Cr("not implemented")}_getReauthenticationResolver(e){return Cr("not implemented")}}async function GP(t,e){return Kr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KP(t,e){return nc(t,"POST","/v1/accounts:signInWithPassword",Ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(t,e){return nc(t,"POST","/v1/accounts:signInWithEmailLink",Ws(t,e))}async function JP(t,e){return nc(t,"POST","/v1/accounts:signInWithEmailLink",Ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml extends zg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ml(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ml(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return em(e,n,"signInWithPassword",KP);case"emailLink":return QP(e,{email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return em(e,r,"signUpPassword",GP);case"emailLink":return JP(e,{idToken:n,email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e){return nc(t,"POST","/v1/accounts:signInWithIdp",Ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="http://localhost";class ki extends zg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ki(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new ki(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return So(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,So(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,So(e,n)}buildRequest(){const e={requestUri:YP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ec(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZP(t){const e=Ga(Ka(t)).link,n=e?Ga(Ka(e)).deep_link_id:null,r=Ga(Ka(t)).deep_link_id;return(r?Ga(Ka(r)).link:null)||r||n||e||t}class qg{constructor(e){const n=Ga(Ka(e)),r=n.apiKey??null,s=n.oobCode??null,i=XP(n.mode??null);le(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=ZP(e);try{return new qg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.providerId=ta.PROVIDER_ID}static credential(e,n){return Ml._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=qg.parseLink(n);return le(r,"argument-error"),Ml._fromEmailAndCode(e,r.code,r.tenantId)}}ta.PROVIDER_ID="password";ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends lN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends rc{constructor(){super("facebook.com")}static credential(e){return ki._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ki._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ls.credential(n,r)}catch{return null}}}ls.GOOGLE_SIGN_IN_METHOD="google.com";ls.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends rc{constructor(){super("github.com")}static credential(e){return ki._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends rc{constructor(){super("twitter.com")}static credential(e,n){return ki._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return us.credential(n,r)}catch{return null}}}us.TWITTER_SIGN_IN_METHOD="twitter.com";us.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e5(t,e){return nc(t,"POST","/v1/accounts:signUp",Ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Gn._fromIdTokenResponse(e,r,s),a=Lv(r);return new Ai({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Lv(r);return new Ai({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Lv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud extends An{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ud.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ud(e,n,r,s)}}function cN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ud._fromErrorAndOperation(t,i,e,r):i})}async function t5(t,e,n=!1){const r=await Fo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ai._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(t,e,n=!1){const{auth:r}=t;if(an(r.app))return Promise.reject(Dr(r));const s="reauthenticate";try{const i=await Fo(t,cN(r,s,e,t),n);le(i.idToken,r,"internal-error");const a=Bg(i.idToken);le(a,r,"internal-error");const{sub:l}=a;return le(t.uid===l,r,"user-mismatch"),Ai._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Yn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(t,e,n=!1){if(an(t.app))return Promise.reject(Dr(t));const r="signIn",s=await cN(t,r,e),i=await Ai._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function r5(t,e){return uN(Fi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t){const e=Fi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function s5(t,e,n){if(an(t.app))return Promise.reject(Dr(t));const r=Fi(t),a=await em(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",e5).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&dN(t),c}),l=await Ai._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function i5(t,e,n){return an(t.app)?Promise.reject(Dr(t)):r5(Pe(t),ta.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dN(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o5(t,e){return Kr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a5(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Pe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Fo(r,o5(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function l5(t,e,n,r){return Pe(t).onIdTokenChanged(e,n,r)}function c5(t,e,n){return Pe(t).beforeAuthStateChanged(e,n)}function u5(t,e,n,r){return Pe(t).onAuthStateChanged(e,n,r)}function d5(t){return Pe(t).signOut()}const dd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dd,"1"),this.storage.removeItem(dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=1e3,f5=10;class fN extends hN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);kP()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,f5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},h5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fN.type="LOCAL";const p5=fN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN extends hN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pN.type="SESSION";const mN=pN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new sh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),c=await m5(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=Hg("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(){return window}function y5(t){fr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(){return typeof fr().WorkerGlobalScope<"u"&&typeof fr().importScripts=="function"}async function x5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function v5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function w5(){return gN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="firebaseLocalStorageDb",b5=1,hd="firebaseLocalStorage",xN="fbase_key";class sc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ih(t,e){return t.transaction([hd],e?"readwrite":"readonly").objectStore(hd)}function _5(){const t=indexedDB.deleteDatabase(yN);return new sc(t).toPromise()}function tm(){const t=indexedDB.open(yN,b5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hd,{keyPath:xN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hd)?e(r):(r.close(),await _5(),e(await tm()))})})}async function Vv(t,e,n){const r=ih(t,!0).put({[xN]:e,value:n});return new sc(r).toPromise()}async function E5(t,e){const n=ih(t,!1).get(e),r=await new sc(n).toPromise();return r===void 0?null:r.value}function Mv(t,e){const n=ih(t,!0).delete(e);return new sc(n).toPromise()}const N5=800,T5=3;class vN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>T5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sh._getInstance(w5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await x5(),!this.activeServiceWorker)return;this.sender=new g5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||v5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tm();return await Vv(e,dd,"1"),await Mv(e,dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Vv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>E5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Mv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ih(s,!1).getAll();return new sc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),N5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vN.type="LOCAL";const S5=vN;new tc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t,e){return e?Rr(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends zg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,n){return So(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function k5(t){return uN(t.auth,new Wg(t),t.bypassAuthState)}function A5(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),n5(n,new Wg(t),t.bypassAuthState)}async function j5(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),t5(n,new Wg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return k5;case"linkViaPopup":case"linkViaRedirect":return j5;case"reauthViaPopup":case"reauthViaRedirect":return A5;default:Yn(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=new tc(2e3,1e4);class go extends wN{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,go.currentPopupAction&&go.currentPopupAction.cancel(),go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=Hg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,go.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,C5.get())};e()}}go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5="pendingRedirect",vu=new Map;class P5 extends wN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=vu.get(this.auth._key());if(!e){try{const r=await D5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}vu.set(this.auth._key(),e)}return this.bypassAuthState||vu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function D5(t,e){const n=V5(e),r=L5(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function O5(t,e){vu.set(t._key(),e)}function L5(t){return Rr(t._redirectPersistence)}function V5(t){return xu(R5,t.config.apiKey,t.name)}async function M5(t,e,n=!1){if(an(t.app))return Promise.reject(Dr(t));const r=Fi(t),s=I5(r,e),a=await new P5(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5=10*60*1e3;class U5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!B5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!bN(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(hr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=F5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fv(e))}saveEventToCache(e){this.cachedEventUids.add(Fv(e)),this.lastProcessedEventTime=Date.now()}}function Fv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function B5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $5(t,e={}){return Kr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,q5=/^https?/;async function H5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $5(t);for(const n of e)try{if(W5(n))return}catch{}Yn(t,"unauthorized-domain")}function W5(t){const e=Xp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!q5.test(n))return!1;if(z5.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=new tc(3e4,6e4);function Uv(){const t=fr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function K5(t){return new Promise((e,n)=>{var s,i,a;function r(){Uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uv(),n(hr(t,"network-request-failed"))},timeout:G5.get()})}if((i=(s=fr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=fr().gapi)!=null&&a.load)r();else{const l=VP("iframefcb");return fr()[l]=()=>{gapi.load?r():n(hr(t,"network-request-failed"))},iN(`${LP()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw wu=null,e})}let wu=null;function Q5(t){return wu=wu||K5(t),wu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=new tc(5e3,15e3),Y5="__/auth/iframe",X5="emulator/auth/iframe",Z5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tD(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ug(e,X5):`https://${t.config.authDomain}/${Y5}`,r={apiKey:e.apiKey,appName:t.name,v:Mi},s=eD.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ec(r).slice(1)}`}async function nD(t){const e=await Q5(t),n=fr().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:tD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z5,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=hr(t,"network-request-failed"),l=fr().setTimeout(()=>{i(a)},J5.get());function c(){fr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sD=500,iD=600,oD="_blank",aD="http://localhost";class Bv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lD(t,e,n,r=sD,s=iD){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...rD,width:r.toString(),height:s.toString(),top:i,left:a},d=qt().toLowerCase();n&&(l=XE(d)?oD:n),JE(d)&&(e=e||aD,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[w,y])=>`${m}${w}=${y},`,"");if(IP(d)&&l!=="_self")return cD(e||"",l),new Bv(null);const f=window.open(e||"",l,h);le(f,t,"popup-blocked");try{f.focus()}catch{}return new Bv(f)}function cD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="__/auth/handler",dD="emulator/auth/handler",hD=encodeURIComponent("fac");async function $v(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Mi,eventId:s};if(e instanceof lN){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",EC(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof rc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${hD}=${encodeURIComponent(c)}`:"";return`${fD(t)}?${ec(l).slice(1)}${d}`}function fD({config:t}){return t.emulator?Ug(t,dD):`https://${t.authDomain}/${uD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="webStorageSupport";class pD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mN,this._completeRedirectFn=M5,this._overrideRedirectResult=O5}async _openPopup(e,n,r,s){var a;Br((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await $v(e,n,r,Xp(),s);return lD(e,i,Hg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await $v(e,n,r,Xp(),s);return y5(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Br(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await nD(e),r=new U5(e);return n.register("authEvent",s=>(le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pf,{type:Pf},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[Pf];i!==void 0&&n(!!i),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=H5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rN()||YE()||$g()}}const mD=pD;var zv="@firebase/auth",qv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xD(t){Fn(new Sn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;le(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sN(t)},d=new PP(r,s,i,c);return zP(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fn(new Sn("auth-internal",e=>{const n=Fi(e.getProvider("auth").getImmediate());return(r=>new gD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ut(zv,qv,yD(t)),Ut(zv,qv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=5*60,wD=dE("authIdTokenMaxAge")||vD;let Hv=null;const bD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>wD)return;const s=n==null?void 0:n.token;Hv!==s&&(Hv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function _D(t=eh()){const e=Gr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$P(t,{popupRedirectResolver:mD,persistence:[S5,p5,mN]}),r=dE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=bD(i.toString());c5(n,a,()=>a(n.currentUser)),l5(n,l=>a(l))}}const s=lE("auth");return s&&qP(n,`http://${s}`),n}function ED(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}DP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=hr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",ED().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xD("Browser");var Wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ks,_N;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,_){function A(){}A.prototype=_.prototype,b.F=_.prototype,b.prototype=new A,b.prototype.constructor=b,b.D=function(j,I,P){for(var k=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)k[oe-2]=arguments[oe];return _.prototype[I].apply(j,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,_,A){A||(A=0);const j=Array(16);if(typeof _=="string")for(var I=0;I<16;++I)j[I]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(I=0;I<16;++I)j[I]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=b.g[0],A=b.g[1],I=b.g[2];let P=b.g[3],k;k=_+(P^A&(I^P))+j[0]+3614090360&4294967295,_=A+(k<<7&4294967295|k>>>25),k=P+(I^_&(A^I))+j[1]+3905402710&4294967295,P=_+(k<<12&4294967295|k>>>20),k=I+(A^P&(_^A))+j[2]+606105819&4294967295,I=P+(k<<17&4294967295|k>>>15),k=A+(_^I&(P^_))+j[3]+3250441966&4294967295,A=I+(k<<22&4294967295|k>>>10),k=_+(P^A&(I^P))+j[4]+4118548399&4294967295,_=A+(k<<7&4294967295|k>>>25),k=P+(I^_&(A^I))+j[5]+1200080426&4294967295,P=_+(k<<12&4294967295|k>>>20),k=I+(A^P&(_^A))+j[6]+2821735955&4294967295,I=P+(k<<17&4294967295|k>>>15),k=A+(_^I&(P^_))+j[7]+4249261313&4294967295,A=I+(k<<22&4294967295|k>>>10),k=_+(P^A&(I^P))+j[8]+1770035416&4294967295,_=A+(k<<7&4294967295|k>>>25),k=P+(I^_&(A^I))+j[9]+2336552879&4294967295,P=_+(k<<12&4294967295|k>>>20),k=I+(A^P&(_^A))+j[10]+4294925233&4294967295,I=P+(k<<17&4294967295|k>>>15),k=A+(_^I&(P^_))+j[11]+2304563134&4294967295,A=I+(k<<22&4294967295|k>>>10),k=_+(P^A&(I^P))+j[12]+1804603682&4294967295,_=A+(k<<7&4294967295|k>>>25),k=P+(I^_&(A^I))+j[13]+4254626195&4294967295,P=_+(k<<12&4294967295|k>>>20),k=I+(A^P&(_^A))+j[14]+2792965006&4294967295,I=P+(k<<17&4294967295|k>>>15),k=A+(_^I&(P^_))+j[15]+1236535329&4294967295,A=I+(k<<22&4294967295|k>>>10),k=_+(I^P&(A^I))+j[1]+4129170786&4294967295,_=A+(k<<5&4294967295|k>>>27),k=P+(A^I&(_^A))+j[6]+3225465664&4294967295,P=_+(k<<9&4294967295|k>>>23),k=I+(_^A&(P^_))+j[11]+643717713&4294967295,I=P+(k<<14&4294967295|k>>>18),k=A+(P^_&(I^P))+j[0]+3921069994&4294967295,A=I+(k<<20&4294967295|k>>>12),k=_+(I^P&(A^I))+j[5]+3593408605&4294967295,_=A+(k<<5&4294967295|k>>>27),k=P+(A^I&(_^A))+j[10]+38016083&4294967295,P=_+(k<<9&4294967295|k>>>23),k=I+(_^A&(P^_))+j[15]+3634488961&4294967295,I=P+(k<<14&4294967295|k>>>18),k=A+(P^_&(I^P))+j[4]+3889429448&4294967295,A=I+(k<<20&4294967295|k>>>12),k=_+(I^P&(A^I))+j[9]+568446438&4294967295,_=A+(k<<5&4294967295|k>>>27),k=P+(A^I&(_^A))+j[14]+3275163606&4294967295,P=_+(k<<9&4294967295|k>>>23),k=I+(_^A&(P^_))+j[3]+4107603335&4294967295,I=P+(k<<14&4294967295|k>>>18),k=A+(P^_&(I^P))+j[8]+1163531501&4294967295,A=I+(k<<20&4294967295|k>>>12),k=_+(I^P&(A^I))+j[13]+2850285829&4294967295,_=A+(k<<5&4294967295|k>>>27),k=P+(A^I&(_^A))+j[2]+4243563512&4294967295,P=_+(k<<9&4294967295|k>>>23),k=I+(_^A&(P^_))+j[7]+1735328473&4294967295,I=P+(k<<14&4294967295|k>>>18),k=A+(P^_&(I^P))+j[12]+2368359562&4294967295,A=I+(k<<20&4294967295|k>>>12),k=_+(A^I^P)+j[5]+4294588738&4294967295,_=A+(k<<4&4294967295|k>>>28),k=P+(_^A^I)+j[8]+2272392833&4294967295,P=_+(k<<11&4294967295|k>>>21),k=I+(P^_^A)+j[11]+1839030562&4294967295,I=P+(k<<16&4294967295|k>>>16),k=A+(I^P^_)+j[14]+4259657740&4294967295,A=I+(k<<23&4294967295|k>>>9),k=_+(A^I^P)+j[1]+2763975236&4294967295,_=A+(k<<4&4294967295|k>>>28),k=P+(_^A^I)+j[4]+1272893353&4294967295,P=_+(k<<11&4294967295|k>>>21),k=I+(P^_^A)+j[7]+4139469664&4294967295,I=P+(k<<16&4294967295|k>>>16),k=A+(I^P^_)+j[10]+3200236656&4294967295,A=I+(k<<23&4294967295|k>>>9),k=_+(A^I^P)+j[13]+681279174&4294967295,_=A+(k<<4&4294967295|k>>>28),k=P+(_^A^I)+j[0]+3936430074&4294967295,P=_+(k<<11&4294967295|k>>>21),k=I+(P^_^A)+j[3]+3572445317&4294967295,I=P+(k<<16&4294967295|k>>>16),k=A+(I^P^_)+j[6]+76029189&4294967295,A=I+(k<<23&4294967295|k>>>9),k=_+(A^I^P)+j[9]+3654602809&4294967295,_=A+(k<<4&4294967295|k>>>28),k=P+(_^A^I)+j[12]+3873151461&4294967295,P=_+(k<<11&4294967295|k>>>21),k=I+(P^_^A)+j[15]+530742520&4294967295,I=P+(k<<16&4294967295|k>>>16),k=A+(I^P^_)+j[2]+3299628645&4294967295,A=I+(k<<23&4294967295|k>>>9),k=_+(I^(A|~P))+j[0]+4096336452&4294967295,_=A+(k<<6&4294967295|k>>>26),k=P+(A^(_|~I))+j[7]+1126891415&4294967295,P=_+(k<<10&4294967295|k>>>22),k=I+(_^(P|~A))+j[14]+2878612391&4294967295,I=P+(k<<15&4294967295|k>>>17),k=A+(P^(I|~_))+j[5]+4237533241&4294967295,A=I+(k<<21&4294967295|k>>>11),k=_+(I^(A|~P))+j[12]+1700485571&4294967295,_=A+(k<<6&4294967295|k>>>26),k=P+(A^(_|~I))+j[3]+2399980690&4294967295,P=_+(k<<10&4294967295|k>>>22),k=I+(_^(P|~A))+j[10]+4293915773&4294967295,I=P+(k<<15&4294967295|k>>>17),k=A+(P^(I|~_))+j[1]+2240044497&4294967295,A=I+(k<<21&4294967295|k>>>11),k=_+(I^(A|~P))+j[8]+1873313359&4294967295,_=A+(k<<6&4294967295|k>>>26),k=P+(A^(_|~I))+j[15]+4264355552&4294967295,P=_+(k<<10&4294967295|k>>>22),k=I+(_^(P|~A))+j[6]+2734768916&4294967295,I=P+(k<<15&4294967295|k>>>17),k=A+(P^(I|~_))+j[13]+1309151649&4294967295,A=I+(k<<21&4294967295|k>>>11),k=_+(I^(A|~P))+j[4]+4149444226&4294967295,_=A+(k<<6&4294967295|k>>>26),k=P+(A^(_|~I))+j[11]+3174756917&4294967295,P=_+(k<<10&4294967295|k>>>22),k=I+(_^(P|~A))+j[2]+718787259&4294967295,I=P+(k<<15&4294967295|k>>>17),k=A+(P^(I|~_))+j[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(I+(k<<21&4294967295|k>>>11))&4294967295,b.g[2]=b.g[2]+I&4294967295,b.g[3]=b.g[3]+P&4294967295}r.prototype.v=function(b,_){_===void 0&&(_=b.length);const A=_-this.blockSize,j=this.C;let I=this.h,P=0;for(;P<_;){if(I==0)for(;P<=A;)s(this,b,P),P+=this.blockSize;if(typeof b=="string"){for(;P<_;)if(j[I++]=b.charCodeAt(P++),I==this.blockSize){s(this,j),I=0;break}}else for(;P<_;)if(j[I++]=b[P++],I==this.blockSize){s(this,j),I=0;break}}this.h=I,this.o+=_},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;_=this.o*8;for(var A=b.length-8;A<b.length;++A)b[A]=_&255,_/=256;for(this.v(b),b=Array(16),_=0,A=0;A<4;++A)for(let j=0;j<32;j+=8)b[_++]=this.g[A]>>>j&255;return b};function i(b,_){var A=l;return Object.prototype.hasOwnProperty.call(A,b)?A[b]:A[b]=_(b)}function a(b,_){this.h=_;const A=[];let j=!0;for(let I=b.length-1;I>=0;I--){const P=b[I]|0;j&&P==_||(A[I]=P,j=!1)}this.g=A}var l={};function c(b){return-128<=b&&b<128?i(b,function(_){return new a([_|0],_<0?-1:0)}):new a([b|0],b<0?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return f;if(b<0)return v(d(-b));const _=[];let A=1;for(let j=0;b>=A;j++)_[j]=b/A|0,A*=4294967296;return new a(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return v(h(b.substring(1),_));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=d(Math.pow(_,8));let j=f;for(let P=0;P<b.length;P+=8){var I=Math.min(8,b.length-P);const k=parseInt(b.substring(P,P+I),_);I<8?(I=d(Math.pow(_,I)),j=j.j(I).add(d(k))):(j=j.j(A),j=j.add(d(k)))}return j}var f=c(0),m=c(1),w=c(16777216);t=a.prototype,t.m=function(){if(E(this))return-v(this).m();let b=0,_=1;for(let A=0;A<this.g.length;A++){const j=this.i(A);b+=(j>=0?j:4294967296+j)*_,_*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(y(this))return"0";if(E(this))return"-"+v(this).toString(b);const _=d(Math.pow(b,6));var A=this;let j="";for(;;){const I=R(A,_).g;A=T(A,I.j(_));let P=((A.g.length>0?A.g[0]:A.h)>>>0).toString(b);if(A=I,y(A))return P+j;for(;P.length<6;)P="0"+P;j=P+j}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function y(b){if(b.h!=0)return!1;for(let _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function E(b){return b.h==-1}t.l=function(b){return b=T(this,b),E(b)?-1:y(b)?0:1};function v(b){const _=b.g.length,A=[];for(let j=0;j<_;j++)A[j]=~b.g[j];return new a(A,~b.h).add(m)}t.abs=function(){return E(this)?v(this):this},t.add=function(b){const _=Math.max(this.g.length,b.g.length),A=[];let j=0;for(let I=0;I<=_;I++){let P=j+(this.i(I)&65535)+(b.i(I)&65535),k=(P>>>16)+(this.i(I)>>>16)+(b.i(I)>>>16);j=k>>>16,P&=65535,k&=65535,A[I]=k<<16|P}return new a(A,A[A.length-1]&-2147483648?-1:0)};function T(b,_){return b.add(v(_))}t.j=function(b){if(y(this)||y(b))return f;if(E(this))return E(b)?v(this).j(v(b)):v(v(this).j(b));if(E(b))return v(this.j(v(b)));if(this.l(w)<0&&b.l(w)<0)return d(this.m()*b.m());const _=this.g.length+b.g.length,A=[];for(var j=0;j<2*_;j++)A[j]=0;for(j=0;j<this.g.length;j++)for(let I=0;I<b.g.length;I++){const P=this.i(j)>>>16,k=this.i(j)&65535,oe=b.i(I)>>>16,ge=b.i(I)&65535;A[2*j+2*I]+=k*ge,x(A,2*j+2*I),A[2*j+2*I+1]+=P*ge,x(A,2*j+2*I+1),A[2*j+2*I+1]+=k*oe,x(A,2*j+2*I+1),A[2*j+2*I+2]+=P*oe,x(A,2*j+2*I+2)}for(b=0;b<_;b++)A[b]=A[2*b+1]<<16|A[2*b];for(b=_;b<2*_;b++)A[b]=0;return new a(A,0)};function x(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function N(b,_){this.g=b,this.h=_}function R(b,_){if(y(_))throw Error("division by zero");if(y(b))return new N(f,f);if(E(b))return _=R(v(b),_),new N(v(_.g),v(_.h));if(E(_))return _=R(b,v(_)),new N(v(_.g),_.h);if(b.g.length>30){if(E(b)||E(_))throw Error("slowDivide_ only works with positive integers.");for(var A=m,j=_;j.l(b)<=0;)A=C(A),j=C(j);var I=L(A,1),P=L(j,1);for(j=L(j,2),A=L(A,2);!y(j);){var k=P.add(j);k.l(b)<=0&&(I=I.add(A),P=k),j=L(j,1),A=L(A,1)}return _=T(b,I.j(_)),new N(I,_)}for(I=f;b.l(_)>=0;){for(A=Math.max(1,Math.floor(b.m()/_.m())),j=Math.ceil(Math.log(A)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),P=d(A),k=P.j(_);E(k)||k.l(b)>0;)A-=j,P=d(A),k=P.j(_);y(P)&&(P=m),I=I.add(P),b=T(b,k)}return new N(I,b)}t.B=function(b){return R(this,b).h},t.and=function(b){const _=Math.max(this.g.length,b.g.length),A=[];for(let j=0;j<_;j++)A[j]=this.i(j)&b.i(j);return new a(A,this.h&b.h)},t.or=function(b){const _=Math.max(this.g.length,b.g.length),A=[];for(let j=0;j<_;j++)A[j]=this.i(j)|b.i(j);return new a(A,this.h|b.h)},t.xor=function(b){const _=Math.max(this.g.length,b.g.length),A=[];for(let j=0;j<_;j++)A[j]=this.i(j)^b.i(j);return new a(A,this.h^b.h)};function C(b){const _=b.g.length+1,A=[];for(let j=0;j<_;j++)A[j]=b.i(j)<<1|b.i(j-1)>>>31;return new a(A,b.h)}function L(b,_){const A=_>>5;_%=32;const j=b.g.length-A,I=[];for(let P=0;P<j;P++)I[P]=_>0?b.i(P+A)>>>_|b.i(P+A+1)<<32-_:b.i(P+A);return new a(I,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,_N=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,ks=a}).apply(typeof Wv<"u"?Wv:typeof self<"u"?self:typeof window<"u"?window:{});var Yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EN,Qa,NN,bu,nm,TN,SN,IN;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yc=="object"&&Yc];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var g=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var V=u[S];if(!(V in g))break e;g=g[V]}u=u[u.length-1],S=g[u],p=p(S),p!=S&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(p){var g=[],S;for(S in p)Object.prototype.hasOwnProperty.call(p,S)&&g.push([S,p[S]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function c(u,p,g){return u.call.apply(u.bind,arguments)}function d(u,p,g){return d=c,d.apply(null,arguments)}function h(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function f(u,p){function g(){}g.prototype=p.prototype,u.Z=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(S,V,U){for(var G=Array(arguments.length-2),me=2;me<arguments.length;me++)G[me-2]=arguments[me];return p.prototype[V].apply(S,G)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function w(u){const p=u.length;if(p>0){const g=Array(p);for(let S=0;S<p;S++)g[S]=u[S];return g}return[]}function y(u,p){for(let S=1;S<arguments.length;S++){const V=arguments[S];var g=typeof V;if(g=g!="object"?g:V?Array.isArray(V)?"array":g:"null",g=="array"||g=="object"&&typeof V.length=="number"){g=u.length||0;const U=V.length||0;u.length=g+U;for(let G=0;G<U;G++)u[g+G]=V[G]}else u.push(V)}}class E{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function v(u){a.setTimeout(()=>{throw u},0)}function T(){var u=b;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class x{constructor(){this.h=this.g=null}add(p,g){const S=N.get();S.set(p,g),this.h?this.h.next=S:this.g=S,this.h=S}}var N=new E(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let C,L=!1,b=new x,_=()=>{const u=Promise.resolve(void 0);C=()=>{u.then(A)}};function A(){for(var u;u=T();){try{u.h.call(u.g)}catch(g){v(g)}var p=N;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}L=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function k(u){return/^[\s\xa0]*$/.test(u)}function oe(u,p){I.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}f(oe,I),oe.prototype.init=function(u,p){const g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),te=0;function fe(u,p,g,S,V){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!S,this.ha=V,this.key=++te,this.da=this.fa=!1}function q(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ne(u,p,g){for(const S in u)p.call(g,u[S],S,u)}function re(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function ye(u){const p={};for(const g in u)p[g]=u[g];return p}const Te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function De(u,p){let g,S;for(let V=1;V<arguments.length;V++){S=arguments[V];for(g in S)u[g]=S[g];for(let U=0;U<Te.length;U++)g=Te[U],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function tt(u){this.src=u,this.g={},this.h=0}tt.prototype.add=function(u,p,g,S,V){const U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);const G=Rt(u,p,S,V);return G>-1?(p=u[G],g||(p.fa=!1)):(p=new fe(p,this.src,U,!!S,V),p.fa=g,u.push(p)),p};function vt(u,p){const g=p.type;if(g in u.g){var S=u.g[g],V=Array.prototype.indexOf.call(S,p,void 0),U;(U=V>=0)&&Array.prototype.splice.call(S,V,1),U&&(q(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Rt(u,p,g,S){for(let V=0;V<u.length;++V){const U=u[V];if(!U.da&&U.listener==p&&U.capture==!!g&&U.ha==S)return V}return-1}var Ht="closure_lm_"+(Math.random()*1e6|0),Er={};function xe(u,p,g,S,V){if(Array.isArray(p)){for(let U=0;U<p.length;U++)xe(u,p[U],g,S,V);return null}return g=Dh(g),u&&u[ge]?u.J(p,g,l(S)?!!S.capture:!1,V):ke(u,p,g,!1,S,V)}function ke(u,p,g,S,V,U){if(!p)throw Error("Invalid event type");const G=l(V)?!!V.capture:!!V;let me=pa(u);if(me||(u[Ht]=me=new tt(u)),g=me.add(p,g,S,G,U),g.proxy)return g;if(S=da(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)P||(V=G),V===void 0&&(V=!1),u.addEventListener(p.toString(),S,V);else if(u.attachEvent)u.attachEvent(fa(p.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function da(){function u(g){return p.call(u.src,u.listener,g)}const p=wc;return u}function Nr(u,p,g,S,V){if(Array.isArray(p))for(var U=0;U<p.length;U++)Nr(u,p[U],g,S,V);else S=l(S)?!!S.capture:!!S,g=Dh(g),u&&u[ge]?(u=u.i,U=String(p).toString(),U in u.g&&(p=u.g[U],g=Rt(p,g,S,V),g>-1&&(q(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete u.g[U],u.h--)))):u&&(u=pa(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Rt(p,g,S,V)),(g=u>-1?p[u]:null)&&ha(g))}function ha(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ge])vt(p.i,u);else{var g=u.type,S=u.proxy;p.removeEventListener?p.removeEventListener(g,S,u.capture):p.detachEvent?p.detachEvent(fa(g),S):p.addListener&&p.removeListener&&p.removeListener(S),(g=pa(p))?(vt(g,u),g.h==0&&(g.src=null,p[Ht]=null)):q(u)}}}function fa(u){return u in Er?Er[u]:Er[u]="on"+u}function wc(u,p){if(u.da)u=!0;else{p=new oe(p,this);const g=u.listener,S=u.ha||u.src;u.fa&&ha(u),u=g.call(S,p)}return u}function pa(u){return u=u[Ht],u instanceof tt?u:null}var ma="__closure_events_fn_"+(Math.random()*1e9>>>0);function Dh(u){return typeof u=="function"?u:(u[ma]||(u[ma]=function(p){return u.handleEvent(p)}),u[ma])}function ft(){j.call(this),this.i=new tt(this),this.M=this,this.G=null}f(ft,j),ft.prototype[ge]=!0,ft.prototype.removeEventListener=function(u,p,g,S){Nr(this,u,p,g,S)};function D(u,p){var g,S=u.G;if(S)for(g=[];S;S=S.G)g.push(S);if(u=u.M,S=p.type||p,typeof p=="string")p=new I(p,u);else if(p instanceof I)p.target=p.target||u;else{var V=p;p=new I(S,u),De(p,V)}V=!0;let U,G;if(g)for(G=g.length-1;G>=0;G--)U=p.g=g[G],V=M(U,S,!0,p)&&V;if(U=p.g=u,V=M(U,S,!0,p)&&V,V=M(U,S,!1,p)&&V,g)for(G=0;G<g.length;G++)U=p.g=g[G],V=M(U,S,!1,p)&&V}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const g=u.g[p];for(let S=0;S<g.length;S++)q(g[S]);delete u.g[p],u.h--}}this.G=null},ft.prototype.J=function(u,p,g,S){return this.i.add(String(u),p,!1,g,S)},ft.prototype.K=function(u,p,g,S){return this.i.add(String(u),p,!0,g,S)};function M(u,p,g,S){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let V=!0;for(let U=0;U<p.length;++U){const G=p[U];if(G&&!G.da&&G.capture==g){const me=G.listener,pt=G.ha||G.src;G.fa&&vt(u.i,G),V=me.call(pt,S)!==!1&&V}}return V&&!S.defaultPrevented}function B(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:a.setTimeout(u,p||0)}function J(u){u.g=B(()=>{u.g=null,u.i&&(u.i=!1,J(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class K extends j{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function W(u){j.call(this),this.h=u,this.g={}}f(W,j);var se=[];function Ie(u){ne(u.g,function(p,g){this.g.hasOwnProperty(g)&&ha(p)},u),u.g={}}W.prototype.N=function(){W.Z.N.call(this),Ie(this)},W.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ae=a.JSON.stringify,en=a.JSON.parse,Hi=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Un(){}function bc(){}var Tr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ys(){I.call(this,"d")}f(Ys,I);function ga(){I.call(this,"c")}f(ga,I);var er={},_c=null;function Xs(){return _c=_c||new ft}er.Ia="serverreachability";function ey(u){I.call(this,er.Ia,u)}f(ey,I);function ya(u){const p=Xs();D(p,new ey(p))}er.STAT_EVENT="statevent";function ty(u,p){I.call(this,er.STAT_EVENT,u),this.stat=p}f(ty,I);function Wt(u){const p=Xs();D(p,new ty(p,u))}er.Ja="timingevent";function ny(u,p){I.call(this,er.Ja,u),this.size=p}f(ny,I);function xa(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function va(){this.g=!0}va.prototype.ua=function(){this.g=!1};function _I(u,p,g,S,V,U){u.info(function(){if(u.g)if(U){var G="",me=U.split("&");for(let Oe=0;Oe<me.length;Oe++){var pt=me[Oe].split("=");if(pt.length>1){const wt=pt[0];pt=pt[1];const nr=wt.split("_");G=nr.length>=2&&nr[1]=="type"?G+(wt+"="+pt+"&"):G+(wt+"=redacted&")}}}else G=null;else G=U;return"XMLHTTP REQ ("+S+") [attempt "+V+"]: "+p+`
`+g+`
`+G})}function EI(u,p,g,S,V,U,G){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+V+"]: "+p+`
`+g+`
`+U+" "+G})}function Wi(u,p,g,S){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+TI(u,g)+(S?" "+S:"")})}function NI(u,p){u.info(function(){return"TIMEOUT: "+p})}va.prototype.info=function(){};function TI(u,p){if(!u.g)return p;if(!p)return null;try{const U=JSON.parse(p);if(U){for(u=0;u<U.length;u++)if(Array.isArray(U[u])){var g=U[u];if(!(g.length<2)){var S=g[1];if(Array.isArray(S)&&!(S.length<1)){var V=S[0];if(V!="noop"&&V!="stop"&&V!="close")for(let G=1;G<S.length;G++)S[G]=""}}}}return Ae(U)}catch{return p}}var Ec={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ry={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},sy;function Oh(){}f(Oh,Un),Oh.prototype.g=function(){return new XMLHttpRequest},sy=new Oh;function wa(u){return encodeURIComponent(String(u))}function SI(u){var p=1;u=u.split(":");const g=[];for(;p>0&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function Qr(u,p,g,S){this.j=u,this.i=p,this.l=g,this.S=S||1,this.V=new W(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new iy}function iy(){this.i=null,this.g="",this.h=!1}var oy={},Lh={};function Vh(u,p,g){u.M=1,u.A=Tc(tr(p)),u.u=g,u.R=!0,ay(u,null)}function ay(u,p){u.F=Date.now(),Nc(u),u.B=tr(u.A);var g=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),wy(g.i,"t",S),u.C=0,g=u.j.L,u.h=new iy,u.g=My(u.j,g?p:null,!u.u),u.P>0&&(u.O=new K(d(u.Y,u,u.g),u.P)),p=u.V,g=u.g,S=u.ba;var V="readystatechange";Array.isArray(V)||(V&&(se[0]=V.toString()),V=se);for(let U=0;U<V.length;U++){const G=xe(g,V[U],S||p.handleEvent,!1,p.h||p);if(!G)break;p.g[G.key]=G}p=u.J?ye(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),ya(),_I(u.i,u.v,u.B,u.l,u.S,u.u)}Qr.prototype.ba=function(u){u=u.target;const p=this.O;p&&Xr(u)==3?p.j():this.Y(u)},Qr.prototype.Y=function(u){try{if(u==this.g)e:{const me=Xr(this.g),pt=this.g.ya(),Oe=this.g.ca();if(!(me<3)&&(me!=3||this.g&&(this.h.h||this.g.la()||Iy(this.g)))){this.K||me!=4||pt==7||(pt==8||Oe<=0?ya(3):ya(2)),Mh(this);var p=this.g.ca();this.X=p;var g=II(this);if(this.o=p==200,EI(this.i,this.v,this.B,this.l,this.S,me,p),this.o){if(this.U&&!this.L){t:{if(this.g){var S,V=this.g;if((S=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(S)){var U=S;break t}}U=null}if(u=U)Wi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fh(this,u);else{this.o=!1,this.m=3,Wt(12),Zs(this),ba(this);break e}}if(this.R){u=!0;let wt;for(;!this.K&&this.C<g.length;)if(wt=kI(this,g),wt==Lh){me==4&&(this.m=4,Wt(14),u=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==oy){this.m=4,Wt(15),Wi(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else Wi(this.i,this.l,wt,null),Fh(this,wt);if(ly(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),me!=4||g.length!=0||this.h.h||(this.m=1,Wt(16),u=!1),this.o=this.o&&u,!u)Wi(this.i,this.l,g,"[Invalid Chunked Response]"),Zs(this),ba(this);else if(g.length>0&&!this.W){this.W=!0;var G=this.j;G.g==this&&G.aa&&!G.P&&(G.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Gh(G),G.P=!0,Wt(11))}}else Wi(this.i,this.l,g,null),Fh(this,g);me==4&&Zs(this),this.o&&!this.K&&(me==4?Dy(this.j,this):(this.o=!1,Nc(this)))}else $I(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,Wt(12)):(this.m=0,Wt(13)),Zs(this),ba(this)}}}catch{}finally{}};function II(u){if(!ly(u))return u.g.la();const p=Iy(u.g);if(p==="")return"";let g="";const S=p.length,V=Xr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Zs(u),ba(u),"";u.h.i=new a.TextDecoder}for(let U=0;U<S;U++)u.h.h=!0,g+=u.h.i.decode(p[U],{stream:!(V&&U==S-1)});return p.length=0,u.h.g+=g,u.C=0,u.h.g}function ly(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function kI(u,p){var g=u.C,S=p.indexOf(`
`,g);return S==-1?Lh:(g=Number(p.substring(g,S)),isNaN(g)?oy:(S+=1,S+g>p.length?Lh:(p=p.slice(S,S+g),u.C=S+g,p)))}Qr.prototype.cancel=function(){this.K=!0,Zs(this)};function Nc(u){u.T=Date.now()+u.H,cy(u,u.H)}function cy(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=xa(d(u.aa,u),p)}function Mh(u){u.D&&(a.clearTimeout(u.D),u.D=null)}Qr.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(NI(this.i,this.B),this.M!=2&&(ya(),Wt(17)),Zs(this),this.m=2,ba(this)):cy(this,this.T-u)};function ba(u){u.j.I==0||u.K||Dy(u.j,u)}function Zs(u){Mh(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Ie(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Fh(u,p){try{var g=u.j;if(g.I!=0&&(g.g==u||Uh(g.h,u))){if(!u.L&&Uh(g.h,u)&&g.I==3){try{var S=g.Ba.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var V=S;if(V[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)jc(g),kc(g);else break e;Wh(g),Wt(18)}}else g.xa=V[1],0<g.xa-g.K&&V[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=xa(d(g.Va,g),6e3));hy(g.h)<=1&&g.ta&&(g.ta=void 0)}else ti(g,11)}else if((u.L||g.g==u)&&jc(g),!k(p))for(V=g.Ba.g.parse(p),p=0;p<V.length;p++){let Oe=V[p];const wt=Oe[0];if(!(wt<=g.K))if(g.K=wt,Oe=Oe[1],g.I==2)if(Oe[0]=="c"){g.M=Oe[1],g.ba=Oe[2];const nr=Oe[3];nr!=null&&(g.ka=nr,g.j.info("VER="+g.ka));const ni=Oe[4];ni!=null&&(g.za=ni,g.j.info("SVER="+g.za));const Zr=Oe[5];Zr!=null&&typeof Zr=="number"&&Zr>0&&(S=1.5*Zr,g.O=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const es=u.g;if(es){const Rc=es.g?es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rc){var U=S.h;U.g||Rc.indexOf("spdy")==-1&&Rc.indexOf("quic")==-1&&Rc.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Bh(U,U.h),U.h=null))}if(S.G){const Kh=es.g?es.g.getResponseHeader("X-HTTP-Session-Id"):null;Kh&&(S.wa=Kh,Fe(S.J,S.G,Kh))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),S=g;var G=u;if(S.na=Vy(S,S.L?S.ba:null,S.W),G.L){fy(S.h,G);var me=G,pt=S.O;pt&&(me.H=pt),me.D&&(Mh(me),Nc(me)),S.g=G}else Ry(S);g.i.length>0&&Ac(g)}else Oe[0]!="stop"&&Oe[0]!="close"||ti(g,7);else g.I==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?ti(g,7):Hh(g):Oe[0]!="noop"&&g.l&&g.l.qa(Oe),g.A=0)}}ya(4)}catch{}}var AI=class{constructor(u,p){this.g=u,this.map=p}};function uy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function dy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function hy(u){return u.h?1:u.g?u.g.size:0}function Uh(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Bh(u,p){u.g?u.g.add(p):u.h=p}function fy(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}uy.prototype.cancel=function(){if(this.i=py(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function py(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.G);return p}return w(u.i)}var my=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jI(u,p){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const S=u[g].indexOf("=");let V,U=null;S>=0?(V=u[g].substring(0,S),U=u[g].substring(S+1)):V=u[g],p(V,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Jr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Jr?(this.l=u.l,_a(this,u.j),this.o=u.o,this.g=u.g,Ea(this,u.u),this.h=u.h,$h(this,by(u.i)),this.m=u.m):u&&(p=String(u).match(my))?(this.l=!1,_a(this,p[1]||"",!0),this.o=Na(p[2]||""),this.g=Na(p[3]||"",!0),Ea(this,p[4]),this.h=Na(p[5]||"",!0),$h(this,p[6]||"",!0),this.m=Na(p[7]||"")):(this.l=!1,this.i=new Sa(null,this.l))}Jr.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(Ta(p,gy,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Ta(p,gy,!0),"@"),u.push(wa(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Ta(g,g.charAt(0)=="/"?PI:RI,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Ta(g,OI)),u.join("")},Jr.prototype.resolve=function(u){const p=tr(this);let g=!!u.j;g?_a(p,u.j):g=!!u.o,g?p.o=u.o:g=!!u.g,g?p.g=u.g:g=u.u!=null;var S=u.h;if(g)Ea(p,u.u);else if(g=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var V=p.h.lastIndexOf("/");V!=-1&&(S=p.h.slice(0,V+1)+S)}if(V=S,V==".."||V==".")S="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){S=V.lastIndexOf("/",0)==0,V=V.split("/");const U=[];for(let G=0;G<V.length;){const me=V[G++];me=="."?S&&G==V.length&&U.push(""):me==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),S&&G==V.length&&U.push("")):(U.push(me),S=!0)}S=U.join("/")}else S=V}return g?p.h=S:g=u.i.toString()!=="",g?$h(p,by(u.i)):g=!!u.m,g&&(p.m=u.m),p};function tr(u){return new Jr(u)}function _a(u,p,g){u.j=g?Na(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Ea(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function $h(u,p,g){p instanceof Sa?(u.i=p,LI(u.i,u.l)):(g||(p=Ta(p,DI)),u.i=new Sa(p,u.l))}function Fe(u,p,g){u.i.set(p,g)}function Tc(u){return Fe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Na(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ta(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,CI),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function CI(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var gy=/[#\/\?@]/g,RI=/[#\?:]/g,PI=/[#\?]/g,DI=/[#\?@]/g,OI=/#/g;function Sa(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function ei(u){u.g||(u.g=new Map,u.h=0,u.i&&jI(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Sa.prototype,t.add=function(u,p){ei(this),this.i=null,u=Gi(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function yy(u,p){ei(u),p=Gi(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function xy(u,p){return ei(u),p=Gi(u,p),u.g.has(p)}t.forEach=function(u,p){ei(this),this.g.forEach(function(g,S){g.forEach(function(V){u.call(p,V,S,this)},this)},this)};function vy(u,p){ei(u);let g=[];if(typeof p=="string")xy(u,p)&&(g=g.concat(u.g.get(Gi(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)g=g.concat(u[p]);return g}t.set=function(u,p){return ei(this),this.i=null,u=Gi(this,u),xy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=vy(this,u),u.length>0?String(u[0]):p):p};function wy(u,p,g){yy(u,p),g.length>0&&(u.i=null,u.g.set(Gi(u,p),w(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let S=0;S<p.length;S++){var g=p[S];const V=wa(g);g=vy(this,g);for(let U=0;U<g.length;U++){let G=V;g[U]!==""&&(G+="="+wa(g[U])),u.push(G)}}return this.i=u.join("&")};function by(u){const p=new Sa;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Gi(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function LI(u,p){p&&!u.j&&(ei(u),u.i=null,u.g.forEach(function(g,S){const V=S.toLowerCase();S!=V&&(yy(this,S),wy(this,V,g))},u)),u.j=p}function VI(u,p){const g=new va;if(a.Image){const S=new Image;S.onload=h(Yr,g,"TestLoadImage: loaded",!0,p,S),S.onerror=h(Yr,g,"TestLoadImage: error",!1,p,S),S.onabort=h(Yr,g,"TestLoadImage: abort",!1,p,S),S.ontimeout=h(Yr,g,"TestLoadImage: timeout",!1,p,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else p(!1)}function MI(u,p){const g=new va,S=new AbortController,V=setTimeout(()=>{S.abort(),Yr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:S.signal}).then(U=>{clearTimeout(V),U.ok?Yr(g,"TestPingServer: ok",!0,p):Yr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),Yr(g,"TestPingServer: error",!1,p)})}function Yr(u,p,g,S,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),S(g)}catch{}}function FI(){this.g=new Hi}function zh(u){this.i=u.Sb||null,this.h=u.ab||!1}f(zh,Un),zh.prototype.g=function(){return new Sc(this.i,this.h)};function Sc(u,p){ft.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Sc,ft),t=Sc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,ka(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||a).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ia(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ka(this)),this.g&&(this.readyState=3,ka(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_y(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function _y(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Ia(this):ka(this),this.readyState==3&&_y(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Ia(this))},t.Na=function(u){this.g&&(this.response=u,Ia(this))},t.ga=function(){this.g&&Ia(this)};function Ia(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ka(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function ka(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ey(u){let p="";return ne(u,function(g,S){p+=S,p+=":",p+=g,p+=`\r
`}),p}function qh(u,p,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=Ey(g),typeof u=="string"?g!=null&&wa(g):Fe(u,p,g))}function Qe(u){ft.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Qe,ft);var UI=/^https?$/i,BI=["POST","PUT"];t=Qe.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():sy.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(U){Ny(this,U);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var V in S)g.set(V,S[V]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const U of S.keys())g.set(U,S.get(U));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),V=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(BI,p,void 0)>=0)||S||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,G]of g)this.g.setRequestHeader(U,G);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(U){Ny(this,U)}};function Ny(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,Ty(u),Ic(u)}function Ty(u){u.A||(u.A=!0,D(u,"complete"),D(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,D(this,"complete"),D(this,"abort"),Ic(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ic(this,!0)),Qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Sy(this):this.Xa())},t.Xa=function(){Sy(this)};function Sy(u){if(u.h&&typeof i<"u"){if(u.v&&Xr(u)==4)setTimeout(u.Ca.bind(u),0);else if(D(u,"readystatechange"),Xr(u)==4){u.h=!1;try{const U=u.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var S;if(S=U===0){let G=String(u.D).match(my)[1]||null;!G&&a.self&&a.self.location&&(G=a.self.location.protocol.slice(0,-1)),S=!UI.test(G?G.toLowerCase():"")}g=S}if(g)D(u,"complete"),D(u,"success");else{u.o=6;try{var V=Xr(u)>2?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.ca()+"]",Ty(u)}}finally{Ic(u)}}}}function Ic(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,p||D(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Xr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Xr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),en(p)}};function Iy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function $I(u){const p={};u=(u.g&&Xr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(k(u[S]))continue;var g=SI(u[S]);const V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=p[V]||[];p[V]=U,U.push(g)}re(p,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Aa(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function ky(u){this.za=0,this.i=[],this.j=new va,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Aa("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Aa("baseRetryDelayMs",5e3,u),this.Za=Aa("retryDelaySeedMs",1e4,u),this.Ta=Aa("forwardChannelMaxRetries",2,u),this.va=Aa("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new uy(u&&u.concurrentRequestLimit),this.Ba=new FI,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ky.prototype,t.ka=8,t.I=1,t.connect=function(u,p,g,S){Wt(0),this.W=u,this.H=p||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.J=Vy(this,null,this.W),Ac(this)};function Hh(u){if(Ay(u),u.I==3){var p=u.V++,g=tr(u.J);if(Fe(g,"SID",u.M),Fe(g,"RID",p),Fe(g,"TYPE","terminate"),ja(u,g),p=new Qr(u,u.j,p),p.M=2,p.A=Tc(tr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.A,g=!0),g||(p.g=My(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Nc(p)}Ly(u)}function kc(u){u.g&&(Gh(u),u.g.cancel(),u.g=null)}function Ay(u){kc(u),u.v&&(a.clearTimeout(u.v),u.v=null),jc(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function Ac(u){if(!dy(u.h)&&!u.m){u.m=!0;var p=u.Ea;C||_(),L||(C(),L=!0),b.add(p,u),u.D=0}}function zI(u,p){return hy(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=xa(d(u.Ea,u,p),Oy(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const V=new Qr(this,this.j,u);let U=this.o;if(this.U&&(U?(U=ye(U),De(U,this.U)):U=this.U),this.u!==null||this.R||(V.J=U,U=null),this.S)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,p>4096){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=Cy(this,V,p),g=tr(this.J),Fe(g,"RID",u),Fe(g,"CVER",22),this.G&&Fe(g,"X-HTTP-Session-Id",this.G),ja(this,g),U&&(this.R?p="headers="+wa(Ey(U))+"&"+p:this.u&&qh(g,this.u,U)),Bh(this.h,V),this.Ra&&Fe(g,"TYPE","init"),this.S?(Fe(g,"$req",p),Fe(g,"SID","null"),V.U=!0,Vh(V,g,null)):Vh(V,g,p),this.I=2}}else this.I==3&&(u?jy(this,u):this.i.length==0||dy(this.h)||jy(this))};function jy(u,p){var g;p?g=p.l:g=u.V++;const S=tr(u.J);Fe(S,"SID",u.M),Fe(S,"RID",g),Fe(S,"AID",u.K),ja(u,S),u.u&&u.o&&qh(S,u.u,u.o),g=new Qr(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),p&&(u.i=p.G.concat(u.i)),p=Cy(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Bh(u.h,g),Vh(g,S,p)}function ja(u,p){u.H&&ne(u.H,function(g,S){Fe(p,S,g)}),u.l&&ne({},function(g,S){Fe(p,S,g)})}function Cy(u,p,g){g=Math.min(u.i.length,g);const S=u.l?d(u.l.Ka,u.l,u):null;e:{var V=u.i;let me=-1;for(;;){const pt=["count="+g];me==-1?g>0?(me=V[0].g,pt.push("ofs="+me)):me=0:pt.push("ofs="+me);let Oe=!0;for(let wt=0;wt<g;wt++){var U=V[wt].g;const nr=V[wt].map;if(U-=me,U<0)me=Math.max(0,V[wt].g-100),Oe=!1;else try{U="req"+U+"_"||"";try{var G=nr instanceof Map?nr:Object.entries(nr);for(const[ni,Zr]of G){let es=Zr;l(Zr)&&(es=Ae(Zr)),pt.push(U+ni+"="+encodeURIComponent(es))}}catch(ni){throw pt.push(U+"type="+encodeURIComponent("_badmap")),ni}}catch{S&&S(nr)}}if(Oe){G=pt.join("&");break e}}G=void 0}return u=u.i.splice(0,g),p.G=u,G}function Ry(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;C||_(),L||(C(),L=!0),b.add(p,u),u.A=0}}function Wh(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=xa(d(u.Da,u),Oy(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Py(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=xa(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Wt(10),kc(this),Py(this))};function Gh(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function Py(u){u.g=new Qr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=tr(u.na);Fe(p,"RID","rpc"),Fe(p,"SID",u.M),Fe(p,"AID",u.K),Fe(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&Fe(p,"TO",u.ia),Fe(p,"TYPE","xmlhttp"),ja(u,p),u.u&&u.o&&qh(p,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=Tc(tr(p)),g.u=null,g.R=!0,ay(g,u)}t.Va=function(){this.C!=null&&(this.C=null,kc(this),Wh(this),Wt(19))};function jc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Dy(u,p){var g=null;if(u.g==p){jc(u),Gh(u),u.g=null;var S=2}else if(Uh(u.h,p))g=p.G,fy(u.h,p),S=1;else return;if(u.I!=0){if(p.o)if(S==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var V=u.D;S=Xs(),D(S,new ny(S,g)),Ac(u)}else Ry(u);else if(V=p.m,V==3||V==0&&p.X>0||!(S==1&&zI(u,p)||S==2&&Wh(u)))switch(g&&g.length>0&&(p=u.h,p.i=p.i.concat(g)),V){case 1:ti(u,5);break;case 4:ti(u,10);break;case 3:ti(u,6);break;default:ti(u,2)}}}function Oy(u,p){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*p}function ti(u,p){if(u.j.info("Error code "+p),p==2){var g=d(u.bb,u),S=u.Ua;const V=!S;S=new Jr(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_a(S,"https"),Tc(S),V?VI(S.toString(),g):MI(S.toString(),g)}else Wt(2);u.I=0,u.l&&u.l.pa(p),Ly(u),Ay(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function Ly(u){if(u.I=0,u.ja=[],u.l){const p=py(u.h);(p.length!=0||u.i.length!=0)&&(y(u.ja,p),y(u.ja,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.oa()}}function Vy(u,p,g){var S=g instanceof Jr?tr(g):new Jr(g);if(S.g!="")p&&(S.g=p+"."+S.g),Ea(S,S.u);else{var V=a.location;S=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;const U=new Jr(null);S&&_a(U,S),p&&(U.g=p),V&&Ea(U,V),g&&(U.h=g),S=U}return g=u.G,p=u.wa,g&&p&&Fe(S,g,p),Fe(S,"VER",u.ka),ja(u,S),S}function My(u,p,g){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new Qe(new zh({ab:g})):new Qe(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fy(){}t=Fy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Cc(){}Cc.prototype.g=function(u,p){return new yn(u,p)};function yn(u,p){ft.call(this),this.g=new ky(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!k(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!k(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Ki(this)}f(yn,ft),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Hh(this.g)},yn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=Ae(u),u=g);p.i.push(new AI(p.Ya++,u)),p.I==3&&Ac(p)},yn.prototype.N=function(){this.g.l=null,delete this.j,Hh(this.g),delete this.g,yn.Z.N.call(this)};function Uy(u){Ys.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}f(Uy,Ys);function By(){ga.call(this),this.status=1}f(By,ga);function Ki(u){this.g=u}f(Ki,Fy),Ki.prototype.ra=function(){D(this.g,"a")},Ki.prototype.qa=function(u){D(this.g,new Uy(u))},Ki.prototype.pa=function(u){D(this.g,new By)},Ki.prototype.oa=function(){D(this.g,"b")},Cc.prototype.createWebChannel=Cc.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,IN=function(){return new Cc},SN=function(){return Xs()},TN=er,nm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ec.NO_ERROR=0,Ec.TIMEOUT=8,Ec.HTTP_ERROR=6,bu=Ec,ry.COMPLETE="complete",NN=ry,bc.EventType=Tr,Tr.OPEN="a",Tr.CLOSE="b",Tr.ERROR="c",Tr.MESSAGE="d",ft.prototype.listen=ft.prototype.J,Qa=bc,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,EN=Qe}).apply(typeof Yc<"u"?Yc:typeof self<"u"?self:typeof window<"u"?window:{});const Gv="@firebase/firestore",Kv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new Zd("@firebase/firestore");function Xi(){return ji.logLevel}function X(t,...e){if(ji.logLevel<=be.DEBUG){const n=e.map(Gg);ji.debug(`Firestore (${na}): ${t}`,...n)}}function $r(t,...e){if(ji.logLevel<=be.ERROR){const n=e.map(Gg);ji.error(`Firestore (${na}): ${t}`,...n)}}function Fl(t,...e){if(ji.logLevel<=be.WARN){const n=e.map(Gg);ji.warn(`Firestore (${na}): ${t}`,...n)}}function Gg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,kN(t,r,n)}function kN(t,e,n){let r=`FIRESTORE (${na}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $r(r),new Error(r)}function je(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||kN(e,s,r)}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends An{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class SD{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){je(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Or,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Or)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string",31837,{l:r}),new ND(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class ID{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kD{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ID(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){je(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Qv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Qv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=jD(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function rm(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Df(s)===Df(i)?_e(s,i):Df(s)?1:-1}return _e(t.length,e.length)}const CD=55296,RD=57343;function Df(t){const e=t.charCodeAt(0);return e>=CD&&e<=RD}function Uo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="__name__";class or{constructor(e,n,r){n===void 0?n=0:n>e.length&&ce(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ce(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return or.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof or?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=or.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return _e(e.length,n.length)}static compareSegments(e,n){const r=or.isNumericId(e),s=or.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?or.extractNumericId(e).compare(or.extractNumericId(n)):rm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ks.fromString(e.substring(4,e.length-2))}}class Le extends or{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const PD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends or{construct(e,n,r){return new It(e,n,r)}static isValidIdentifier(e){return PD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jv}static keyField(){return new It([Jv])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Q($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Q($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Le.fromString(e))}static fromName(e){return new ae(Le.fromString(e).popFirst(5))}static empty(){return new ae(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Le(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t,e,n){if(!n)throw new Q($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DD(t,e,n,r){if(e===!0&&r===!0)throw new Q($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Yv(t){if(!ae.isDocumentKey(t))throw new Q($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Xv(t){if(ae.isDocumentKey(t))throw new Q($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function oh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce(12329,{type:typeof t})}function xr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=oh(t);throw new Q($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function OD(t,e){if(e<=0)throw new Q($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ic(t,e){if(!jN(t))throw new Q($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Q($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=-62135596800,ew=1e6;class Ce{static now(){return Ce.fromMillis(Date.now())}static fromDate(e){return Ce.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ew);return new Ce(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Zv)throw new Q($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ew}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ic(e,Ce._jsonSchema))return new Ce(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Zv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ce._jsonSchemaVersion="firestore/timestamp/1.0",Ce._jsonSchema={type:dt("string",Ce._jsonSchemaVersion),seconds:dt("number"),nanoseconds:dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new Ce(0,0))}static max(){return new ue(new Ce(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=-1;function LD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new Ce(n+1,0):new Ce(n,r));return new Ps(s,ae.empty(),e)}function VD(t){return new Ps(t.readTime,t.key,Ul)}class Ps{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ps(ue.min(),ae.empty(),Ul)}static max(){return new Ps(ue.max(),ae.empty(),Ul)}}function MD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==FD)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function BD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ah.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg=-1;function lh(t){return t==null}function fd(t){return t===0&&1/t==-1/0}function $D(t){return typeof t=="number"&&Number.isInteger(t)&&!fd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="";function zD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=tw(e)),e=qD(t.get(n),e);return tw(e)}function qD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case CN:n+="";break;default:n+=i}}return n}function tw(t){return t+CN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function RN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xc(this.root,e,this.comparator,!0)}}class Xc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??St.RED,this.left=s??St.EMPTY,this.right=i??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new St(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return St.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ce(27949);return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw ce(57766)}get value(){throw ce(16141)}get color(){throw ce(16727)}get left(){throw ce(29726)}get right(){throw ce(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rw(this.data.getIterator())}getIteratorFrom(e){return new rw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yt(this.comparator);return n.data=e,n}}class rw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new bn([])}unionWith(e){let n=new yt(It.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new PN("Invalid base64 string: "+i):i}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const HD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ds(t){if(je(!!t,39018),typeof t=="string"){let e=0;const n=HD.exec(t);if(je(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Os(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="server_timestamp",ON="__type__",LN="__previous_value__",VN="__local_write_time__";function Jg(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ON])==null?void 0:r.stringValue)===DN}function ch(t){const e=t.mapValue.fields[LN];return Jg(e)?ch(e):e}function Bl(t){const e=Ds(t.mapValue.fields[VN].timestampValue);return new Ce(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,n,r,s,i,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const pd="(default)";class $l{constructor(e,n){this.projectId=e,this.database=n||pd}static empty(){return new $l("","")}get isDefaultDatabase(){return this.database===pd}isEqual(e){return e instanceof $l&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="__type__",GD="__max__",Zc={mapValue:{}},FN="__vector__",md="value";function Ls(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jg(t)?4:QD(t)?9007199254740991:KD(t)?10:11:ce(28295,{value:t})}function vr(t,e){if(t===e)return!0;const n=Ls(t);if(n!==Ls(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bl(t).isEqual(Bl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Ds(s.timestampValue),l=Ds(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Os(s.bytesValue).isEqual(Os(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return nt(s.geoPointValue.latitude)===nt(i.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return nt(s.integerValue)===nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=nt(s.doubleValue),l=nt(i.doubleValue);return a===l?fd(a)===fd(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Uo(t.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(nw(a)!==nw(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!vr(a[c],l[c])))return!1;return!0}(t,e);default:return ce(52216,{left:t})}}function zl(t,e){return(t.values||[]).find(n=>vr(n,e))!==void 0}function Bo(t,e){if(t===e)return 0;const n=Ls(t),r=Ls(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=nt(i.integerValue||i.doubleValue),c=nt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return sw(t.timestampValue,e.timestampValue);case 4:return sw(Bl(t),Bl(e));case 5:return rm(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Os(i),c=Os(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=_e(l[d],c[d]);if(h!==0)return h}return _e(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=_e(nt(i.latitude),nt(a.latitude));return l!==0?l:_e(nt(i.longitude),nt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return iw(t.arrayValue,e.arrayValue);case 10:return function(i,a){var m,w,y,E;const l=i.fields||{},c=a.fields||{},d=(m=l[md])==null?void 0:m.arrayValue,h=(w=c[md])==null?void 0:w.arrayValue,f=_e(((y=d==null?void 0:d.values)==null?void 0:y.length)||0,((E=h==null?void 0:h.values)==null?void 0:E.length)||0);return f!==0?f:iw(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Zc.mapValue&&a===Zc.mapValue)return 0;if(i===Zc.mapValue)return 1;if(a===Zc.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=rm(c[f],h[f]);if(m!==0)return m;const w=Bo(l[c[f]],d[h[f]]);if(w!==0)return w}return _e(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ce(23264,{he:n})}}function sw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=Ds(t),r=Ds(e),s=_e(n.seconds,r.seconds);return s!==0?s:_e(n.nanos,r.nanos)}function iw(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Bo(n[s],r[s]);if(i)return i}return _e(n.length,r.length)}function $o(t){return sm(t)}function sm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ds(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=sm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${sm(n.fields[a])}`;return s+"}"}(t.mapValue):ce(61005,{value:t})}function _u(t){switch(Ls(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ch(t);return e?16+_u(e):16;case 5:return 2*t.stringValue.length;case 6:return Os(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+_u(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Gs(r.fields,(i,a)=>{s+=i.length+_u(a)}),s}(t.mapValue);default:throw ce(13486,{value:t})}}function ow(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function im(t){return!!t&&"integerValue"in t}function Yg(t){return!!t&&"arrayValue"in t}function aw(t){return!!t&&"nullValue"in t}function lw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Eu(t){return!!t&&"mapValue"in t}function KD(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[MN])==null?void 0:r.stringValue)===FN}function ul(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Gs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ul(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ul(t.arrayValue.values[n]);return e}return{...t}}function QD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===GD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Eu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ul(n)}setAll(e){let n=It.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=ul(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Eu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Eu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Gs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ln(ul(this.value))}}function UN(t){const e=[];return Gs(t.fields,(n,r)=>{const s=new It([n]);if(Eu(r)){const i=UN(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Mt(e,0,ue.min(),ue.min(),ue.min(),ln.empty(),0)}static newFoundDocument(e,n,r,s){return new Mt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new Mt(e,2,n,ue.min(),ue.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,ue.min(),ue.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){this.position=e,this.inclusive=n}}function cw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=ae.comparator(ae.fromName(a.referenceValue),n.key):r=Bo(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function uw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n="asc"){this.field=e,this.dir=n}}function JD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BN=class{};class ct extends BN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new XD(e,n,r):n==="array-contains"?new tO(e,r):n==="in"?new nO(e,r):n==="not-in"?new rO(e,r):n==="array-contains-any"?new sO(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ZD(e,r):new eO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Bo(n,this.value)):n!==null&&Ls(this.value)===Ls(n)&&this.matchesComparison(Bo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends BN{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xn(e,n)}matches(e){return $N(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $N(t){return t.op==="and"}function zN(t){return YD(t)&&$N(t)}function YD(t){for(const e of t.filters)if(e instanceof Xn)return!1;return!0}function om(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+$o(t.value);if(zN(t))return t.filters.map(e=>om(e)).join(",");{const e=t.filters.map(n=>om(n)).join(",");return`${t.op}(${e})`}}function qN(t,e){return t instanceof ct?function(r,s){return s instanceof ct&&r.op===s.op&&r.field.isEqual(s.field)&&vr(r.value,s.value)}(t,e):t instanceof Xn?function(r,s){return s instanceof Xn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&qN(a,s.filters[l]),!0):!1}(t,e):void ce(19439)}function HN(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${$o(n.value)}`}(t):t instanceof Xn?function(n){return n.op.toString()+" {"+n.getFilters().map(HN).join(" ,")+"}"}(t):"Filter"}class XD extends ct{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class ZD extends ct{constructor(e,n){super(e,"in",n),this.keys=WN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class eO extends ct{constructor(e,n){super(e,"not-in",n),this.keys=WN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function WN(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class tO extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yg(n)&&zl(n.arrayValue,this.value)}}class nO extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zl(this.value.arrayValue,n)}}class rO extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zl(this.value.arrayValue,n)}}class sO extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function dw(t,e=null,n=[],r=[],s=null,i=null,a=null){return new iO(t,e,n,r,s,i,a)}function Xg(t){const e=he(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>om(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),lh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$o(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$o(r)).join(",")),e.Te=n}return e.Te}function Zg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!JD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uw(t.startAt,e.startAt)&&uw(t.endAt,e.endAt)}function am(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oO(t,e,n,r,s,i,a,l){return new ia(t,e,n,r,s,i,a,l)}function e0(t){return new ia(t)}function hw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GN(t){return t.collectionGroup!==null}function dl(t){const e=he(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new yt(It.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ql(i,r))}),n.has(It.keyField().canonicalString())||e.Ie.push(new ql(It.keyField(),r))}return e.Ie}function pr(t){const e=he(t);return e.Ee||(e.Ee=aO(e,dl(t))),e.Ee}function aO(t,e){if(t.limitType==="F")return dw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ql(s.field,i)});const n=t.endAt?new gd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gd(t.startAt.position,t.startAt.inclusive):null;return dw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lm(t,e){const n=t.filters.concat([e]);return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yd(t,e,n){return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uh(t,e){return Zg(pr(t),pr(e))&&t.limitType===e.limitType}function KN(t){return`${Xg(pr(t))}|lt:${t.limitType}`}function Zi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>HN(s)).join(", ")}]`),lh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>$o(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>$o(s)).join(",")),`Target(${r})`}(pr(t))}; limitType=${t.limitType})`}function dh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ae.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of dl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const d=cw(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,dl(r),s)||r.endAt&&!function(a,l,c){const d=cw(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,dl(r),s))}(t,e)}function lO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function QN(t){return(e,n)=>{let r=!1;for(const s of dl(t)){const i=cO(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function cO(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Bo(c,d):ce(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return RN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=new Ke(ae.comparator);function zr(){return uO}const JN=new Ke(ae.comparator);function Ja(...t){let e=JN;for(const n of t)e=e.insert(n.key,n);return e}function YN(t){let e=JN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function di(){return hl()}function XN(){return hl()}function hl(){return new Ui(t=>t.toString(),(t,e)=>t.isEqual(e))}const dO=new Ke(ae.comparator),hO=new yt(ae.comparator);function Ee(...t){let e=hO;for(const n of t)e=e.add(n);return e}const fO=new yt(_e);function pO(){return fO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fd(e)?"-0":e}}function ZN(t){return{integerValue:""+t}}function mO(t,e){return $D(e)?ZN(e):t0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(){this._=void 0}}function gO(t,e,n){return t instanceof Hl?function(s,i){const a={fields:{[ON]:{stringValue:DN},[VN]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Jg(i)&&(i=ch(i)),i&&(a.fields[LN]=i),{mapValue:a}}(n,e):t instanceof Wl?tT(t,e):t instanceof Gl?nT(t,e):function(s,i){const a=eT(s,i),l=fw(a)+fw(s.Ae);return im(a)&&im(s.Ae)?ZN(l):t0(s.serializer,l)}(t,e)}function yO(t,e,n){return t instanceof Wl?tT(t,e):t instanceof Gl?nT(t,e):n}function eT(t,e){return t instanceof xd?function(r){return im(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Hl extends hh{}class Wl extends hh{constructor(e){super(),this.elements=e}}function tT(t,e){const n=rT(e);for(const r of t.elements)n.some(s=>vr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Gl extends hh{constructor(e){super(),this.elements=e}}function nT(t,e){let n=rT(e);for(const r of t.elements)n=n.filter(s=>!vr(s,r));return{arrayValue:{values:n}}}class xd extends hh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function fw(t){return nt(t.integerValue||t.doubleValue)}function rT(t){return Yg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,n){this.field=e,this.transform=n}}function vO(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Wl&&s instanceof Wl||r instanceof Gl&&s instanceof Gl?Uo(r.elements,s.elements,vr):r instanceof xd&&s instanceof xd?vr(r.Ae,s.Ae):r instanceof Hl&&s instanceof Hl}(t.transform,e.transform)}class wO{constructor(e,n){this.version=e,this.transformResults=n}}class On{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fh{}function sT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new n0(t.key,On.none()):new oc(t.key,t.data,On.none());{const n=t.data,r=ln.empty();let s=new yt(It.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Ks(t.key,r,new bn(s.toArray()),On.none())}}function bO(t,e,n){t instanceof oc?function(s,i,a){const l=s.value.clone(),c=mw(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ks?function(s,i,a){if(!Nu(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=mw(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(iT(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function fl(t,e,n,r){return t instanceof oc?function(i,a,l,c){if(!Nu(i.precondition,a))return l;const d=i.value.clone(),h=gw(i.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ks?function(i,a,l,c){if(!Nu(i.precondition,a))return l;const d=gw(i.fieldTransforms,c,a),h=a.data;return h.setAll(iT(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,l){return Nu(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function _O(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=eT(r.transform,s||null);i!=null&&(n===null&&(n=ln.empty()),n.set(r.field,i))}return n||null}function pw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Uo(r,s,(i,a)=>vO(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oc extends fh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ks extends fh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function iT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function mw(t,e,n){const r=new Map;je(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,yO(a,l,n[s]))}return r}function gw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,gO(i,a,e))}return r}class n0 extends fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EO extends fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&bO(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=XN();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=sT(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,(n,r)=>pw(n,r))&&Uo(this.baseMutations,e.baseMutations,(n,r)=>pw(n,r))}}class r0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){je(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return dO}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new r0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,Ne;function IO(t){switch(t){case $.OK:return ce(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ce(15467,{code:t})}}function oT(t){if(t===void 0)return $r("GRPC error has no .code"),$.UNKNOWN;switch(t){case at.OK:return $.OK;case at.CANCELLED:return $.CANCELLED;case at.UNKNOWN:return $.UNKNOWN;case at.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case at.INTERNAL:return $.INTERNAL;case at.UNAVAILABLE:return $.UNAVAILABLE;case at.UNAUTHENTICATED:return $.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case at.NOT_FOUND:return $.NOT_FOUND;case at.ALREADY_EXISTS:return $.ALREADY_EXISTS;case at.PERMISSION_DENIED:return $.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case at.ABORTED:return $.ABORTED;case at.OUT_OF_RANGE:return $.OUT_OF_RANGE;case at.UNIMPLEMENTED:return $.UNIMPLEMENTED;case at.DATA_LOSS:return $.DATA_LOSS;default:return ce(39323,{code:t})}}(Ne=at||(at={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=new ks([4294967295,4294967295],0);function yw(t){const e=kO().encode(t),n=new _N;return n.update(e),new Uint8Array(n.digest())}function xw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ks([n,r],0),new ks([s,i],0)]}class s0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ya(`Invalid padding: ${n}`);if(r<0)throw new Ya(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ya(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ya(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ks.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ks.fromNumber(r)));return s.compare(AO)===1&&(s=new ks([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=yw(e),[r,s]=xw(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new s0(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=yw(e),[r,s]=xw(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ya extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ph(ue.min(),s,new Ke(_e),zr(),Ee())}}class ac{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ac(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class aT{constructor(e,n){this.targetId=e,this.Ce=n}}class lT{constructor(e,n,r=Ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class vw{constructor(){this.ve=0,this.Fe=ww(),this.Me=Ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ee(),n=Ee(),r=Ee();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ce(38017,{changeType:i})}}),new ac(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ww()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class jO{constructor(e){this.Ge=e,this.ze=new Map,this.je=zr(),this.Je=eu(),this.He=eu(),this.Ye=new Ke(_e)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ce(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(am(i))if(r===0){const a=new ae(i.path);this.et(n,a,Mt.newNoDocument(a,ue.min()))}else je(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Os(r).toUint8Array()}catch(c){if(c instanceof PN)return Fl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new s0(a,s,i)}catch(c){return Fl(c instanceof Ya?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&am(l.target)){const c=new ae(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Mt.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Ee();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new ph(e,n,this.Ye,this.je,r);return this.je=zr(),this.Je=eu(),this.He=eu(),this.Ye=new Ke(_e),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new vw,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new yt(_e),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new yt(_e),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vw),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function eu(){return new Ke(ae.comparator)}function ww(){return new Ke(ae.comparator)}const CO={asc:"ASCENDING",desc:"DESCENDING"},RO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PO={and:"AND",or:"OR"};class DO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cm(t,e){return t.useProto3Json||lh(e)?e:{value:e}}function vd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OO(t,e){return vd(t,e.toTimestamp())}function mr(t){return je(!!t,49232),ue.fromTimestamp(function(n){const r=Ds(n);return new Ce(r.seconds,r.nanos)}(t))}function i0(t,e){return um(t,e).canonicalString()}function um(t,e){const n=function(s){return new Le(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function uT(t){const e=Le.fromString(t);return je(mT(e),10190,{key:e.toString()}),e}function dm(t,e){return i0(t.databaseId,e.path)}function Of(t,e){const n=uT(e);if(n.get(1)!==t.databaseId.projectId)throw new Q($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(hT(n))}function dT(t,e){return i0(t.databaseId,e)}function LO(t){const e=uT(t);return e.length===4?Le.emptyPath():hT(e)}function hm(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hT(t){return je(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function bw(t,e,n){return{name:dm(t,e),fields:n.value.mapValue.fields}}function VO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ce(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(je(h===void 0||typeof h=="string",58123),Ct.fromBase64String(h||"")):(je(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ct.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?$.UNKNOWN:oT(d.code);return new Q(h,d.message||"")}(a);n=new lT(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Of(t,r.document.name),i=mr(r.document.updateTime),a=r.document.createTime?mr(r.document.createTime):ue.min(),l=new ln({mapValue:{fields:r.document.fields}}),c=Mt.newFoundDocument(s,i,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Tu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Of(t,r.document),i=r.readTime?mr(r.readTime):ue.min(),a=Mt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Tu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Of(t,r.document),i=r.removedTargetIds||[];n=new Tu([],i,s,null)}else{if(!("filter"in e))return ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new SO(s,i),l=r.targetId;n=new aT(l,a)}}return n}function MO(t,e){let n;if(e instanceof oc)n={update:bw(t,e.key,e.value)};else if(e instanceof n0)n={delete:dm(t,e.key)};else if(e instanceof Ks)n={update:bw(t,e.key,e.data),updateMask:GO(e.fieldMask)};else{if(!(e instanceof EO))return ce(16599,{Vt:e.type});n={verify:dm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Hl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Wl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Gl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof xd)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw ce(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:OO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ce(27497)}(t,e.precondition)),n}function FO(t,e){return t&&t.length>0?(je(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?mr(s.updateTime):mr(i);return a.isEqual(ue.min())&&(a=mr(i)),new wO(a,s.transformResults||[])}(n,e))):[]}function UO(t,e){return{documents:[dT(t,e.path)]}}function BO(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dT(t,s);const i=function(d){if(d.length!==0)return pT(Xn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:eo(m.field),direction:qO(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=cm(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function $O(t){let e=LO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){je(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=fT(f);return m instanceof Xn&&zN(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(y){return new ql(to(y.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,lh(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,w=f.values||[];return new gd(w,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,w=f.values||[];return new gd(w,m)}(n.endAt)),oO(e,s,a,i,l,"F",c,d)}function zO(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=to(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=to(n.unaryFilter.field);return ct.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=to(n.unaryFilter.field);return ct.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=to(n.unaryFilter.field);return ct.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ce(61313);default:return ce(60726)}}(t):t.fieldFilter!==void 0?function(n){return ct.create(to(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ce(58110);default:return ce(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xn.create(n.compositeFilter.filters.map(r=>fT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ce(1026)}}(n.compositeFilter.op))}(t):ce(30097,{filter:t})}function qO(t){return CO[t]}function HO(t){return RO[t]}function WO(t){return PO[t]}function eo(t){return{fieldPath:t.canonicalString()}}function to(t){return It.fromServerFormat(t.fieldPath)}function pT(t){return t instanceof ct?function(n){if(n.op==="=="){if(lw(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NAN"}};if(aw(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lw(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NAN"}};if(aw(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(n.field),op:HO(n.op),value:n.value}}}(t):t instanceof Xn?function(n){const r=n.getFilters().map(s=>pT(s));return r.length===1?r[0]:{compositeFilter:{op:WO(n.op),filters:r}}}(t):ce(54877,{filter:t})}function GO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n,r,s,i=ue.min(),a=ue.min(),l=Ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e){this.yt=e}}function QO(t){const e=$O({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(){this.Cn=new YO}addToCollectionParentIndex(e,n){return this.Cn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Ps.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class YO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new yt(Le.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new yt(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gT=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(gT,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new zo(0)}static cr(){return new zo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="LruGarbageCollector",yT=1048576;function Nw([t,e],[n,r]){const s=_e(t,n);return s===0?_e(e,r):s}class XO{constructor(e){this.Ir=e,this.buffer=new yt(Nw),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Nw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ZO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X(Ew,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sa(n)?X(Ew,"Ignoring IndexedDB error during garbage collection: ",n):await ra(n)}await this.Vr(3e5)})}}class e3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve(ah.ce);const r=new XO(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(_w)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_w):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),Xi()<=be.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function t3(t,e){return new e3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(){this.changes=new Ui(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&fl(r.mutation,s,bn.empty(),Ce.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const s=di();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Ja();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=di();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=zr();const a=hl(),l=function(){return hl()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Ks)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),fl(h.mutation,d,h.mutation.getFieldMask(),Ce.now())):a.set(d.key,bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>l.set(d,new r3(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=hl();let s=new Ke((a,l)=>a-l),i=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||bn.empty();h=l.applyToLocalView(d,h),r.set(c,h);const f=(s.get(l.batchId)||Ee()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=XN();h.forEach(m=>{if(!i.has(m)){const w=sT(n.get(m),r.get(m));w!==null&&f.set(m,w),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return z.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return ae.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(di());let l=Ul,c=i;return a.next(d=>z.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Ee())).next(h=>({batchId:l,changes:YN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let s=Ja();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Ja();return this.indexManager.getCollectionParents(e,i).next(l=>z.forEach(l,c=>{const d=function(f,m){return new ia(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Mt.newInvalidDocument(h)))});let l=Ja();return a.forEach((c,d)=>{const h=i.get(c);h!==void 0&&fl(h.mutation,d,bn.empty(),Ce.now()),dh(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:mr(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:QO(s.bundledQuery),readTime:mr(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(){this.overlays=new Ke(ae.comparator),this.qr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=di();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=di(),i=n.length+1,a=new ae(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ke((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=di(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=di(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return z.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new TO(n,r));let i=this.qr.get(n);i===void 0&&(i=Ee(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this.Qr=new yt(_t.$r),this.Ur=new yt(_t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new _t(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new _t(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ae(new Le([])),r=new _t(n,e),s=new _t(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ae(new Le([])),r=new _t(n,e),s=new _t(n,e+1);let i=Ee();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new _t(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ae.comparator(e.key,n.key)||_e(e.Yr,n.Yr)}static Kr(e,n){return _e(e.Yr,n.Yr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new yt(_t.$r)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new NO(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new _t(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(a)}lookupMutationBatch(e,n){return z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?Qg:this.tr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _t(n,0),s=new _t(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yt(_e);return n.forEach(s=>{const i=new _t(s,0),a=new _t(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ae.isDocumentKey(i)||(i=i.child(""));const a=new _t(new ae(i),0);let l=new yt(_e);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},a),z.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return z.forEach(n.mutations,s=>{const i=new _t(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new _t(n,0),s=this.Zr.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e){this.ri=e,this.docs=function(){return new Ke(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let r=zr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Mt.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=zr();const a=n.path,l=new ae(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||MD(VD(h),r)<=0||(s.has(h.key)||dh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ce(9500)}ii(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new u3(this)}getSize(e){return z.resolve(this.size)}}class u3 extends n3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.persistence=e,this.si=new Ui(n=>Xg(n),Zg),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.oi=0,this._i=new o0,this.targetCount=0,this.ai=zo.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new zo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Pr(n),z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n){this.ui={},this.overlays={},this.ci=new ah(0),this.li=!1,this.li=!0,this.hi=new a3,this.referenceDelegate=e(this),this.Pi=new d3(this),this.indexManager=new JO,this.remoteDocumentCache=function(s){return new c3(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new KO(n),this.Ii=new i3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new o3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new l3(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new h3(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return z.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class h3 extends UD{constructor(e){super(),this.currentSequenceNumber=e}}class a0{constructor(e){this.persistence=e,this.Ri=new o0,this.Vi=null}static mi(e){return new a0(e)}get fi(){if(this.Vi)return this.Vi;throw ce(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.fi,r=>{const s=ae.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return z.or([()=>z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class wd{constructor(e,n){this.persistence=e,this.pi=new Ui(r=>zD(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=t3(this,n)}static mi(e,n){return new wd(e,n)}Ei(){}di(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return z.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?z.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,ue.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_u(e.data.value)),n}br(e,n,r){return z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ee(),s=Ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new l0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return xC()?8:BD(qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new f3;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Xi()<=be.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Zi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),z.resolve()):(Xi()<=be.DEBUG&&X("QueryEngine","Query:",Zi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Xi()<=be.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Zi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pr(n))):z.resolve())}ys(e,n){if(hw(n))return z.resolve(null);let r=pr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=yd(n,null,"F"),r=pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Ee(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,yd(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return hw(n)||s.isEqual(ue.min())?z.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?z.resolve(null):(Xi()<=be.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Zi(n)),this.vs(e,a,n,LD(s,Ul)).next(l=>l))})}Ds(e,n){let r=new yt(QN(e));return n.forEach((s,i)=>{dh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Xi()<=be.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Zi(n)),this.ps.getDocumentsMatchingQuery(e,n,Ps.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="LocalStore",m3=3e8;class g3{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ke(_e),this.xs=new Ui(i=>Xg(i),Zg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function y3(t,e,n,r){return new g3(t,e,n,r)}async function vT(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Ee();for(const d of s){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function x3(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,m=f.keys();let w=z.resolve();return m.forEach(y=>{w=w.next(()=>h.getEntry(c,y)).next(E=>{const v=d.docVersions.get(y);je(v!==null,48541),E.version.compareTo(v)<0&&(f.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),h.addEntry(E)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ee();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function wT(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function v3(t,e){const n=he(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let w=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?w=w.withResumeToken(Ct.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),s=s.insert(f,w),function(E,v,T){return E.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=m3?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(m,w,h)&&l.push(n.Pi.updateTargetData(i,w))});let c=zr(),d=Ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(w3(i,a,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(ue.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return z.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function w3(t,e,n){let r=Ee(),s=Ee();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=zr();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ue.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):X(c0,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:s}})}function b3(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Qg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _3(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new gs(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function fm(t,e,n){const r=he(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!sa(a))throw a;X(c0,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Tw(t,e,n){const r=he(t);let s=ue.min(),i=Ee();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const f=he(c),m=f.xs.get(h);return m!==void 0?z.resolve(f.Ms.get(m)):f.Pi.getTargetData(d,h)}(r,a,pr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:ue.min(),n?i:Ee())).next(l=>(E3(r,lO(e),l),{documents:l,Qs:i})))}function E3(t,e,n){let r=t.Os.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Sw{constructor(){this.activeTargetIds=pO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N3{constructor(){this.Mo=new Sw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Sw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="ConnectivityMonitor";class kw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(Iw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(Iw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu=null;function pm(){return tu===null?tu=function(){return 268435456+Math.round(2147483648*Math.random())}():tu++,"0x"+tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="RestConnection",S3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class I3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===pd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=pm(),l=this.zo(e,n.toUriEncodedString());X(Lf,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(l),h=br(d);return this.Jo(e,l,c,r,h).then(f=>(X(Lf,`Received RPC '${e}' ${a}: `,f),f),f=>{throw Fl(Lf,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+na}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=S3[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class A3 extends I3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=pm();return new Promise((l,c)=>{const d=new EN;d.setWithCredentials(!0),d.listenOnce(NN.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case bu.NO_ERROR:const f=d.getResponseJson();X(Ot,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case bu.TIMEOUT:X(Ot,`RPC '${e}' ${a} timed out`),c(new Q($.DEADLINE_EXCEEDED,"Request time out"));break;case bu.HTTP_ERROR:const m=d.getStatus();if(X(Ot,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const y=w==null?void 0:w.error;if(y&&y.status&&y.message){const E=function(T){const x=T.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(x)>=0?x:$.UNKNOWN}(y.status);c(new Q(E,y.message))}else c(new Q($.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Q($.UNAVAILABLE,"Connection failed."));break;default:ce(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{X(Ot,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);X(Ot,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=pm(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=IN(),l=SN(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");X(Ot,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let m=!1,w=!1;const y=new k3({Yo:v=>{w?X(Ot,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(m||(X(Ot,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),X(Ot,`RPC '${e}' stream ${s} sending:`,v),f.send(v))},Zo:()=>f.close()}),E=(v,T,x)=>{v.listen(T,N=>{try{x(N)}catch(R){setTimeout(()=>{throw R},0)}})};return E(f,Qa.EventType.OPEN,()=>{w||(X(Ot,`RPC '${e}' stream ${s} transport opened.`),y.o_())}),E(f,Qa.EventType.CLOSE,()=>{w||(w=!0,X(Ot,`RPC '${e}' stream ${s} transport closed`),y.a_(),this.E_(f))}),E(f,Qa.EventType.ERROR,v=>{w||(w=!0,Fl(Ot,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),y.a_(new Q($.UNAVAILABLE,"The operation could not be completed")))}),E(f,Qa.EventType.MESSAGE,v=>{var T;if(!w){const x=v.data[0];je(!!x,16349);const N=x,R=(N==null?void 0:N.error)||((T=N[0])==null?void 0:T.error);if(R){X(Ot,`RPC '${e}' stream ${s} received error:`,R);const C=R.status;let L=function(A){const j=at[A];if(j!==void 0)return oT(j)}(C),b=R.message;L===void 0&&(L=$.INTERNAL,b="Unknown error status: "+C+" with message "+R.message),w=!0,y.a_(new Q(L,b)),f.close()}else X(Ot,`RPC '${e}' stream ${s} received:`,x),y.u_(x)}}),E(l,TN.STAT_EVENT,v=>{v.stat===nm.PROXY?X(Ot,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===nm.NOPROXY&&X(Ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Vf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t){return new DO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="PersistentStream";class _T{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?($r(n.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Q($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return X(Aw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(X(Aw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class j3 extends _T{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=VO(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ue.min():a.readTime?mr(a.readTime):ue.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=hm(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=am(c)?{documents:UO(i,c)}:{query:BO(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=cT(i,a.resumeToken);const d=cm(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(ue.min())>0){l.readTime=vd(i,a.snapshotVersion.toTimestamp());const d=cm(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=zO(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=hm(this.serializer),n.removeTarget=e,this.q_(n)}}class C3 extends _T{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=FO(e.writeResults,e.commitTime),r=mr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=hm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>MO(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{}class P3 extends R3{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Q($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,um(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q($.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,um(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Q($.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class D3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($r(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci="RemoteStore";class O3{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Bi(this)&&(X(Ci,"Restarting streams for network reachability change."),await async function(c){const d=he(c);d.Ea.add(4),await lc(d),d.Ra.set("Unknown"),d.Ea.delete(4),await gh(d)}(this))})}),this.Ra=new D3(r,s)}}async function gh(t){if(Bi(t))for(const e of t.da)await e(!0)}async function lc(t){for(const e of t.da)await e(!1)}function ET(t,e){const n=he(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),f0(n)?h0(n):oa(n).O_()&&d0(n,e))}function u0(t,e){const n=he(t),r=oa(n);n.Ia.delete(e),r.O_()&&NT(n,e),n.Ia.size===0&&(r.O_()?r.L_():Bi(n)&&n.Ra.set("Unknown"))}function d0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oa(t).Y_(e)}function NT(t,e){t.Va.Ue(e),oa(t).Z_(e)}function h0(t){t.Va=new jO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),oa(t).start(),t.Ra.ua()}function f0(t){return Bi(t)&&!oa(t).x_()&&t.Ia.size>0}function Bi(t){return he(t).Ea.size===0}function TT(t){t.Va=void 0}async function L3(t){t.Ra.set("Online")}async function V3(t){t.Ia.forEach((e,n)=>{d0(t,e)})}async function M3(t,e){TT(t),f0(t)?(t.Ra.ha(e),h0(t)):t.Ra.set("Unknown")}async function F3(t,e,n){if(t.Ra.set("Online"),e instanceof lT&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){X(Ci,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bd(t,r)}else if(e instanceof Tu?t.Va.Ze(e):e instanceof aT?t.Va.st(e):t.Va.tt(e),!n.isEqual(ue.min()))try{const r=await wT(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Ct.EMPTY_BYTE_STRING,h.snapshotVersion)),NT(i,c);const f=new gs(h.target,c,d,h.sequenceNumber);d0(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){X(Ci,"Failed to raise snapshot:",r),await bd(t,r)}}async function bd(t,e,n){if(!sa(e))throw e;t.Ea.add(1),await lc(t),t.Ra.set("Offline"),n||(n=()=>wT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X(Ci,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await gh(t)})}function ST(t,e){return e().catch(n=>bd(t,n,e))}async function yh(t){const e=he(t),n=Vs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qg;for(;U3(e);)try{const s=await b3(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,B3(e,s)}catch(s){await bd(e,s)}IT(e)&&kT(e)}function U3(t){return Bi(t)&&t.Ta.length<10}function B3(t,e){t.Ta.push(e);const n=Vs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function IT(t){return Bi(t)&&!Vs(t).x_()&&t.Ta.length>0}function kT(t){Vs(t).start()}async function $3(t){Vs(t).ra()}async function z3(t){const e=Vs(t);for(const n of t.Ta)e.ea(n.mutations)}async function q3(t,e,n){const r=t.Ta.shift(),s=r0.from(r,e,n);await ST(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await yh(t)}async function H3(t,e){e&&Vs(t).X_&&await async function(r,s){if(function(a){return IO(a)&&a!==$.ABORTED}(s.code)){const i=r.Ta.shift();Vs(r).B_(),await ST(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await yh(r)}}(t,e),IT(t)&&kT(t)}async function jw(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),X(Ci,"RemoteStore received new credentials");const r=Bi(n);n.Ea.add(3),await lc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gh(n)}async function W3(t,e){const n=he(t);e?(n.Ea.delete(2),await gh(n)):e||(n.Ea.add(2),await lc(n),n.Ra.set("Unknown"))}function oa(t){return t.ma||(t.ma=function(n,r,s){const i=he(n);return i.sa(),new j3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:L3.bind(null,t),t_:V3.bind(null,t),r_:M3.bind(null,t),H_:F3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),f0(t)?h0(t):t.Ra.set("Unknown")):(await t.ma.stop(),TT(t))})),t.ma}function Vs(t){return t.fa||(t.fa=function(n,r,s){const i=he(n);return i.sa(),new C3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:$3.bind(null,t),r_:H3.bind(null,t),ta:z3.bind(null,t),na:q3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await yh(t)):(await t.fa.stop(),t.Ta.length>0&&(X(Ci,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new p0(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function m0(t,e){if($r("AsyncQueue",`${e}: ${t}`),sa(t))return new Q($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{static emptySet(e){return new Io(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Ja(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Io;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.ga=new Ke(ae.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class qo{constructor(e,n,r,s,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new qo(e,n,Io.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class K3{constructor(){this.queries=Rw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=Rw(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new Q($.ABORTED,"Firestore shutting down"))}}function Rw(){return new Ui(t=>KN(t),uh)}async function AT(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new G3,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=m0(a,`Initialization of query '${Zi(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&g0(n)}async function jT(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Q3(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&g0(n)}function J3(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function g0(t){t.Ca.forEach(e=>{e.next()})}var mm,Pw;(Pw=mm||(mm={})).Ma="default",Pw.Cache="cache";class CT{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.key=e}}class PT{constructor(e){this.key=e}}class Y3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ee(),this.mutatedKeys=Ee(),this.eu=QN(e),this.tu=new Io(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Cw,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),w=dh(this.query,f)?f:null,y=!!m&&this.mutatedKeys.has(m.key),E=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let v=!1;m&&w?m.data.isEqual(w.data)?y!==E&&(r.track({type:3,doc:w}),v=!0):this.su(m,w)||(r.track({type:2,doc:w}),v=!0,(c&&this.eu(w,c)>0||d&&this.eu(w,d)<0)&&(l=!0)):!m&&w?(r.track({type:0,doc:w}),v=!0):m&&!w&&(r.track({type:1,doc:m}),v=!0,(c||d)&&(l=!0)),v&&(w?(a=a.add(w),i=E?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(w,y){const E=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce(20277,{Rt:v})}};return E(w)-E(y)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new qo(this.query,e.tu,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Cw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ee(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new PT(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new RT(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ee();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return qo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const y0="SyncEngine";class X3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Z3{constructor(e){this.key=e,this.hu=!1}}class eL{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ui(l=>KN(l),uh),this.Iu=new Map,this.Eu=new Set,this.du=new Ke(ae.comparator),this.Au=new Map,this.Ru=new o0,this.Vu={},this.mu=new Map,this.fu=zo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tL(t,e,n=!0){const r=FT(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await DT(r,e,n,!0),s}async function nL(t,e){const n=FT(t);await DT(n,e,!0,!1)}async function DT(t,e,n,r){const s=await _3(t.localStore,pr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await rL(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&ET(t.remoteStore,s),l}async function rL(t,e,n,r,s){t.pu=(f,m,w)=>async function(E,v,T,x){let N=v.view.ru(T);N.Cs&&(N=await Tw(E.localStore,v.query,!1).then(({documents:b})=>v.view.ru(b,N)));const R=x&&x.targetChanges.get(v.targetId),C=x&&x.targetMismatches.get(v.targetId)!=null,L=v.view.applyChanges(N,E.isPrimaryClient,R,C);return Ow(E,v.targetId,L.au),L.snapshot}(t,f,m,w);const i=await Tw(t.localStore,e,!0),a=new Y3(e,i.Qs),l=a.ru(i.documents),c=ac.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,c);Ow(t,n,d.au);const h=new X3(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function sL(t,e,n){const r=he(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!uh(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await fm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&u0(r.remoteStore,s.targetId),gm(r,s.targetId)}).catch(ra)):(gm(r,s.targetId),await fm(r.localStore,s.targetId,!0))}async function iL(t,e){const n=he(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),u0(n.remoteStore,r.targetId))}async function oL(t,e,n){const r=fL(t);try{const s=await function(a,l){const c=he(a),d=Ce.now(),h=l.reduce((w,y)=>w.add(y.key),Ee());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let y=zr(),E=Ee();return c.Ns.getEntries(w,h).next(v=>{y=v,y.forEach((T,x)=>{x.isValidDocument()||(E=E.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,y)).next(v=>{f=v;const T=[];for(const x of l){const N=_O(x,f.get(x.key).overlayedDocument);N!=null&&T.push(new Ks(x.key,N,UN(N.value.mapValue),On.exists(!0)))}return c.mutationQueue.addMutationBatch(w,d,T,l)}).next(v=>{m=v;const T=v.applyToLocalDocumentSet(f,E);return c.documentOverlayCache.saveOverlays(w,v.batchId,T)})}).then(()=>({batchId:m.batchId,changes:YN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new Ke(_e)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await cc(r,s.changes),await yh(r.remoteStore)}catch(s){const i=m0(s,"Failed to persist write");n.reject(i)}}async function OT(t,e){const n=he(t);try{const r=await v3(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(je(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?je(a.hu,14607):s.removedDocuments.size>0&&(je(a.hu,42227),a.hu=!1))}),await cc(n,r,e)}catch(r){await ra(r)}}function Dw(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=he(a);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(l)&&(d=!0)}),d&&g0(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aL(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Ke(ae.comparator);a=a.insert(i,Mt.newNoDocument(i,ue.min()));const l=Ee().add(i),c=new ph(ue.min(),new Map,new Ke(_e),a,l);await OT(r,c),r.du=r.du.remove(i),r.Au.delete(e),x0(r)}else await fm(r.localStore,e,!1).then(()=>gm(r,e,n)).catch(ra)}async function lL(t,e){const n=he(t),r=e.batch.batchId;try{const s=await x3(n.localStore,e);VT(n,r,null),LT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cc(n,s)}catch(s){await ra(s)}}async function cL(t,e,n){const r=he(t);try{const s=await function(a,l){const c=he(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(je(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);VT(r,e,n),LT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await cc(r,s)}catch(s){await ra(s)}}function LT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function VT(t,e,n){const r=he(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function gm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||MT(t,r)})}function MT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(u0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),x0(t))}function Ow(t,e,n){for(const r of n)r instanceof RT?(t.Ru.addReference(r.key,e),uL(t,r)):r instanceof PT?(X(y0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||MT(t,r.key)):ce(19791,{wu:r})}function uL(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(X(y0,"New document in limbo: "+n),t.Eu.add(r),x0(t))}function x0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ae(Le.fromString(e)),r=t.fu.next();t.Au.set(r,new Z3(n)),t.du=t.du.insert(n,r),ET(t.remoteStore,new gs(pr(e0(n.path)),r,"TargetPurposeLimboResolution",ah.ce))}}async function cc(t,e,n){const r=he(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=l0.As(c.targetId,d);i.push(f)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,d){const h=he(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>z.forEach(d,m=>z.forEach(m.Es,w=>h.persistence.referenceDelegate.addReference(f,m.targetId,w)).next(()=>z.forEach(m.ds,w=>h.persistence.referenceDelegate.removeReference(f,m.targetId,w)))))}catch(f){if(!sa(f))throw f;X(c0,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const w=h.Ms.get(m),y=w.snapshotVersion,E=w.withLastLimboFreeSnapshotVersion(y);h.Ms=h.Ms.insert(m,E)}}}(r.localStore,i))}async function dL(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){X(y0,"User change. New user:",e.toKey());const r=await vT(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new Q($.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cc(n,r.Ls)}}function hL(t,e){const n=he(t),r=n.Au.get(e);if(r&&r.hu)return Ee().add(r.key);{let s=Ee();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function FT(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aL.bind(null,e),e.Pu.H_=Q3.bind(null,e.eventManager),e.Pu.yu=J3.bind(null,e.eventManager),e}function fL(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cL.bind(null,e),e}class _d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return y3(this.persistence,new p3,e.initialUser,this.serializer)}Cu(e){return new xT(a0.mi,this.serializer)}Du(e){return new N3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_d.provider={build:()=>new _d};class pL extends _d{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){je(this.persistence.referenceDelegate instanceof wd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZO(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new xT(r=>wd.mi(r,n),this.serializer)}}class ym{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dL.bind(null,this.syncEngine),await W3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new K3}()}createDatastore(e){const n=mh(e.databaseInfo.databaseId),r=function(i){return new A3(i)}(e.databaseInfo);return function(i,a,l,c){return new P3(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new O3(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Dw(this.syncEngine,n,0),function(){return kw.v()?new kw:new T3}())}createSyncEngine(e,n){return function(s,i,a,l,c,d,h){const f=new eL(s,i,a,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=he(s);X(Ci,"RemoteStore shutting down."),i.Ea.add(5),await lc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ym.provider={build:()=>new ym};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="FirestoreClient";class mL{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=nn.UNAUTHENTICATED,this.clientId=Kg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{X(Ms,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(X(Ms,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=m0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Mf(t,e){t.asyncQueue.verifyOperationInProgress(),X(Ms,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await vT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Lw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await gL(t);X(Ms,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>jw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>jw(e.remoteStore,s)),t._onlineComponents=e}async function gL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(Ms,"Using user provided OfflineComponentProvider");try{await Mf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Fl("Error using user provided cache. Falling back to memory cache: "+n),await Mf(t,new _d)}}else X(Ms,"Using default OfflineComponentProvider"),await Mf(t,new pL(void 0));return t._offlineComponents}async function BT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(Ms,"Using user provided OnlineComponentProvider"),await Lw(t,t._uninitializedComponentsProvider._online)):(X(Ms,"Using default OnlineComponentProvider"),await Lw(t,new ym))),t._onlineComponents}function yL(t){return BT(t).then(e=>e.syncEngine)}async function $T(t){const e=await BT(t),n=e.eventManager;return n.onListen=tL.bind(null,e.syncEngine),n.onUnlisten=sL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=iL.bind(null,e.syncEngine),n}function xL(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new UT({next:m=>{h.Nu(),a.enqueueAndForget(()=>jT(i,f));const w=m.docs.has(l);!w&&m.fromCache?d.reject(new Q($.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&m.fromCache&&c&&c.source==="server"?d.reject(new Q($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new CT(e0(l.path),h,{includeMetadataChanges:!0,qa:!0});return AT(i,f)}(await $T(t),t.asyncQueue,e,n,r)),r.promise}function vL(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new UT({next:m=>{h.Nu(),a.enqueueAndForget(()=>jT(i,f)),m.fromCache&&c.source==="server"?d.reject(new Q($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new CT(l,h,{includeMetadataChanges:!0,qa:!0});return AT(i,f)}(await $T(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL="firestore.googleapis.com",Mw=!0;class Fw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wL,this.ssl=Mw}else this.host=e.host,this.ssl=e.ssl??Mw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yT)throw new Q($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zT(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class v0{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new TD;switch(r.type){case"firstParty":return new kD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Vw.get(n);r&&(X("ComponentProvider","Removing Datastore"),Vw.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qs(this.firestore,e,this._query)}}class it{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new As(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}toJSON(){return{type:it._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ic(n,it._jsonSchema))return new it(e,r||null,new ae(Le.fromString(n.referencePath)))}}it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:dt("string",it._jsonSchemaVersion),referencePath:dt("string")};class As extends Qs{constructor(e,n,r){super(e,n,e0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new ae(e))}withConverter(e){return new As(this.firestore,e,this._path)}}function ut(t,e,...n){if(t=Pe(t),AN("collection","path",e),t instanceof v0){const r=Le.fromString(e,...n);return Xv(r),new As(t,null,r)}{if(!(t instanceof it||t instanceof As))throw new Q($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return Xv(r),new As(t.firestore,null,r)}}function Me(t,e,...n){if(t=Pe(t),arguments.length===1&&(e=Kg.newId()),AN("doc","path",e),t instanceof v0){const r=Le.fromString(e,...n);return Yv(r),new it(t,null,new ae(r))}{if(!(t instanceof it||t instanceof As))throw new Q($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return Yv(r),new it(t.firestore,t instanceof As?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="AsyncQueue";class Bw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bT(this,"async_queue_retry"),this._c=()=>{const r=Vf();r&&X(Uw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Vf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Vf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Or;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sa(e))throw e;X(Uw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,$r("INTERNAL UNHANDLED ERROR: ",$w(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=p0.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ce(47125,{Pc:$w(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function $w(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class $i extends v0{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Bw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bw(e),this._firestoreClient=void 0,await e}}}function bL(t,e,n){n||(n=pd);const r=Gr(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Rs(i,e))return s;throw new Q($.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Q($.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yT)throw new Q($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&br(e.host)&&Xd(e.host),r.initialize({options:e,instanceIdentifier:n})}function w0(t){if(t._terminated)throw new Q($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_L(t),t._firestoreClient}function _L(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,d,h){return new WD(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,zT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new mL(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Ct.fromBase64String(e))}catch(n){throw new Q($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rn(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ic(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:dt("string",Rn._jsonSchemaVersion),bytes:dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gr._jsonSchemaVersion}}static fromJSON(e){if(ic(e,gr._jsonSchema))return new gr(e.latitude,e.longitude)}}gr._jsonSchemaVersion="firestore/geoPoint/1.0",gr._jsonSchema={type:dt("string",gr._jsonSchemaVersion),latitude:dt("number"),longitude:dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ic(e,yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new yr(e.vectorValues);throw new Q($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:dt("string",yr._jsonSchemaVersion),vectorValues:dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=/^__.*__$/;class NL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ks(e,this.data,this.fieldMask,n,this.fieldTransforms):new oc(e,this.data,n,this.fieldTransforms)}}class qT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ks(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce(40011,{Ac:t})}}class b0{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new b0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ed(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(HT(this.Ac)&&EL.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class TL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mh(e)}Cc(e,n,r,s=!1){return new b0({Ac:e,methodName:n,Dc:r,path:It.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wh(t){const e=t._freezeSettings(),n=mh(t._databaseId);return new TL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function WT(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);E0("Data must be an object, but it was:",a,r);const l=GT(r,a);let c,d;if(i.merge)c=new bn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=xm(e,f,n);if(!a.contains(m))throw new Q($.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);QT(h,m)||h.push(m)}c=new bn(h),d=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=a.fieldTransforms;return new NL(new ln(l),c,d)}class bh extends vh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bh}}class _0 extends vh{_toFieldTransform(e){return new xO(e.path,new Hl)}isEqual(e){return e instanceof _0}}function SL(t,e,n,r){const s=t.Cc(1,e,n);E0("Data must be an object, but it was:",s,r);const i=[],a=ln.empty();Gs(r,(c,d)=>{const h=N0(e,c,n);d=Pe(d);const f=s.yc(h);if(d instanceof bh)i.push(h);else{const m=uc(d,f);m!=null&&(i.push(h),a.set(h,m))}});const l=new bn(i);return new qT(a,l,s.fieldTransforms)}function IL(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[xm(e,r,n)],c=[s];if(i.length%2!=0)throw new Q($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(xm(e,i[m])),c.push(i[m+1]);const d=[],h=ln.empty();for(let m=l.length-1;m>=0;--m)if(!QT(d,l[m])){const w=l[m];let y=c[m];y=Pe(y);const E=a.yc(w);if(y instanceof bh)d.push(w);else{const v=uc(y,E);v!=null&&(d.push(w),h.set(w,v))}}const f=new bn(d);return new qT(h,f,a.fieldTransforms)}function kL(t,e,n,r=!1){return uc(n,t.Cc(r?4:3,e))}function uc(t,e){if(KT(t=Pe(t)))return E0("Unsupported field value:",e,t),GT(t,e);if(t instanceof vh)return function(r,s){if(!HT(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=uc(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ce.fromDate(r);return{timestampValue:vd(s.serializer,i)}}if(r instanceof Ce){const i=new Ce(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vd(s.serializer,i)}}if(r instanceof gr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rn)return{bytesValue:cT(s.serializer,r._byteString)};if(r instanceof it){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:i0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof yr)return function(a,l){return{mapValue:{fields:{[MN]:{stringValue:FN},[md]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return t0(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${oh(r)}`)}(t,e)}function GT(t,e){const n={};return RN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(t,(r,s)=>{const i=uc(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function KT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ce||t instanceof gr||t instanceof Rn||t instanceof it||t instanceof vh||t instanceof yr)}function E0(t,e,n){if(!KT(n)||!jN(n)){const r=oh(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function xm(t,e,n){if((e=Pe(e))instanceof xh)return e._internalPath;if(typeof e=="string")return N0(t,e);throw Ed("Field path arguments must be of type string or ",t,!1,void 0,n)}const AL=new RegExp("[~\\*/\\[\\]]");function N0(t,e,n){if(e.search(AL)>=0)throw Ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xh(...e.split("."))._internalPath}catch{throw Ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ed(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new Q($.INVALID_ARGUMENT,l+t+c)}function QT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_h("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jL extends JT{data(){return super.data()}}function _h(t,e){return typeof e=="string"?N0(t,e):e instanceof xh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class T0{}class S0 extends T0{}function _r(t,e,...n){let r=[];e instanceof T0&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof I0).length,l=i.filter(c=>c instanceof Eh).length;if(a>1||a>0&&l>0)throw new Q($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Eh extends S0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Eh(e,n,r)}_apply(e){const n=this._parse(e);return YT(e._query,n),new Qs(e.firestore,e.converter,lm(e._query,n))}_parse(e){const n=wh(e.firestore);return function(i,a,l,c,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Q($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){qw(f,h);const y=[];for(const E of f)y.push(zw(c,i,E));m={arrayValue:{values:y}}}else m=zw(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||qw(f,h),m=kL(l,a,f,h==="in"||h==="not-in");return ct.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Fs(t,e,n){const r=e,s=_h("where",t);return Eh._create(s,r,n)}class I0 extends T0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new I0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)YT(a,c),a=lm(a,c)}(e._query,n),new Qs(e.firestore,e.converter,lm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class k0 extends S0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new k0(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new Q($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ql(i,a)}(e._query,this._field,this._direction);return new Qs(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new ia(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function aa(t,e="asc"){const n=e,r=_h("orderBy",t);return k0._create(r,n)}class A0 extends S0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new A0(e,n,r)}_apply(e){return new Qs(e.firestore,e.converter,yd(e._query,this._limit,this._limitType))}}function j0(t){return OD("limit",t),A0._create("limit",t,"F")}function zw(t,e,n){if(typeof(n=Pe(n))=="string"){if(n==="")throw new Q($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GN(e)&&n.indexOf("/")!==-1)throw new Q($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Le.fromString(n));if(!ae.isDocumentKey(r))throw new Q($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ow(t,new ae(r))}if(n instanceof it)return ow(t,n._key);throw new Q($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oh(n)}.`)}function qw(t,e){if(!Array.isArray(t)||t.length===0)throw new Q($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YT(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class RL{convertValue(e,n="none"){switch(Ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[md].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>nt(a.doubleValue));return new yr(n)}convertGeoPoint(e){return new gr(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ch(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bl(e));default:return null}}convertTimestamp(e){const n=Ds(e);return new Ce(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);je(mT(r),9688,{name:e});const s=new $l(r.get(1),r.get(3)),i=new ae(r.popFirst(5));return s.isEqual(n)||$r(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Xa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gi extends JT{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_h("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=gi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}gi._jsonSchemaVersion="firestore/documentSnapshot/1.0",gi._jsonSchema={type:dt("string",gi._jsonSchemaVersion),bundleSource:dt("string","DocumentSnapshot"),bundleName:dt("string"),bundle:dt("string")};class Su extends gi{data(e={}){return super.data(e)}}class ko{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Su(this._firestore,this._userDataWriter,r.key,r,new Xa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Su(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xa(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Su(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xa(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:PL(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Kg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function PL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){t=xr(t,it);const e=xr(t.firestore,$i);return xL(w0(e),t._key).then(n=>OL(e,t,n))}ko._jsonSchemaVersion="firestore/querySnapshot/1.0",ko._jsonSchema={type:dt("string",ko._jsonSchemaVersion),bundleSource:dt("string","QuerySnapshot"),bundleName:dt("string"),bundle:dt("string")};class ZT extends RL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}}function Qt(t){t=xr(t,Qs);const e=xr(t.firestore,$i),n=w0(e),r=new ZT(e);return CL(t._query),vL(n,t._query).then(s=>new ko(e,r,t,s))}function DL(t,e,n){t=xr(t,it);const r=xr(t.firestore,$i),s=XT(t.converter,e);return Nh(r,[WT(wh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,On.none())])}function Js(t,e,n,...r){t=xr(t,it);const s=xr(t.firestore,$i),i=wh(s);let a;return a=typeof(e=Pe(e))=="string"||e instanceof xh?IL(i,"updateDoc",t._key,e,n,r):SL(i,"updateDoc",t._key,e),Nh(s,[a.toMutation(t._key,On.exists(!0))])}function C0(t){return Nh(xr(t.firestore,$i),[new n0(t._key,On.none())])}function dc(t,e){const n=xr(t.firestore,$i),r=Me(t),s=XT(t.converter,e);return Nh(n,[WT(wh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,On.exists(!1))]).then(()=>r)}function Nh(t,e){return function(r,s){const i=new Or;return r.asyncQueue.enqueueAndForget(async()=>oL(await yL(r),s,i)),i.promise}(w0(t),e)}function OL(t,e,n){const r=n.docs.get(e._key),s=new ZT(t);return new gi(t,s,e._key,r,new Xa(n.hasPendingWrites,n.fromCache),e.converter)}function xt(){return new _0("serverTimestamp")}(function(e,n=!0){(function(s){na=s})(Mi),Fn(new Sn("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new $i(new SD(r.getProvider("auth-internal")),new AD(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $l(d.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Ut(Gv,Kv,e),Ut(Gv,Kv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="firebasestorage.googleapis.com",tS="storageBucket",LL=2*60*1e3,VL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et extends An{constructor(e,n,r=0){super(Ff(e),`Firebase Storage: ${n} (${Ff(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,et.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ff(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xe||(Xe={}));function Ff(t){return"storage/"+t}function R0(){const t="An unknown error occurred, please check the error payload for server response.";return new et(Xe.UNKNOWN,t)}function ML(t){return new et(Xe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function FL(t){return new et(Xe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function UL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new et(Xe.UNAUTHENTICATED,t)}function BL(){return new et(Xe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $L(t){return new et(Xe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function zL(){return new et(Xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qL(){return new et(Xe.CANCELED,"User canceled the upload/download.")}function HL(t){return new et(Xe.INVALID_URL,"Invalid URL '"+t+"'.")}function WL(t){return new et(Xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function GL(){return new et(Xe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tS+"' property when initializing the app?")}function KL(){return new et(Xe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function QL(){return new et(Xe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function JL(t){return new et(Xe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function vm(t){return new et(Xe.INVALID_ARGUMENT,t)}function nS(){return new et(Xe.APP_DELETED,"The Firebase app was deleted.")}function YL(t){return new et(Xe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pl(t,e){return new et(Xe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Fa(t){throw new et(Xe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=_n.makeFromUrl(e,n)}catch{return new _n(e,"")}if(r.path==="")return r;throw WL(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",w=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),y={bucket:1,path:3},E=n===eS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",T=new RegExp(`^https?://${E}/${s}/${v}`,"i"),N=[{regex:l,indices:c,postModify:i},{regex:w,indices:y,postModify:d},{regex:T,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<N.length;R++){const C=N[R],L=C.regex.exec(e);if(L){const b=L[C.indices.bucket];let _=L[C.indices.path];_||(_=""),r=new _n(b,_),C.postModify(r);break}}if(r==null)throw HL(e);return r}}class XL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(t,e,n){let r=1,s=null,i=null,a=!1,l=0;function c(){return l===2}let d=!1;function h(...v){d||(d=!0,e.apply(null,v))}function f(v){s=setTimeout(()=>{s=null,t(w,c())},v)}function m(){i&&clearTimeout(i)}function w(v,...T){if(d){m();return}if(v){m(),h.call(null,v,...T);return}if(c()||a){m(),h.call(null,v,...T);return}r<64&&(r*=2);let N;l===1?(l=2,N=0):N=(r+Math.random())*1e3,f(N)}let y=!1;function E(v){y||(y=!0,m(),!d&&(s!==null?(v||(l=2),clearTimeout(s),f(0)):v||(l=1)))}return f(0),i=setTimeout(()=>{a=!0,E(!0)},n),E}function e6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6(t){return t!==void 0}function n6(t){return typeof t=="object"&&!Array.isArray(t)}function P0(t){return typeof t=="string"||t instanceof String}function Hw(t){return D0()&&t instanceof Blob}function D0(){return typeof Blob<"u"}function Ww(t,e,n,r){if(r<e)throw vm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw vm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function rS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var yi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(yi||(yi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,n,r,s,i,a,l,c,d,h,f,m=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,E)=>{this.resolve_=y,this.reject_=E,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new nu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===yi.NO_ERROR,c=i.getStatus();if(!l||r6(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===yi.ABORT;r(!1,new nu(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new nu(d,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());t6(c)?i(c):i()}catch(c){a(c)}else if(l!==null){const c=R0();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(s.canceled){const c=this.appDelete_?nS():qL();a(c)}else{const c=zL();a(c)}};this.canceled_?n(!1,new nu(!1,null,!0)):this.backoffId_=ZL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&e6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function i6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function o6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function a6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function l6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function c6(t,e,n,r,s,i,a=!0,l=!1){const c=rS(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return a6(h,e),i6(h,n),o6(h,i),l6(h,r),new s6(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function d6(...t){const e=u6();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(D0())return new Blob(t);throw new et(Xe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function h6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6(t){if(typeof atob>"u")throw JL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Uf{constructor(e,n){this.data=e,this.contentType=n||null}}function p6(t,e){switch(t){case cr.RAW:return new Uf(sS(e));case cr.BASE64:case cr.BASE64URL:return new Uf(iS(t,e));case cr.DATA_URL:return new Uf(g6(e),y6(e))}throw R0()}function sS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function m6(t){let e;try{e=decodeURIComponent(t)}catch{throw pl(cr.DATA_URL,"Malformed data URL.")}return sS(e)}function iS(t,e){switch(t){case cr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw pl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case cr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw pl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=f6(e)}catch(s){throw s.message.includes("polyfill")?s:pl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class oS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw pl(cr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=x6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function g6(t){const e=new oS(t);return e.base64?iS(cr.BASE64,e.rest):m6(e.rest)}function y6(t){return new oS(t).contentType}function x6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n){let r=0,s="";Hw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Hw(this.data_)){const r=this.data_,s=h6(r,e,n);return s===null?null:new ds(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ds(r,!0)}}static getBlob(...e){if(D0()){const n=e.map(r=>r instanceof ds?r.data_:r);return new ds(d6.apply(null,n))}else{const n=e.map(a=>P0(a)?p6(cr.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)s[i++]=a[l]}),new ds(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t){let e;try{e=JSON.parse(t)}catch{return null}return n6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function w6(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function lS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(t,e){return e}class Gt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||b6}}let ru=null;function _6(t){return!P0(t)||t.length<2?t:lS(t)}function cS(){if(ru)return ru;const t=[];t.push(new Gt("bucket")),t.push(new Gt("generation")),t.push(new Gt("metageneration")),t.push(new Gt("name","fullPath",!0));function e(i,a){return _6(a)}const n=new Gt("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new Gt("size");return s.xform=r,t.push(s),t.push(new Gt("timeCreated")),t.push(new Gt("updated")),t.push(new Gt("md5Hash",null,!0)),t.push(new Gt("cacheControl",null,!0)),t.push(new Gt("contentDisposition",null,!0)),t.push(new Gt("contentEncoding",null,!0)),t.push(new Gt("contentLanguage",null,!0)),t.push(new Gt("contentType",null,!0)),t.push(new Gt("metadata","customMetadata",!0)),ru=t,ru}function E6(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new _n(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function N6(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return E6(r,t),r}function uS(t,e,n){const r=aS(e);return r===null?null:N6(t,r,n)}function T6(t,e,n,r){const s=aS(e);if(s===null||!P0(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,f=t.fullPath,m="/b/"+a(h)+"/o/"+a(f),w=O0(m,n,r),y=rS({alt:"media",token:d});return w+y})[0]}function S6(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class dS{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t){if(!t)throw R0()}function I6(t,e){function n(r,s){const i=uS(t,s,e);return hS(i!==null),i}return n}function k6(t,e){function n(r,s){const i=uS(t,s,e);return hS(i!==null),T6(i,s,t.host,t._protocol)}return n}function fS(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=BL():s=UL():n.getStatus()===402?s=FL(t.bucket):n.getStatus()===403?s=$L(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function A6(t){const e=fS(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=ML(t.path)),i.serverResponse=s.serverResponse,i}return n}function j6(t,e,n){const r=e.fullServerUrl(),s=O0(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,l=new dS(s,i,k6(t,n),a);return l.errorHandler=A6(e),l}function C6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function R6(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=C6(null,e)),r}function P6(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let N="";for(let R=0;R<2;R++)N=N+Math.random().toString().slice(2);return N}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const d=R6(e,r,s),h=S6(d,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,m=`\r
--`+c+"--",w=ds.getBlob(f,r,m);if(w===null)throw KL();const y={name:d.fullPath},E=O0(i,t.host,t._protocol),v="POST",T=t.maxUploadRetryTime,x=new dS(E,v,I6(t,n),T);return x.urlParams=y,x.headers=a,x.body=w.uploadData(),x.errorHandler=fS(e),x}class D6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Fa("cannot .send() more than once");if(br(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class O6 extends D6{initXhr(){this.xhr_.responseType="text"}}function pS(){return new O6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n){this._service=e,n instanceof _n?this._location=n:this._location=_n.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ri(e,n)}get root(){const e=new _n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lS(this._location.path)}get storage(){return this._service}get parent(){const e=v6(this._location.path);if(e===null)return null;const n=new _n(this._location.bucket,e);return new Ri(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw YL(e)}}function L6(t,e,n){t._throwIfRoot("uploadBytes");const r=P6(t.storage,t._location,cS(),new ds(e,!0),n);return t.storage.makeRequestWithTokens(r,pS).then(s=>({metadata:s,ref:t}))}function V6(t){t._throwIfRoot("getDownloadURL");const e=j6(t.storage,t._location,cS());return t.storage.makeRequestWithTokens(e,pS).then(n=>{if(n===null)throw QL();return n})}function M6(t,e){const n=w6(t._location.path,e),r=new _n(t._location.bucket,n);return new Ri(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(t){return/^[A-Za-z]+:\/\//.test(t)}function U6(t,e){return new Ri(t,e)}function mS(t,e){if(t instanceof L0){const n=t;if(n._bucket==null)throw GL();const r=new Ri(n,n._bucket);return e!=null?mS(r,e):r}else return e!==void 0?M6(t,e):t}function B6(t,e){if(e&&F6(e)){if(t instanceof L0)return U6(t,e);throw vm("To use ref(service, url), the first argument must be a Storage instance.")}else return mS(t,e)}function Gw(t,e){const n=e==null?void 0:e[tS];return n==null?null:_n.makeFromBucketSpec(n,t)}function $6(t,e,n,r={}){t.host=`${e}:${n}`;const s=br(e);s&&(Xd(`https://${t.host}/b`),Cg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:uC(i,t.app.options.projectId))}class L0{constructor(e,n,r,s,i,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=eS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=LL,this._maxUploadRetryTime=VL,this._requests=new Set,s!=null?this._bucket=_n.makeFromBucketSpec(s,this._host):this._bucket=Gw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_n.makeFromBucketSpec(this._url,e):this._bucket=Gw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ww("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ww("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ri(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new XL(nS());{const a=c6(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Kw="@firebase/storage",Qw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="storage";function yS(t,e,n){return t=Pe(t),L6(t,e,n)}function xS(t){return t=Pe(t),V6(t)}function vS(t,e){return t=Pe(t),B6(t,e)}function z6(t=eh(),e){t=Pe(t);const r=Gr(t,gS).getImmediate({identifier:e}),s=cE("storage");return s&&q6(r,...s),r}function q6(t,e,n,r={}){$6(t,e,n,r)}function H6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new L0(n,r,s,e,Mi)}function W6(){Fn(new Sn(gS,H6,"PUBLIC").setMultipleInstances(!0)),Ut(Kw,Qw,""),Ut(Kw,Qw,"esm2020")}W6();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6="type.googleapis.com/google.protobuf.Int64Value",K6="type.googleapis.com/google.protobuf.UInt64Value";function wS(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Nd(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Nd(e));if(typeof t=="function"||typeof t=="object")return wS(t,e=>Nd(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ho(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case G6:case K6:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ho(e)):typeof t=="function"||typeof t=="object"?wS(t,e=>Ho(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class un extends An{constructor(e,n,r){super(`${V0}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,un.prototype)}}function Q6(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Td(t,e){let n=Q6(t),r=n,s;try{const i=e&&e.error;if(i){const a=i.status;if(typeof a=="string"){if(!Jw[a])return new un("internal","internal");n=Jw[a],r=a}const l=i.message;typeof l=="string"&&(r=l),s=i.details,s!==void 0&&(s=Ho(s))}}catch{}return n==="ok"?null:new un(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,an(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="us-central1",Y6=/^data: (.*?)(?:\n|$)/;function X6(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new un("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Z6{constructor(e,n,r,s,i=wm,a=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new J6(e,n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=wm}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function eV(t,e,n){const r=br(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Xd(t.emulatorOrigin+"/backends"),Cg("Functions",!0))}function tV(t,e,n){const r=s=>rV(t,e,s,{});return r.stream=(s,i)=>iV(t,e,s,i),r}function bS(t){return t.emulatorOrigin&&br(t.emulatorOrigin)?"include":void 0}async function nV(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:bS(s)})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}async function _S(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function rV(t,e,n,r){const s=t._url(e);return sV(t,s,n,r)}async function sV(t,e,n,r){n=Nd(n);const s={data:n},i=await _S(t,r),a=r.timeout||7e4,l=X6(a),c=await Promise.race([nV(e,s,i,t.fetchImpl,t),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new un("cancelled","Firebase Functions instance was deleted.");const d=Td(c.status,c.json);if(d)throw d;if(!c.json)throw new un("internal","Response is not valid JSON object.");let h=c.json.data;if(typeof h>"u"&&(h=c.json.result),typeof h>"u")throw new un("internal","Response is missing data field.");return{data:Ho(h)}}function iV(t,e,n,r){const s=t._url(e);return oV(t,s,n,r||{})}async function oV(t,e,n,r){var m;n=Nd(n);const s={data:n},i=await _S(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let a;try{a=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:bS(t)})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const E=new un("cancelled","Request was cancelled.");return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}const y=Td(0,null);return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}let l,c;const d=new Promise((w,y)=>{l=w,c=y});(m=r==null?void 0:r.signal)==null||m.addEventListener("abort",()=>{const w=new un("cancelled","Request was cancelled.");c(w)});const h=a.body.getReader(),f=aV(h,l,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const w=f.getReader();return{async next(){const{value:y,done:E}=await w.read();return{value:y,done:E}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:d}}function aV(t,e,n,r){const s=(a,l)=>{const c=a.match(Y6);if(!c)return;const d=c[1];try{const h=JSON.parse(d);if("result"in h){e(Ho(h.result));return}if("message"in h){l.enqueue(Ho(h.message));return}if("error"in h){const f=Td(0,h);l.error(f),n(f);return}}catch(h){if(h instanceof un){l.error(h),n(h);return}}},i=new TextDecoder;return new ReadableStream({start(a){let l="";return c();async function c(){if(r!=null&&r.aborted){const d=new un("cancelled","Request was cancelled");return a.error(d),n(d),Promise.resolve()}try{const{value:d,done:h}=await t.read();if(h){l.trim()&&s(l.trim(),a),a.close();return}if(r!=null&&r.aborted){const m=new un("cancelled","Request was cancelled");a.error(m),n(m),await t.cancel();return}l+=i.decode(d,{stream:!0});const f=l.split(`
`);l=f.pop()||"";for(const m of f)m.trim()&&s(m.trim(),a);return c()}catch(d){const h=d instanceof un?d:Td(0,null);a.error(h),n(h)}}},cancel(){return t.cancel()}})}const Yw="@firebase/functions",Xw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV="auth-internal",cV="app-check-internal",uV="messaging-internal";function dV(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(lV),a=n.getProvider(uV),l=n.getProvider(cV);return new Z6(s,i,a,l,r)};Fn(new Sn(V0,e,"PUBLIC").setMultipleInstances(!0)),Ut(Yw,Xw,t),Ut(Yw,Xw,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t=eh(),e=wm){const r=Gr(Pe(t),V0).getImmediate({identifier:e}),s=cE("functions");return s&&fV(r,...s),r}function fV(t,e,n){eV(Pe(t),e,n)}function pV(t,e,n){return tV(Pe(t),e)}dV();const mV={apiKey:"AIzaSyCdIWGNBu86vyXPmq0fJNT9sG8YsoUyUEM",authDomain:"dy-infosec.firebaseapp.com",projectId:"dy-infosec",storageBucket:"dy-infosec.firebasestorage.app",messagingSenderId:"532308371569",appId:"1:532308371569:web:bc96ea9202f3f0ba0453d0",measurementId:"G-D6QVEKQKXV"},hc=xE(mV);nP(hc);const Iu=_D(hc),de=bL(hc,{experimentalForceLongPolling:!0,useFetchStreams:!1}),ES=z6(hc),gV=hV(hc),Bf=async t=>{try{const e=Me(de,"users",t),n=await Bt(e);return n.exists()?{success:!0,data:n.data()}:{success:!1,error:"User not found"}}catch(e){return console.error("Error getting user profile:",e),{success:!1,error:e.message}}},Ye=Kj(eC(t=>({user:null,isAuthenticated:!1,loading:!1,error:null,login:async(e,n)=>{t({loading:!0,error:null});try{const r=await i5(Iu,e,n),s=await Bf(r.user.uid);return t({user:{uid:r.user.uid,email:r.user.email,displayName:r.user.displayName,photoURL:r.user.photoURL,emailVerified:r.user.emailVerified,role:s.success?s.data.role:"student",...s.data},isAuthenticated:!0,loading:!1}),{success:!0}}catch(r){return t({error:r.message,loading:!1}),{success:!1,error:r.message}}},signup:async(e,n,r)=>{t({loading:!0,error:null});try{const s=await s5(Iu,e,n);await a5(s.user,{displayName:r}),await new Promise(a=>setTimeout(a,1e3));const i=await Bf(s.user.uid);return t({user:{uid:s.user.uid,email:s.user.email,displayName:r,photoURL:s.user.photoURL,role:i.success?i.data.role:"student"},isAuthenticated:!0,loading:!1}),{success:!0}}catch(s){return t({error:s.message,loading:!1}),{success:!1,error:s.message}}},logout:async()=>{try{await d5(Iu),t({user:null,isAuthenticated:!1,error:null})}catch(e){t({error:e.message})}},setUser:async e=>{if(e){const n=await Bf(e.uid);t({user:{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:n.success?n.data.role:"student",...n.data},isAuthenticated:!0})}else t({user:null,isAuthenticated:!1})},updateUser:e=>t(n=>({user:{...n.user,...e}}))}),{name:"auth-storage"}));u5(Iu,async t=>{await Ye.getState().setUser(t)});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ie=(t,e)=>{const n=O.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...d},h)=>O.createElement("svg",{ref:h,...yV,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${xV(t)}`,l].join(" "),...d},[...e.map(([f,m])=>O.createElement(f,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=ie("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=ie("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=ie("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=ie("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=ie("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=ie("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=ie("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=ie("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=ie("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=ie("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=ie("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=ie("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=ie("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=ie("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=ie("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=ie("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=ie("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=ie("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=ie("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=ie("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=ie("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=ie("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=ie("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=ie("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=ie("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=ie("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=ie("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function BV(){var l;const{isAuthenticated:t,user:e,logout:n}=Ye(),r=gn(),[s,i]=O.useState(!1),a=()=>{n(),r("/")};return o.jsxs("nav",{className:"bg-black border-b border-white/10 backdrop-blur-xl sticky top-0 z-50",children:[o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between h-16",children:[o.jsx("div",{className:"flex items-center",children:o.jsxs(Y,{to:"/",className:"flex items-center space-x-3 group",children:[o.jsx("img",{src:"https://i.namu.wiki/i/ObQ4LgeNZBe9Mz-E8da2_QVnq2TP-xoSU0cNj9m3c5rnVv0k1ag1X9W9a28WTtUTeksCmHmOFhBjtyBrgR3k-Q.png",alt:"덕영고등학교 로고",className:"w-10 h-10 object-contain group-hover:scale-110 transition-transform"}),o.jsxs("span",{className:"text-xl font-black text-white tracking-tight",children:["덕영고등학교",o.jsx("span",{className:"text-purple-400",children:"ㅣ정보보안소프트웨어과"})]})]})}),o.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[o.jsx(Y,{to:"/courses",className:"px-4 py-2 text-gray-300 hover:text-white hover:bg-white/5 transition-all font-medium",children:"COURSES"}),o.jsx(Y,{to:"/notices",className:"px-4 py-2 text-gray-300 hover:text-white hover:bg-white/5 transition-all font-medium",children:"NOTICE"}),o.jsx(Y,{to:"/faq",className:"px-4 py-2 text-gray-300 hover:text-white hover:bg-white/5 transition-all font-medium",children:"FAQ"}),t?o.jsxs(o.Fragment,{children:[(e==null?void 0:e.role)==="admin"&&o.jsxs(Y,{to:"/admin",className:"px-4 py-2 text-yellow-400 hover:text-yellow-300 hover:bg-white/5 transition-all font-medium flex items-center gap-2",children:[o.jsx(xi,{className:"w-4 h-4"}),"ADMIN"]}),o.jsx(Y,{to:"/my-classroom",className:"px-4 py-2 text-gray-300 hover:text-white hover:bg-white/5 transition-all font-medium",children:"CLASSROOM"}),o.jsx(Y,{to:"/applications",className:"px-4 py-2 text-gray-300 hover:text-white hover:bg-white/5 transition-all font-medium",children:"APPLY"}),o.jsxs("div",{className:"relative group ml-4",children:[o.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-white/5 border border-white/10 hover:border-purple-500/50 transition-all",children:[o.jsx(qi,{className:"w-4 h-4 text-purple-400"}),o.jsx("span",{className:"text-white font-medium",children:(e==null?void 0:e.displayName)||((l=e==null?void 0:e.email)==null?void 0:l.split("@")[0])}),(e==null?void 0:e.role)==="admin"&&o.jsx("span",{className:"ml-2 px-2 py-0.5 bg-yellow-500/20 text-yellow-400 text-xs font-bold border border-yellow-500/30",children:"ADMIN"})]}),o.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-black border border-white/10 backdrop-blur-xl invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-all",children:[o.jsx(Y,{to:"/profile",className:"block px-4 py-3 text-gray-300 hover:text-white hover:bg-white/5 border-b border-white/5",children:"Profile"}),o.jsx(Y,{to:"/dashboard",className:"block px-4 py-3 text-gray-300 hover:text-white hover:bg-white/5 border-b border-white/5",children:"Dashboard"}),(e==null?void 0:e.role)==="admin"&&o.jsx(Y,{to:"/admin",className:"block px-4 py-3 text-yellow-400 hover:text-yellow-300 hover:bg-white/5 border-b border-white/5",children:"Admin Panel"}),((e==null?void 0:e.role)==="instructor"||(e==null?void 0:e.role)==="teacher")&&o.jsx(Y,{to:"/instructor",className:"block px-4 py-3 text-blue-300 hover:text-blue-200 hover:bg-white/5 border-b border-white/5",children:"Instructor Console"}),o.jsx("button",{onClick:a,className:"w-full text-left px-4 py-3 text-red-400 hover:text-red-300 hover:bg-white/5",children:"Logout"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Y,{to:"/login",className:"px-4 py-2 text-gray-300 hover:text-white hover:bg-white/5 transition-all font-medium ml-4",children:"LOGIN"}),o.jsx(Y,{to:"/signup",className:"ml-2 px-6 py-2 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold hover:shadow-lg hover:shadow-purple-500/50 transition-all",children:"SIGN UP"})]})]}),o.jsx("div",{className:"md:hidden flex items-center",children:o.jsx("button",{onClick:()=>i(!s),className:"text-white hover:text-purple-400 transition-colors",children:s?o.jsx($0,{className:"w-6 h-6"}):o.jsx(CV,{className:"w-6 h-6"})})})]})}),s&&o.jsx("div",{className:"md:hidden border-t border-white/10 bg-black/95 backdrop-blur-xl",children:o.jsxs("div",{className:"px-4 py-3 space-y-1",children:[o.jsx(Y,{to:"/courses",className:"block px-4 py-3 text-gray-300 hover:text-white hover:bg-white/5 transition-all font-medium",children:"COURSES"}),o.jsx(Y,{to:"/notices",className:"block px-4 py-3 text-gray-300 hover:text-white hover:bg-white/5 transition-all font-medium",children:"NOTICE"}),o.jsx(Y,{to:"/faq",className:"block px-4 py-3 text-gray-300 hover:text-white hover:bg-white/5 transition-all font-medium",children:"FAQ"}),t?o.jsxs(o.Fragment,{children:[o.jsx(Y,{to:"/my-classroom",className:"block px-4 py-3 text-gray-300 hover:text-white hover:bg-white/5 transition-all font-medium",children:"CLASSROOM"}),o.jsx(Y,{to:"/applications",className:"block px-4 py-3 text-gray-300 hover:text-white hover:bg-white/5 transition-all font-medium",children:"APPLY"}),o.jsx(Y,{to:"/profile",className:"block px-4 py-3 text-gray-300 hover:text-white hover:bg-white/5 transition-all font-medium",children:"PROFILE"}),o.jsx("button",{onClick:a,className:"block w-full text-left px-4 py-3 text-red-400 hover:text-red-300 hover:bg-white/5 transition-all font-medium",children:"LOGOUT"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Y,{to:"/login",className:"block px-4 py-3 text-gray-300 hover:text-white hover:bg-white/5 transition-all font-medium",children:"LOGIN"}),o.jsx(Y,{to:"/signup",className:"block px-4 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold text-center hover:shadow-lg transition-all",children:"SIGN UP"})]})]})})]})}function $V(){return o.jsx("footer",{className:"bg-black border-t border-white/10",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx("img",{src:"https://i.namu.wiki/i/ObQ4LgeNZBe9Mz-E8da2_QVnq2TP-xoSU0cNj9m3c5rnVv0k1ag1X9W9a28WTtUTeksCmHmOFhBjtyBrgR3k-Q.png",alt:"덕영고등학교",className:"w-8 h-8 object-contain"}),o.jsxs("span",{className:"text-lg font-black text-white",children:["덕영고등학교",o.jsx("span",{className:"text-purple-400",children:"ㅣ정보보안소프트웨어과"})]})]}),o.jsxs("p",{className:"text-sm text-gray-400 leading-relaxed",children:["미래의 화이트해커와",o.jsx("br",{}),"정보보안 전문가를 양성하는",o.jsx("br",{}),"특성화 학과"]}),o.jsxs("div",{className:"flex space-x-3 mt-6",children:[o.jsx("a",{href:"#",className:"w-10 h-10 bg-white/5 border border-white/10 flex items-center justify-center hover:border-purple-500/50 hover:bg-white/10 transition-all",children:o.jsx(TV,{className:"w-5 h-5 text-gray-400"})}),o.jsx("a",{href:"#",className:"w-10 h-10 bg-white/5 border border-white/10 flex items-center justify-center hover:border-purple-500/50 hover:bg-white/10 transition-all",children:o.jsx(FV,{className:"w-5 h-5 text-gray-400"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-white font-bold mb-4 text-sm tracking-wider",children:"QUICK LINKS"}),o.jsxs("ul",{className:"space-y-3 text-sm",children:[o.jsx("li",{children:o.jsx(Y,{to:"/courses",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"Courses"})}),o.jsx("li",{children:o.jsx(Y,{to:"/notices",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"Notice"})}),o.jsx("li",{children:o.jsx(Y,{to:"/faq",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"FAQ"})}),o.jsx("li",{children:o.jsx(Y,{to:"/inquiry",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"Contact"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-white font-bold mb-4 text-sm tracking-wider",children:"INFORMATION"}),o.jsxs("ul",{className:"space-y-3 text-sm",children:[o.jsx("li",{children:o.jsx(Y,{to:"/about",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"About Us"})}),o.jsx("li",{children:o.jsx(Y,{to:"/privacy",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"Privacy Policy"})}),o.jsx("li",{children:o.jsx(Y,{to:"/terms",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"Terms of Service"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-white font-bold mb-4 text-sm tracking-wider",children:"CONTACT"}),o.jsxs("ul",{className:"space-y-3 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-3 text-gray-400",children:[o.jsx(jV,{className:"w-4 h-4 text-purple-400 mt-0.5"}),o.jsx("span",{children:"경기도 고양시 덕양구 화정동 868"})]}),o.jsxs("li",{className:"flex items-center space-x-3 text-gray-400",children:[o.jsx(DV,{className:"w-4 h-4 text-purple-400"}),o.jsx("span",{children:"031-969-3800"})]}),o.jsxs("li",{className:"flex items-center space-x-3 text-gray-400",children:[o.jsx(Bs,{className:"w-4 h-4 text-purple-400"}),o.jsx("span",{children:"deokyoung@hs.kr"})]})]})]})]}),o.jsx("div",{className:"border-t border-white/10 mt-12 pt-8",children:o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center text-sm text-gray-500",children:[o.jsxs("div",{className:"text-center md:text-left",children:[o.jsx("p",{className:"font-bold text-white mb-2",children:"덕영고등학교 정보보안소프트웨어과"}),o.jsx("p",{children:"설립: 1974년 3월 1일 | 교훈: 성실, 근면, 봉사"}),o.jsx("p",{className:"mt-1",children:"© 2024 Deokyoung High School. All rights reserved."})]}),o.jsxs("p",{className:"mt-4 md:mt-0",children:["Made with ",o.jsx("span",{className:"text-purple-400",children:"♥"})," for Security"]})]})})]})})}function zV(){return o.jsxs("div",{className:"min-h-screen flex flex-col",children:[o.jsx(BV,{}),o.jsx("main",{className:"flex-1",children:o.jsx(aj,{})}),o.jsx($V,{})]})}function z0({children:t,requiredRole:e=null}){const{isAuthenticated:n,user:r}=Ye();if(!n)return o.jsx(Ti,{to:"/login",replace:!0});if(e){const s=(r==null?void 0:r.role)||"student";if(!(Array.isArray(e)?e.includes(s)||s==="admin":s===e||s==="admin"))return o.jsx(Ti,{to:"/dashboard",replace:!0})}return t}function Ji({children:t}){return o.jsx(z0,{requiredRole:"admin",children:t})}function qV({children:t}){return o.jsx(z0,{children:t})}function HV({children:t}){return o.jsx(z0,{requiredRole:["instructor","teacher"],children:t})}function WV(){return o.jsxs("div",{className:"min-h-screen bg-black relative snap-y snap-mandatory overflow-y-scroll h-screen",children:[o.jsx("div",{className:"fixed inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px] pointer-events-none"}),o.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden snap-start snap-always",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black via-transparent to-transparent"}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-64 bg-gradient-to-t from-black to-transparent"}),o.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-purple-500/20 rounded-full blur-3xl animate-pulse animate-float"}),o.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),o.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-pink-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),o.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/5 backdrop-blur-xl border border-white/10 px-6 py-3 rounded-full mb-8",children:[o.jsx(jS,{className:"w-4 h-4 text-purple-400 animate-pulse"}),o.jsx("span",{className:"text-sm font-medium text-white/90",children:"Next Generation Security Education"})]}),o.jsxs("h1",{className:"text-6xl md:text-8xl font-black mb-8 relative",children:[o.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 bg-clip-text text-transparent blur-sm",children:"DYㅣWHITE HAT"}),o.jsx("span",{className:"relative bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 bg-clip-text text-transparent",children:"DYㅣWHITE HAT"})]}),o.jsx("p",{className:"text-xl md:text-2xl text-gray-400 mb-12 max-w-3xl mx-auto leading-relaxed",children:"코드로 세상을 지키는 사람들의 이야기가 시작됩니다"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsxs(Y,{to:"/courses",className:"group relative px-8 py-4 bg-white text-black font-bold overflow-hidden",children:[o.jsx("span",{className:"relative z-10 group-hover:opacity-0 transition-opacity duration-300",children:"교육과정 보기"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500 to-blue-500 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left"}),o.jsx("span",{className:"absolute inset-0 z-20 flex items-center justify-center opacity-0 group-hover:opacity-100 text-white font-bold transition-opacity duration-300",children:"Let's Go →"})]}),o.jsx(Y,{to:"/signup",className:"px-8 py-4 border-2 border-white/20 text-white font-bold hover:bg-white/5 backdrop-blur-sm transition-all",children:"지금 시작하기"})]})]})})]}),o.jsxs("section",{className:"relative min-h-screen flex items-center overflow-hidden snap-start snap-always",children:[o.jsx("div",{className:"absolute top-0 left-0 right-0 h-64 bg-gradient-to-b from-black to-transparent"}),o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-64 bg-gradient-to-t from-black to-transparent"}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"text-center mb-20",children:[o.jsx("h2",{className:"text-5xl md:text-6xl font-black mb-6 text-white",children:"Why Choose Us"}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 mx-auto"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"group relative",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/20 to-blue-500/20 backdrop-blur-xl border border-purple-500/30 transform rotate-3 group-hover:rotate-6 transition-transform duration-500"}),o.jsxs("div",{className:"relative bg-black/40 backdrop-blur-xl border border-purple-500/20 p-10 transform -rotate-3 group-hover:rotate-0 transition-transform duration-500",children:[o.jsx(xi,{className:"w-16 h-16 mb-6 text-purple-400"}),o.jsx("h3",{className:"text-3xl font-black mb-4 text-white",children:"실무 중심"}),o.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:"현직 보안 전문가의 멘토링과 실제 프로젝트 경험"}),o.jsx("div",{className:"mt-6 w-20 h-1 bg-gradient-to-r from-purple-500 to-blue-500"})]})]}),o.jsxs("div",{className:"group relative lg:mt-12",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 backdrop-blur-xl border border-blue-500/30 transform -rotate-3 group-hover:-rotate-6 transition-transform duration-500"}),o.jsxs("div",{className:"relative bg-black/40 backdrop-blur-xl border border-blue-500/20 p-10 transform rotate-3 group-hover:rotate-0 transition-transform duration-500",children:[o.jsx(qr,{className:"w-16 h-16 mb-6 text-blue-400"}),o.jsx("h3",{className:"text-3xl font-black mb-4 text-white",children:"소수정예"}),o.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:"체계적인 선발 과정을 통한 맞춤형 교육 제공"}),o.jsx("div",{className:"mt-6 w-20 h-1 bg-gradient-to-r from-blue-500 to-cyan-500"})]})]}),o.jsxs("div",{className:"group relative",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/20 to-purple-500/20 backdrop-blur-xl border border-cyan-500/30 transform rotate-3 group-hover:rotate-6 transition-transform duration-500"}),o.jsxs("div",{className:"relative bg-black/40 backdrop-blur-xl border border-cyan-500/20 p-10 transform -rotate-3 group-hover:rotate-0 transition-transform duration-500",children:[o.jsx(Wo,{className:"w-16 h-16 mb-6 text-cyan-400"}),o.jsx("h3",{className:"text-3xl font-black mb-4 text-white",children:"다양한 혜택"}),o.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:"교육 지원금, 수료증, 우수 수료생 특전 및 취업 연계"}),o.jsx("div",{className:"mt-6 w-20 h-1 bg-gradient-to-r from-cyan-500 to-purple-500"})]})]})]})]})]}),o.jsxs("section",{className:"relative min-h-screen flex items-center overflow-hidden snap-start snap-always",children:[o.jsx("div",{className:"absolute top-0 left-0 right-0 h-64 bg-gradient-to-b from-black to-transparent"}),o.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-cyan-500/5 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-64 bg-gradient-to-t from-black to-transparent"}),o.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-20",children:[o.jsx("h2",{className:"text-5xl md:text-6xl font-black text-white mb-4",children:"CURRICULUM"}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 mx-auto"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs(Y,{to:"/courses",className:"group relative overflow-hidden bg-gradient-to-br from-purple-900/50 to-blue-900/50 backdrop-blur-sm border border-purple-500/20 p-8 hover:border-purple-500 transition-all duration-500",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-500/10 rounded-full blur-2xl group-hover:bg-purple-500/20 transition-all"}),o.jsx(kt,{className:"w-12 h-12 text-purple-400 mb-6 relative z-10"}),o.jsx("h3",{className:"text-2xl font-black text-white mb-3 relative z-10",children:"기초 교육"}),o.jsx("p",{className:"text-gray-400 leading-relaxed relative z-10",children:"정보보안 기초 이론 및 윤리, 법규 교육"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 to-transparent transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left"})]}),o.jsxs(Y,{to:"/courses",className:"group relative overflow-hidden bg-gradient-to-br from-blue-900/50 to-cyan-900/50 backdrop-blur-sm border border-blue-500/20 p-8 hover:border-blue-500 transition-all duration-500 md:mt-12",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-2xl group-hover:bg-blue-500/20 transition-all"}),o.jsx(U0,{className:"w-12 h-12 text-blue-400 mb-6 relative z-10"}),o.jsx("h3",{className:"text-2xl font-black text-white mb-3 relative z-10",children:"웹 해킹"}),o.jsx("p",{className:"text-gray-400 leading-relaxed relative z-10",children:"웹 취약점 분석 및 모의해킹 실습"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-transparent transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left"})]}),o.jsxs(Y,{to:"/courses",className:"group relative overflow-hidden bg-gradient-to-br from-cyan-900/50 to-teal-900/50 backdrop-blur-sm border border-cyan-500/20 p-8 hover:border-cyan-500 transition-all duration-500",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-cyan-500/10 rounded-full blur-2xl group-hover:bg-cyan-500/20 transition-all"}),o.jsx(RS,{className:"w-12 h-12 text-cyan-400 mb-6 relative z-10"}),o.jsx("h3",{className:"text-2xl font-black text-white mb-3 relative z-10",children:"시스템 해킹"}),o.jsx("p",{className:"text-gray-400 leading-relaxed relative z-10",children:"시스템 보안 및 리버스 엔지니어링"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-500 to-transparent transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left"})]}),o.jsxs(Y,{to:"/courses",className:"group relative overflow-hidden bg-gradient-to-br from-teal-900/50 to-purple-900/50 backdrop-blur-sm border border-teal-500/20 p-8 hover:border-teal-500 transition-all duration-500 md:mt-12",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-teal-500/10 rounded-full blur-2xl group-hover:bg-teal-500/20 transition-all"}),o.jsx(xi,{className:"w-12 h-12 text-teal-400 mb-6 relative z-10"}),o.jsx("h3",{className:"text-2xl font-black text-white mb-3 relative z-10",children:"프로젝트"}),o.jsx("p",{className:"text-gray-400 leading-relaxed relative z-10",children:"팀 프로젝트 및 CTF 대회 참가"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-teal-500 to-transparent transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left"})]})]})]})]}),o.jsxs("section",{className:"relative min-h-screen flex items-center overflow-hidden snap-start snap-always",children:[o.jsx("div",{className:"w-full lg:w-1/2 bg-black p-12 lg:p-20 min-h-screen flex items-center",children:o.jsxs("div",{className:"max-w-xl",children:[o.jsxs("div",{className:"text-6xl font-black text-white mb-8 leading-none",children:["START",o.jsx("br",{}),"YOUR",o.jsx("br",{}),"JOURNEY"]}),o.jsx("p",{className:"text-xl text-gray-400 mb-12 leading-relaxed",children:"정보보안 전문가로의 첫 걸음을 지금 시작하세요"}),o.jsxs(Y,{to:"/signup",className:"group inline-flex items-center gap-4 bg-white text-black px-10 py-5 font-bold text-lg relative overflow-hidden",children:[o.jsx("span",{className:"relative z-10",children:"학습 시작하기"}),o.jsx(vV,{className:"w-6 h-6 relative z-10 group-hover:translate-x-2 transition-transform"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500 to-blue-500 transform translate-x-full group-hover:translate-x-0 transition-transform"})]})]})}),o.jsxs("div",{className:"hidden lg:block w-1/2 bg-gradient-to-br from-purple-600 via-blue-600 to-cyan-600 p-20 min-h-screen relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#ffffff0a_1px,transparent_1px),linear-gradient(to_bottom,#ffffff0a_1px,transparent_1px)] bg-[size:40px_40px]"}),o.jsx("div",{className:"relative z-10 h-full flex flex-col justify-center",children:o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"flex items-center gap-4 text-white",children:[o.jsx("div",{className:"w-16 h-16 bg-white/10 backdrop-blur-sm flex items-center justify-center",children:o.jsx(xi,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-2xl",children:"1000+"}),o.jsx("div",{className:"text-white/70",children:"수료생"})]})]}),o.jsxs("div",{className:"flex items-center gap-4 text-white",children:[o.jsx("div",{className:"w-16 h-16 bg-white/10 backdrop-blur-sm flex items-center justify-center",children:o.jsx(Wo,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-2xl",children:"50+"}),o.jsx("div",{className:"text-white/70",children:"교육 과정"})]})]}),o.jsxs("div",{className:"flex items-center gap-4 text-white",children:[o.jsx("div",{className:"w-16 h-16 bg-white/10 backdrop-blur-sm flex items-center justify-center",children:o.jsx(qr,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-2xl",children:"95%"}),o.jsx("div",{className:"text-white/70",children:"만족도"})]})]})]})})]})]})]})}var fc=t=>t.type==="checkbox",hi=t=>t instanceof Date,sn=t=>t==null;const PS=t=>typeof t=="object";var ht=t=>!sn(t)&&!Array.isArray(t)&&PS(t)&&!hi(t),GV=t=>ht(t)&&t.target?fc(t.target)?t.target.checked:t.target.value:t,KV=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,QV=(t,e)=>t.has(KV(e)),JV=t=>{const e=t.constructor&&t.constructor.prototype;return ht(e)&&e.hasOwnProperty("isPrototypeOf")},q0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function bt(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(q0&&(t instanceof Blob||r))&&(n||ht(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!JV(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=bt(t[s]));else return t;return e}var kh=t=>/^\w*$/.test(t),rt=t=>t===void 0,H0=t=>Array.isArray(t)?t.filter(Boolean):[],W0=t=>H0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ee=(t,e,n)=>{if(!e||!ht(t))return n;const r=(kh(e)?[e]:W0(e)).reduce((s,i)=>sn(s)?s:s[i],t);return rt(r)||r===t?rt(t[e])?n:t[e]:r},ar=t=>typeof t=="boolean",$e=(t,e,n)=>{let r=-1;const s=kh(e)?[e]:W0(e),i=s.length,a=i-1;for(;++r<i;){const l=s[r];let c=n;if(r!==a){const d=t[l];c=ht(d)||Array.isArray(d)?d:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const eb={BLUR:"blur",FOCUS_OUT:"focusout"},Hn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Sr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},YV=Lt.createContext(null);YV.displayName="HookFormContext";var XV=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const a=i;return e._proxyFormState[a]!==Hn.all&&(e._proxyFormState[a]=!r||Hn.all),t[a]}});return s};const ZV=typeof window<"u"?Lt.useLayoutEffect:Lt.useEffect;var vn=t=>typeof t=="string",eM=(t,e,n,r,s)=>vn(t)?(r&&e.watch.add(t),ee(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),ee(n,i))):(r&&(e.watchAll=!0),n),_m=t=>sn(t)||!PS(t);function hs(t,e,n=new WeakSet){if(_m(t)||_m(e))return t===e;if(hi(t)&&hi(e))return t.getTime()===e.getTime();const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const i of r){const a=t[i];if(!s.includes(i))return!1;if(i!=="ref"){const l=e[i];if(hi(a)&&hi(l)||ht(a)&&ht(l)||Array.isArray(a)&&Array.isArray(l)?!hs(a,l,n):a!==l)return!1}}return!0}var tM=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},ml=t=>Array.isArray(t)?t:[t],tb=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}};function DS(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const s=t[r],i=e[r];if(s&&ht(s)&&i){const a=DS(s,i);ht(a)&&(n[r]=a)}else t[r]&&(n[r]=i)}return n}var tn=t=>ht(t)&&!Object.keys(t).length,G0=t=>t.type==="file",Wn=t=>typeof t=="function",Sd=t=>{if(!q0)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},OS=t=>t.type==="select-multiple",K0=t=>t.type==="radio",nM=t=>K0(t)||fc(t),zf=t=>Sd(t)&&t.isConnected;function rM(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=rt(t)?r++:t[e[r++]];return t}function sM(t){for(const e in t)if(t.hasOwnProperty(e)&&!rt(t[e]))return!1;return!0}function ot(t,e){const n=Array.isArray(e)?e:kh(e)?[e]:W0(e),r=n.length===1?t:rM(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(ht(r)&&tn(r)||Array.isArray(r)&&sM(r))&&ot(t,n.slice(0,-1)),t}var iM=t=>{for(const e in t)if(Wn(t[e]))return!0;return!1};function LS(t){return Array.isArray(t)||ht(t)&&!iM(t)}function Em(t,e={}){for(const n in t)LS(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Em(t[n],e[n])):rt(t[n])||(e[n]=!0);return e}function no(t,e,n){n||(n=Em(e));for(const r in t)LS(t[r])?rt(e)||_m(n[r])?n[r]=Em(t[r],Array.isArray(t[r])?[]:{}):no(t[r],sn(e)?{}:e[r],n[r]):n[r]=!hs(t[r],e[r]);return n}const nb={value:!1,isValid:!1},rb={value:!0,isValid:!0};var VS=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!rt(t[0].attributes.value)?rt(t[0].value)||t[0].value===""?rb:{value:t[0].value,isValid:!0}:rb:nb}return nb},MS=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>rt(t)?t:e?t===""?NaN:t&&+t:n&&vn(t)?new Date(t):r?r(t):t;const sb={isValid:!1,value:null};var FS=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,sb):sb;function ib(t){const e=t.ref;return G0(e)?e.files:K0(e)?FS(t.refs).value:OS(e)?[...e.selectedOptions].map(({value:n})=>n):fc(e)?VS(t.refs).value:MS(rt(e.value)?t.ref.value:e.value,t)}var oM=(t,e,n,r)=>{const s={};for(const i of t){const a=ee(e,i);a&&$e(s,i,a._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},Id=t=>t instanceof RegExp,Ua=t=>rt(t)?t:Id(t)?t.source:ht(t)?Id(t.value)?t.value.source:t.value:t,ob=t=>({isOnSubmit:!t||t===Hn.onSubmit,isOnBlur:t===Hn.onBlur,isOnChange:t===Hn.onChange,isOnAll:t===Hn.all,isOnTouch:t===Hn.onTouched});const ab="AsyncFunction";var aM=t=>!!t&&!!t.validate&&!!(Wn(t.validate)&&t.validate.constructor.name===ab||ht(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===ab)),lM=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),lb=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const gl=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=ee(t,s);if(i){const{_f:a,...l}=i;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],s)&&!r)return!0;if(a.ref&&e(a.ref,a.name)&&!r)return!0;if(gl(l,e))break}else if(ht(l)&&gl(l,e))break}}};function cb(t,e,n){const r=ee(t,n);if(r||kh(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),a=ee(e,i),l=ee(t,i);if(a&&!Array.isArray(a)&&n!==i)return{name:n};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};s.pop()}return{name:n}}var cM=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return tn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(a=>e[a]===(!r||Hn.all))},uM=(t,e,n)=>!t||!e||t===e||ml(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),dM=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,hM=(t,e)=>!H0(ee(t,e)).length&&ot(t,e),fM=(t,e,n)=>{const r=ml(ee(t,n));return $e(r,"root",e[n]),$e(t,n,r),t};function ub(t,e,n="validate"){if(vn(t)||Array.isArray(t)&&t.every(vn)||ar(t)&&!t)return{type:n,message:vn(t)?t:"",ref:e}}var Yi=t=>ht(t)&&!Id(t)?t:{value:t,message:""},db=async(t,e,n,r,s,i)=>{const{ref:a,refs:l,required:c,maxLength:d,minLength:h,min:f,max:m,pattern:w,validate:y,name:E,valueAsNumber:v,mount:T}=t._f,x=ee(n,E);if(!T||e.has(E))return{};const N=l?l[0]:a,R=P=>{s&&N.reportValidity&&(N.setCustomValidity(ar(P)?"":P||""),N.reportValidity())},C={},L=K0(a),b=fc(a),_=L||b,A=(v||G0(a))&&rt(a.value)&&rt(x)||Sd(a)&&a.value===""||x===""||Array.isArray(x)&&!x.length,j=tM.bind(null,E,r,C),I=(P,k,oe,ge=Sr.maxLength,te=Sr.minLength)=>{const fe=P?k:oe;C[E]={type:P?ge:te,message:fe,ref:a,...j(P?ge:te,fe)}};if(i?!Array.isArray(x)||!x.length:c&&(!_&&(A||sn(x))||ar(x)&&!x||b&&!VS(l).isValid||L&&!FS(l).isValid)){const{value:P,message:k}=vn(c)?{value:!!c,message:c}:Yi(c);if(P&&(C[E]={type:Sr.required,message:k,ref:N,...j(Sr.required,k)},!r))return R(k),C}if(!A&&(!sn(f)||!sn(m))){let P,k;const oe=Yi(m),ge=Yi(f);if(!sn(x)&&!isNaN(x)){const te=a.valueAsNumber||x&&+x;sn(oe.value)||(P=te>oe.value),sn(ge.value)||(k=te<ge.value)}else{const te=a.valueAsDate||new Date(x),fe=re=>new Date(new Date().toDateString()+" "+re),q=a.type=="time",ne=a.type=="week";vn(oe.value)&&x&&(P=q?fe(x)>fe(oe.value):ne?x>oe.value:te>new Date(oe.value)),vn(ge.value)&&x&&(k=q?fe(x)<fe(ge.value):ne?x<ge.value:te<new Date(ge.value))}if((P||k)&&(I(!!P,oe.message,ge.message,Sr.max,Sr.min),!r))return R(C[E].message),C}if((d||h)&&!A&&(vn(x)||i&&Array.isArray(x))){const P=Yi(d),k=Yi(h),oe=!sn(P.value)&&x.length>+P.value,ge=!sn(k.value)&&x.length<+k.value;if((oe||ge)&&(I(oe,P.message,k.message),!r))return R(C[E].message),C}if(w&&!A&&vn(x)){const{value:P,message:k}=Yi(w);if(Id(P)&&!x.match(P)&&(C[E]={type:Sr.pattern,message:k,ref:a,...j(Sr.pattern,k)},!r))return R(k),C}if(y){if(Wn(y)){const P=await y(x,n),k=ub(P,N);if(k&&(C[E]={...k,...j(Sr.validate,k.message)},!r))return R(k.message),C}else if(ht(y)){let P={};for(const k in y){if(!tn(P)&&!r)break;const oe=ub(await y[k](x,n),N,k);oe&&(P={...oe,...j(k,oe.message)},R(oe.message),r&&(C[E]=P))}if(!tn(P)&&(C[E]={ref:N,...P},!r))return C}}return R(!0),C};const pM={mode:Hn.onSubmit,reValidateMode:Hn.onChange,shouldFocusError:!0};function mM(t={}){let e={...pM,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Wn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=ht(e.defaultValues)||ht(e.values)?bt(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:bt(s),a={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...h};const m={array:tb(),state:tb()},w=e.criteriaMode===Hn.all,y=D=>M=>{clearTimeout(d),d=setTimeout(D,M)},E=async D=>{if(!e.disabled&&(h.isValid||f.isValid||D)){const M=e.resolver?tn((await b()).errors):await A(r,!0);M!==n.isValid&&m.state.next({isValid:M})}},v=(D,M)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((D||Array.from(l.mount)).forEach(B=>{B&&(M?$e(n.validatingFields,B,M):ot(n.validatingFields,B))}),m.state.next({validatingFields:n.validatingFields,isValidating:!tn(n.validatingFields)}))},T=(D,M=[],B,J,K=!0,W=!0)=>{if(J&&B&&!e.disabled){if(a.action=!0,W&&Array.isArray(ee(r,D))){const se=B(ee(r,D),J.argA,J.argB);K&&$e(r,D,se)}if(W&&Array.isArray(ee(n.errors,D))){const se=B(ee(n.errors,D),J.argA,J.argB);K&&$e(n.errors,D,se),hM(n.errors,D)}if((h.touchedFields||f.touchedFields)&&W&&Array.isArray(ee(n.touchedFields,D))){const se=B(ee(n.touchedFields,D),J.argA,J.argB);K&&$e(n.touchedFields,D,se)}(h.dirtyFields||f.dirtyFields)&&(n.dirtyFields=no(s,i)),m.state.next({name:D,isDirty:I(D,M),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else $e(i,D,M)},x=(D,M)=>{$e(n.errors,D,M),m.state.next({errors:n.errors})},N=D=>{n.errors=D,m.state.next({errors:n.errors,isValid:!1})},R=(D,M,B,J)=>{const K=ee(r,D);if(K){const W=ee(i,D,rt(B)?ee(s,D):B);rt(W)||J&&J.defaultChecked||M?$e(i,D,M?W:ib(K._f)):oe(D,W),a.mount&&E()}},C=(D,M,B,J,K)=>{let W=!1,se=!1;const Ie={name:D};if(!e.disabled){if(!B||J){(h.isDirty||f.isDirty)&&(se=n.isDirty,n.isDirty=Ie.isDirty=I(),W=se!==Ie.isDirty);const Ae=hs(ee(s,D),M);se=!!ee(n.dirtyFields,D),Ae?ot(n.dirtyFields,D):$e(n.dirtyFields,D,!0),Ie.dirtyFields=n.dirtyFields,W=W||(h.dirtyFields||f.dirtyFields)&&se!==!Ae}if(B){const Ae=ee(n.touchedFields,D);Ae||($e(n.touchedFields,D,B),Ie.touchedFields=n.touchedFields,W=W||(h.touchedFields||f.touchedFields)&&Ae!==B)}W&&K&&m.state.next(Ie)}return W?Ie:{}},L=(D,M,B,J)=>{const K=ee(n.errors,D),W=(h.isValid||f.isValid)&&ar(M)&&n.isValid!==M;if(e.delayError&&B?(c=y(()=>x(D,B)),c(e.delayError)):(clearTimeout(d),c=null,B?$e(n.errors,D,B):ot(n.errors,D)),(B?!hs(K,B):K)||!tn(J)||W){const se={...J,...W&&ar(M)?{isValid:M}:{},errors:n.errors,name:D};n={...n,...se},m.state.next(se)}},b=async D=>{v(D,!0);const M=await e.resolver(i,e.context,oM(D||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return v(D),M},_=async D=>{const{errors:M}=await b(D);if(D)for(const B of D){const J=ee(M,B);J?$e(n.errors,B,J):ot(n.errors,B)}else n.errors=M;return M},A=async(D,M,B={valid:!0})=>{for(const J in D){const K=D[J];if(K){const{_f:W,...se}=K;if(W){const Ie=l.array.has(W.name),Ae=K._f&&aM(K._f);Ae&&h.validatingFields&&v([W.name],!0);const en=await db(K,l.disabled,i,w,e.shouldUseNativeValidation&&!M,Ie);if(Ae&&h.validatingFields&&v([W.name]),en[W.name]&&(B.valid=!1,M))break;!M&&(ee(en,W.name)?Ie?fM(n.errors,en,W.name):$e(n.errors,W.name,en[W.name]):ot(n.errors,W.name))}!tn(se)&&await A(se,M,B)}}return B.valid},j=()=>{for(const D of l.unMount){const M=ee(r,D);M&&(M._f.refs?M._f.refs.every(B=>!zf(B)):!zf(M._f.ref))&&Ht(D)}l.unMount=new Set},I=(D,M)=>!e.disabled&&(D&&M&&$e(i,D,M),!hs(re(),s)),P=(D,M,B)=>eM(D,l,{...a.mount?i:rt(M)?s:vn(D)?{[D]:M}:M},B,M),k=D=>H0(ee(a.mount?i:s,D,e.shouldUnregister?ee(s,D,[]):[])),oe=(D,M,B={})=>{const J=ee(r,D);let K=M;if(J){const W=J._f;W&&(!W.disabled&&$e(i,D,MS(M,W)),K=Sd(W.ref)&&sn(M)?"":M,OS(W.ref)?[...W.ref.options].forEach(se=>se.selected=K.includes(se.value)):W.refs?fc(W.ref)?W.refs.forEach(se=>{(!se.defaultChecked||!se.disabled)&&(Array.isArray(K)?se.checked=!!K.find(Ie=>Ie===se.value):se.checked=K===se.value||!!K)}):W.refs.forEach(se=>se.checked=se.value===K):G0(W.ref)?W.ref.value="":(W.ref.value=K,W.ref.type||m.state.next({name:D,values:bt(i)})))}(B.shouldDirty||B.shouldTouch)&&C(D,K,B.shouldTouch,B.shouldDirty,!0),B.shouldValidate&&ne(D)},ge=(D,M,B)=>{for(const J in M){if(!M.hasOwnProperty(J))return;const K=M[J],W=D+"."+J,se=ee(r,W);(l.array.has(D)||ht(K)||se&&!se._f)&&!hi(K)?ge(W,K,B):oe(W,K,B)}},te=(D,M,B={})=>{const J=ee(r,D),K=l.array.has(D),W=bt(M);$e(i,D,W),K?(m.array.next({name:D,values:bt(i)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&B.shouldDirty&&m.state.next({name:D,dirtyFields:no(s,i),isDirty:I(D,W)})):J&&!J._f&&!sn(W)?ge(D,W,B):oe(D,W,B),lb(D,l)&&m.state.next({...n,name:D}),m.state.next({name:a.mount?D:void 0,values:bt(i)})},fe=async D=>{a.mount=!0;const M=D.target;let B=M.name,J=!0;const K=ee(r,B),W=Ae=>{J=Number.isNaN(Ae)||hi(Ae)&&isNaN(Ae.getTime())||hs(Ae,ee(i,B,Ae))},se=ob(e.mode),Ie=ob(e.reValidateMode);if(K){let Ae,en;const Hi=M.type?ib(K._f):GV(D),Un=D.type===eb.BLUR||D.type===eb.FOCUS_OUT,bc=!lM(K._f)&&!e.resolver&&!ee(n.errors,B)&&!K._f.deps||dM(Un,ee(n.touchedFields,B),n.isSubmitted,Ie,se),Tr=lb(B,l,Un);$e(i,B,Hi),Un?(!M||!M.readOnly)&&(K._f.onBlur&&K._f.onBlur(D),c&&c(0)):K._f.onChange&&K._f.onChange(D);const Ys=C(B,Hi,Un),ga=!tn(Ys)||Tr;if(!Un&&m.state.next({name:B,type:D.type,values:bt(i)}),bc)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?Un&&E():Un||E()),ga&&m.state.next({name:B,...Tr?{}:Ys});if(!Un&&Tr&&m.state.next({...n}),e.resolver){const{errors:er}=await b([B]);if(W(Hi),J){const _c=cb(n.errors,r,B),Xs=cb(er,r,_c.name||B);Ae=Xs.error,B=Xs.name,en=tn(er)}}else v([B],!0),Ae=(await db(K,l.disabled,i,w,e.shouldUseNativeValidation))[B],v([B]),W(Hi),J&&(Ae?en=!1:(h.isValid||f.isValid)&&(en=await A(r,!0)));J&&(K._f.deps&&(!Array.isArray(K._f.deps)||K._f.deps.length>0)&&ne(K._f.deps),L(B,en,Ae,Ys))}},q=(D,M)=>{if(ee(n.errors,M)&&D.focus)return D.focus(),1},ne=async(D,M={})=>{let B,J;const K=ml(D);if(e.resolver){const W=await _(rt(D)?D:K);B=tn(W),J=D?!K.some(se=>ee(W,se)):B}else D?(J=(await Promise.all(K.map(async W=>{const se=ee(r,W);return await A(se&&se._f?{[W]:se}:se)}))).every(Boolean),!(!J&&!n.isValid)&&E()):J=B=await A(r);return m.state.next({...!vn(D)||(h.isValid||f.isValid)&&B!==n.isValid?{}:{name:D},...e.resolver||!D?{isValid:B}:{},errors:n.errors}),M.shouldFocus&&!J&&gl(r,q,D?K:l.mount),J},re=(D,M)=>{let B={...a.mount?i:s};return M&&(B=DS(M.dirtyFields?n.dirtyFields:n.touchedFields,B)),rt(D)?B:vn(D)?ee(B,D):D.map(J=>ee(B,J))},ye=(D,M)=>({invalid:!!ee((M||n).errors,D),isDirty:!!ee((M||n).dirtyFields,D),error:ee((M||n).errors,D),isValidating:!!ee(n.validatingFields,D),isTouched:!!ee((M||n).touchedFields,D)}),Te=D=>{D&&ml(D).forEach(M=>ot(n.errors,M)),m.state.next({errors:D?n.errors:{}})},De=(D,M,B)=>{const J=(ee(r,D,{_f:{}})._f||{}).ref,K=ee(n.errors,D)||{},{ref:W,message:se,type:Ie,...Ae}=K;$e(n.errors,D,{...Ae,...M,ref:J}),m.state.next({name:D,errors:n.errors,isValid:!1}),B&&B.shouldFocus&&J&&J.focus&&J.focus()},tt=(D,M)=>Wn(D)?m.state.subscribe({next:B=>"values"in B&&D(P(void 0,M),B)}):P(D,M,!0),vt=D=>m.state.subscribe({next:M=>{uM(D.name,M.name,D.exact)&&cM(M,D.formState||h,ma,D.reRenderRoot)&&D.callback({values:{...i},...n,...M,defaultValues:s})}}).unsubscribe,Rt=D=>(a.mount=!0,f={...f,...D.formState},vt({...D,formState:f})),Ht=(D,M={})=>{for(const B of D?ml(D):l.mount)l.mount.delete(B),l.array.delete(B),M.keepValue||(ot(r,B),ot(i,B)),!M.keepError&&ot(n.errors,B),!M.keepDirty&&ot(n.dirtyFields,B),!M.keepTouched&&ot(n.touchedFields,B),!M.keepIsValidating&&ot(n.validatingFields,B),!e.shouldUnregister&&!M.keepDefaultValue&&ot(s,B);m.state.next({values:bt(i)}),m.state.next({...n,...M.keepDirty?{isDirty:I()}:{}}),!M.keepIsValid&&E()},Er=({disabled:D,name:M})=>{(ar(D)&&a.mount||D||l.disabled.has(M))&&(D?l.disabled.add(M):l.disabled.delete(M))},xe=(D,M={})=>{let B=ee(r,D);const J=ar(M.disabled)||ar(e.disabled);return $e(r,D,{...B||{},_f:{...B&&B._f?B._f:{ref:{name:D}},name:D,mount:!0,...M}}),l.mount.add(D),B?Er({disabled:ar(M.disabled)?M.disabled:e.disabled,name:D}):R(D,!0,M.value),{...J?{disabled:M.disabled||e.disabled}:{},...e.progressive?{required:!!M.required,min:Ua(M.min),max:Ua(M.max),minLength:Ua(M.minLength),maxLength:Ua(M.maxLength),pattern:Ua(M.pattern)}:{},name:D,onChange:fe,onBlur:fe,ref:K=>{if(K){xe(D,M),B=ee(r,D);const W=rt(K.value)&&K.querySelectorAll&&K.querySelectorAll("input,select,textarea")[0]||K,se=nM(W),Ie=B._f.refs||[];if(se?Ie.find(Ae=>Ae===W):W===B._f.ref)return;$e(r,D,{_f:{...B._f,...se?{refs:[...Ie.filter(zf),W,...Array.isArray(ee(s,D))?[{}]:[]],ref:{type:W.type,name:D}}:{ref:W}}}),R(D,!1,void 0,W)}else B=ee(r,D,{}),B._f&&(B._f.mount=!1),(e.shouldUnregister||M.shouldUnregister)&&!(QV(l.array,D)&&a.action)&&l.unMount.add(D)}}},ke=()=>e.shouldFocusError&&gl(r,q,l.mount),da=D=>{ar(D)&&(m.state.next({disabled:D}),gl(r,(M,B)=>{const J=ee(r,B);J&&(M.disabled=J._f.disabled||D,Array.isArray(J._f.refs)&&J._f.refs.forEach(K=>{K.disabled=J._f.disabled||D}))},0,!1))},Nr=(D,M)=>async B=>{let J;B&&(B.preventDefault&&B.preventDefault(),B.persist&&B.persist());let K=bt(i);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:W,values:se}=await b();n.errors=W,K=bt(se)}else await A(r);if(l.disabled.size)for(const W of l.disabled)ot(K,W);if(ot(n.errors,"root"),tn(n.errors)){m.state.next({errors:{}});try{await D(K,B)}catch(W){J=W}}else M&&await M({...n.errors},B),ke(),setTimeout(ke);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:tn(n.errors)&&!J,submitCount:n.submitCount+1,errors:n.errors}),J)throw J},ha=(D,M={})=>{ee(r,D)&&(rt(M.defaultValue)?te(D,bt(ee(s,D))):(te(D,M.defaultValue),$e(s,D,bt(M.defaultValue))),M.keepTouched||ot(n.touchedFields,D),M.keepDirty||(ot(n.dirtyFields,D),n.isDirty=M.defaultValue?I(D,bt(ee(s,D))):I()),M.keepError||(ot(n.errors,D),h.isValid&&E()),m.state.next({...n}))},fa=(D,M={})=>{const B=D?bt(D):s,J=bt(B),K=tn(D),W=K?s:J;if(M.keepDefaultValues||(s=B),!M.keepValues){if(M.keepDirtyValues){const se=new Set([...l.mount,...Object.keys(no(s,i))]);for(const Ie of Array.from(se))ee(n.dirtyFields,Ie)?$e(W,Ie,ee(i,Ie)):te(Ie,ee(W,Ie))}else{if(q0&&rt(D))for(const se of l.mount){const Ie=ee(r,se);if(Ie&&Ie._f){const Ae=Array.isArray(Ie._f.refs)?Ie._f.refs[0]:Ie._f.ref;if(Sd(Ae)){const en=Ae.closest("form");if(en){en.reset();break}}}}if(M.keepFieldsRef)for(const se of l.mount)te(se,ee(W,se));else r={}}i=e.shouldUnregister?M.keepDefaultValues?bt(s):{}:bt(W),m.array.next({values:{...W}}),m.state.next({values:{...W}})}l={mount:M.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!h.isValid||!!M.keepIsValid||!!M.keepDirtyValues,a.watch=!!e.shouldUnregister,m.state.next({submitCount:M.keepSubmitCount?n.submitCount:0,isDirty:K?!1:M.keepDirty?n.isDirty:!!(M.keepDefaultValues&&!hs(D,s)),isSubmitted:M.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:K?{}:M.keepDirtyValues?M.keepDefaultValues&&i?no(s,i):n.dirtyFields:M.keepDefaultValues&&D?no(s,D):M.keepDirty?n.dirtyFields:{},touchedFields:M.keepTouched?n.touchedFields:{},errors:M.keepErrors?n.errors:{},isSubmitSuccessful:M.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},wc=(D,M)=>fa(Wn(D)?D(i):D,M),pa=(D,M={})=>{const B=ee(r,D),J=B&&B._f;if(J){const K=J.refs?J.refs[0]:J.ref;K.focus&&(K.focus(),M.shouldSelect&&Wn(K.select)&&K.select())}},ma=D=>{n={...n,...D}},ft={control:{register:xe,unregister:Ht,getFieldState:ye,handleSubmit:Nr,setError:De,_subscribe:vt,_runSchema:b,_focusError:ke,_getWatch:P,_getDirty:I,_setValid:E,_setFieldArray:T,_setDisabledField:Er,_setErrors:N,_getFieldArray:k,_reset:fa,_resetDefaultValues:()=>Wn(e.defaultValues)&&e.defaultValues().then(D=>{wc(D,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:j,_disableForm:da,_subjects:m,_proxyFormState:h,get _fields(){return r},get _formValues(){return i},get _state(){return a},set _state(D){a=D},get _defaultValues(){return s},get _names(){return l},set _names(D){l=D},get _formState(){return n},get _options(){return e},set _options(D){e={...e,...D}}},subscribe:Rt,trigger:ne,register:xe,handleSubmit:Nr,watch:tt,setValue:te,getValues:re,reset:wc,resetField:ha,clearErrors:Te,unregister:Ht,setError:De,setFocus:pa,getFieldState:ye};return{...ft,formControl:ft}}function pc(t={}){const e=Lt.useRef(void 0),n=Lt.useRef(void 0),[r,s]=Lt.useState({isDirty:!1,isValidating:!1,isLoading:Wn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Wn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Wn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:a,...l}=mM(t);e.current={...l,formState:r}}const i=e.current.control;return i._options=t,ZV(()=>{const a=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),i._formState.isReady=!0,a},[i]),Lt.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Lt.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),Lt.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),Lt.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),Lt.useEffect(()=>{if(i._proxyFormState.isDirty){const a=i._getDirty();a!==r.isDirty&&i._subjects.state.next({isDirty:a})}},[i,r.isDirty]),Lt.useEffect(()=>{t.values&&!hs(t.values,n.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),n.current=t.values,s(a=>({...a}))):i._resetDefaultValues()},[i,t.values]),Lt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=XV(r,i),e.current}function gM(){const t=gn(),{login:e,loading:n}=Ye(),[r,s]=O.useState(""),{register:i,handleSubmit:a,formState:{errors:l}}=pc(),c=async d=>{s("");const h=await e(d.email,d.password);h.success?t("/dashboard"):h.needsVerification?s("이메일 인증이 필요합니다. 이메일을 확인하고 인증 링크를 클릭해주세요."):s(h.error||"로그인에 실패했습니다.")};return o.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-md w-full relative z-10",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center mx-auto mb-6 relative",children:[o.jsx(CS,{className:"w-10 h-10 text-white"}),o.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})]}),o.jsx("h2",{className:"text-4xl font-black text-white mb-2",children:"ACCESS SYSTEM"}),o.jsx("p",{className:"text-gray-400",children:"Enter your credentials"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 p-8",children:[r&&o.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/50",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(zi,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-mono text-sm text-red-400 mb-2",children:["ERROR: ",r]}),r.includes("이메일 인증")&&o.jsx("p",{className:"text-xs text-gray-400",children:"스팸 메일함을 포함하여 이메일을 확인해주세요."})]})]})}),o.jsxs("form",{onSubmit:a(c),className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"EMAIL"}),o.jsxs("div",{className:"relative",children:[o.jsx(Bs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),o.jsx("input",{...i("email",{required:"이메일을 입력하세요",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"올바른 이메일 형식이 아닙니다"}}),type:"email",className:"w-full pl-12 pr-4 py-3 bg-black/50 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors font-mono",placeholder:"Enter your email"})]}),l.email&&o.jsx("p",{className:"mt-2 text-sm text-red-400 font-mono",children:l.email.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"PASSWORD"}),o.jsxs("div",{className:"relative",children:[o.jsx(Kl,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),o.jsx("input",{...i("password",{required:"비밀번호를 입력하세요"}),type:"password",className:"w-full pl-12 pr-4 py-3 bg-black/50 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors font-mono",placeholder:"Enter password"})]}),l.password&&o.jsx("p",{className:"mt-2 text-sm text-red-400 font-mono",children:l.password.message})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("label",{className:"flex items-center cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 bg-black/50 border border-white/10 checked:bg-purple-500 focus:ring-0"}),o.jsx("span",{className:"ml-2 text-sm text-gray-400 group-hover:text-white transition-colors",children:"Remember me"})]}),o.jsx(Y,{to:"/forgot-password",className:"text-sm text-purple-400 hover:text-purple-300 transition-colors",children:"Forgot password?"})]}),o.jsxs("button",{type:"submit",disabled:n,className:"w-full py-4 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold tracking-wider hover:shadow-lg hover:shadow-purple-500/50 transition-all relative overflow-hidden group disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("span",{className:"relative z-10",children:n?"LOADING...":"ACCESS GRANTED"}),o.jsx("div",{className:"absolute inset-0 bg-white/20 transform translate-y-full group-hover:translate-y-0 transition-transform"})]})]}),o.jsx("div",{className:"mt-8 text-center",children:o.jsxs("p",{className:"text-sm text-gray-400",children:["Don't have an account?"," ",o.jsx(Y,{to:"/signup",className:"text-purple-400 hover:text-purple-300 font-bold transition-colors",children:"Create Account"})]})})]})]})]})}function yM(){const t=gn(),{signup:e,loading:n}=Ye(),[r,s]=O.useState(""),[i,a]=O.useState(!1),[l,c]=O.useState(""),{register:d,handleSubmit:h,watch:f,formState:{errors:m}}=pc(),w=f("password"),y=async E=>{s(""),a(!1);const v=await e(E.email,E.password,E.displayName);v.success&&v.needsVerification?(a(!0),c(E.email)):v.success?t("/dashboard"):s(v.error||"회원가입에 실패했습니다.")};return o.jsxs("div",{className:"min-h-screen bg-black py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-20 left-20 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),o.jsxs("div",{className:"max-w-4xl w-full mx-auto relative z-10",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsxs("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center mx-auto mb-6 relative",children:[o.jsx(CS,{className:"w-12 h-12 text-white"}),o.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})]}),o.jsx("h2",{className:"text-5xl font-black text-white mb-3",children:"CREATE ACCOUNT"}),o.jsx("p",{className:"text-gray-400 text-lg",children:"Join the elite security community"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 p-10",children:[i&&o.jsx("div",{className:"mb-6 p-6 bg-green-500/10 border border-green-500/50",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx(Ln,{className:"w-6 h-6 text-green-400 flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:"회원가입 완료!"}),o.jsxs("p",{className:"text-gray-300 mb-3",children:[o.jsx("span",{className:"font-bold text-white",children:l}),"로 인증 이메일이 발송되었습니다."]}),o.jsx("div",{className:"bg-black/30 border border-yellow-500/30 p-4 rounded mb-3",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(zi,{className:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"text-sm text-gray-300",children:[o.jsx("p",{className:"font-bold text-yellow-400 mb-1",children:"이메일이 보이지 않나요?"}),o.jsxs("ul",{className:"space-y-1 text-gray-400",children:[o.jsxs("li",{children:["• ",o.jsx("span",{className:"text-white font-semibold",children:"스팸 메일함"}),"을 확인해주세요"]}),o.jsx("li",{children:"• 이메일 도착까지 최대 5분 소요될 수 있습니다"}),o.jsx("li",{children:"• 이메일 주소를 정확히 입력했는지 확인해주세요"})]})]})]})}),o.jsxs("p",{className:"text-sm text-gray-400",children:["이메일의 인증 링크를 클릭한 후 ",o.jsx(Y,{to:"/login",className:"text-purple-400 hover:text-purple-300 font-bold underline",children:"로그인"}),"해주세요."]})]})]})}),r&&o.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/50 text-red-400",children:o.jsxs("span",{className:"font-mono text-sm",children:["ERROR: ",r]})}),o.jsxs("form",{onSubmit:h(y),className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"DISPLAY NAME *"}),o.jsxs("div",{className:"relative",children:[o.jsx(qi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),o.jsx("input",{...d("displayName",{required:"이름을 입력하세요",minLength:{value:2,message:"2자 이상 입력하세요"}}),type:"text",className:"w-full pl-12 pr-4 py-3 bg-black/50 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors font-mono",placeholder:"Enter your name"})]}),m.displayName&&o.jsx("p",{className:"mt-2 text-sm text-red-400 font-mono",children:m.displayName.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"EMAIL *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Bs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),o.jsx("input",{...d("email",{required:"이메일을 입력하세요",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"올바른 이메일 형식이 아닙니다"}}),type:"email",className:"w-full pl-12 pr-4 py-3 bg-black/50 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors font-mono",placeholder:"your@email.com"})]}),m.email&&o.jsx("p",{className:"mt-2 text-sm text-red-400 font-mono",children:m.email.message})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"PASSWORD *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Kl,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),o.jsx("input",{...d("password",{required:"비밀번호를 입력하세요",minLength:{value:6,message:"6자 이상 입력하세요"}}),type:"password",className:"w-full pl-12 pr-4 py-3 bg-black/50 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors font-mono",placeholder:"Enter password"})]}),m.password&&o.jsx("p",{className:"mt-2 text-sm text-red-400 font-mono",children:m.password.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"CONFIRM PASSWORD *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Kl,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),o.jsx("input",{...d("confirmPassword",{required:"비밀번호를 다시 입력하세요",validate:E=>E===w||"비밀번호가 일치하지 않습니다"}),type:"password",className:"w-full pl-12 pr-4 py-3 bg-black/50 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors font-mono",placeholder:"Confirm password"})]}),m.confirmPassword&&o.jsx("p",{className:"mt-2 text-sm text-red-400 font-mono",children:m.confirmPassword.message})]})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("input",{type:"checkbox",required:!0,className:"mt-1 w-4 h-4 bg-black/50 border border-white/10 checked:bg-purple-500 focus:ring-0"}),o.jsxs("label",{className:"ml-3 text-sm text-gray-400",children:[o.jsx(Y,{to:"/terms",className:"text-purple-400 hover:text-purple-300",children:"이용약관"})," 및"," ",o.jsx(Y,{to:"/privacy",className:"text-purple-400 hover:text-purple-300",children:"개인정보처리방침"}),"에 동의합니다."]})]}),o.jsxs("button",{type:"submit",disabled:n,className:"w-full py-4 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold tracking-wider hover:shadow-lg hover:shadow-purple-500/50 transition-all relative overflow-hidden group disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("span",{className:"relative z-10",children:n?"CREATING...":"CREATE ACCOUNT"}),o.jsx("div",{className:"absolute inset-0 bg-white/20 transform translate-y-full group-hover:translate-y-0 transition-transform"})]})]}),o.jsx("div",{className:"mt-8 text-center",children:o.jsxs("p",{className:"text-sm text-gray-400",children:["Already have an account?"," ",o.jsx(Y,{to:"/login",className:"text-purple-400 hover:text-purple-300 font-bold transition-colors",children:"Sign In"})]})})]})]})]})}const Q0=async()=>{try{const t=ut(de,"courses"),e=_r(t,aa("createdAt","desc"));return(await Qt(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){return console.error("Error getting courses:",t),[]}},xM=async(t,e)=>{if(!t||!e)return null;try{const n=Me(de,"enrollments",`${e}_${t}`),r=await Bt(n);return r.exists()?{id:r.id,...r.data()}:null}catch(n){return console.error("Error fetching enrollment:",n),null}},vM=async(t,e,n)=>{if(!t||!e)return{success:!1,error:"Invalid enrollment identifiers"};try{const r=Me(de,"enrollments",`${e}_${t}`);return await Js(r,{...n,lastAccessedAt:xt(),updatedAt:xt()}),{success:!0}}catch(r){return console.error("Error updating enrollment progress:",r),{success:!1,error:r.message}}},hb=async t=>{if(!t)return[];try{const e=ut(de,"courses"),n=_r(e,Fs("instructorId","==",t),aa("createdAt","desc"));return(await Qt(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Error getting instructor courses:",e),[]}},US=async(t,e)=>{if(!t)return{success:!1,error:"Invalid courseId"};try{const n=Me(de,"courses",t);return await Js(n,{curriculumContent:e,updatedAt:xt()}),{success:!0}}catch(n){return console.error("Error updating curriculum:",n),{success:!1,error:n.message}}},Nm=async t=>{if(!t)return[];try{const e=ut(de,"courses",t,"assignments"),n=_r(e,aa("createdAt","asc"));return(await Qt(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Error getting assignments:",e),[]}},wM=async(t,e)=>{if(!t)return{success:!1,error:"Invalid courseId"};try{const n=ut(de,"courses",t,"assignments");return{success:!0,id:(await dc(n,{title:e.title,description:e.description||"",dueDate:e.dueDate?Ce.fromDate(new Date(e.dueDate)):null,points:e.points?Number(e.points):null,order:e.order??Date.now(),createdAt:xt(),updatedAt:xt()})).id}}catch(n){return console.error("Error creating assignment:",n),{success:!1,error:n.message}}},bM=async(t,e,n)=>{if(!t||!e)return{success:!1,error:"Invalid assignment"};try{const r=Me(de,"courses",t,"assignments",e);return await Js(r,{...n,dueDate:n.dueDate?Ce.fromDate(new Date(n.dueDate)):null,points:n.points?Number(n.points):null,updatedAt:xt()}),{success:!0}}catch(r){return console.error("Error updating assignment:",r),{success:!1,error:r.message}}},_M=async(t,e)=>{if(!t||!e)return{success:!1,error:"Invalid assignment"};try{const n=Me(de,"courses",t,"assignments",e);return await C0(n),{success:!0}}catch(n){return console.error("Error deleting assignment:",n),{success:!1,error:n.message}}},EM=async t=>{if(!t)return[];try{const e=ut(de,"enrollments"),n=_r(e,Fs("courseId","==",t)),r=await Qt(n);return await Promise.all(r.docs.map(async i=>{const a=i.data();let l=null;try{if(a.userId){const c=Me(de,"users",a.userId),d=await Bt(c);d.exists()&&(l={id:d.id,...d.data()})}}catch(c){console.error("Failed to load enrollment user profile:",c)}return{id:i.id,...a,user:l}}))}catch(e){return console.error("Error getting enrollments:",e),[]}},mc=async t=>{try{const e=Me(de,"courses",t),n=await Bt(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){return console.error("Error getting course:",e),null}},NM=async t=>{try{const e={...t,maxStudents:t.maxStudents?Number(t.maxStudents):null,applicationDeadline:t.applicationDeadline?Ce.fromDate(new Date(t.applicationDeadline)):null,instructorId:t.instructorId||null},n=ut(de,"courses");return{success:!0,id:(await dc(n,{...e,createdAt:xt(),updatedAt:xt(),enrollmentCount:0,isActive:!0})).id}}catch(e){return console.error("Error creating course:",e),{success:!1,error:e.message}}},TM=async(t,e)=>{try{const n={...e,maxStudents:e.maxStudents?Number(e.maxStudents):null,applicationDeadline:e.applicationDeadline?Ce.fromDate(new Date(e.applicationDeadline)):null,instructorId:e.instructorId||null},r=Me(de,"courses",t);return await Js(r,{...n,updatedAt:xt()}),{success:!0}}catch(n){return console.error("Error updating course:",n),{success:!1,error:n.message}}},SM=async t=>{try{const e=Me(de,"courses",t);return await C0(e),{success:!0}}catch(e){return console.error("Error deleting course:",e),{success:!1,error:e.message}}},BS=async t=>{try{const e=ut(de,"enrollments"),n=_r(e,Fs("userId","==",t)),r=await Qt(n);return await Promise.all(r.docs.map(async i=>{const a=i.data(),l=await mc(a.courseId);return{id:i.id,...a,course:l}}))}catch(e){return console.error("Error getting enrollments:",e),[]}},Tm=async(t,e)=>{if(!t||!e)return!1;try{const n=Me(de,"enrollments",`${e}_${t}`);return(await Bt(n)).exists()}catch(n){return console.error("Error checking enrollment:",n),!1}},IM=async({userId:t,courseId:e})=>{if(!t||!e)return{success:!1,error:"Invalid enrollment payload"};try{const n=`${e}_${t}`,r=Me(de,"enrollments",n),s=await Bt(r);if(s.exists())return{success:!0,id:s.id};await DL(r,{userId:t,courseId:e,progress:0,completedLectures:0,totalLectures:0,enrolledAt:xt(),lastAccessedAt:xt()});const i=Me(de,"courses",e),a=await Bt(i);return a.exists()&&await Js(i,{enrollmentCount:(a.data().enrollmentCount||0)+1,updatedAt:xt()}),{success:!0,id:n}}catch(n){return console.error("Error enrolling from application:",n),{success:!1,error:n.message}}},kM=async(t,e)=>{if(!t||!e)return null;try{const n=ut(de,"applications"),r=_r(n,Fs("userId","==",t),Fs("courseId","==",e),j0(1)),s=await Qt(r);if(s.empty)return null;const i=s.docs[0],a=i.data(),l=Me(de,"courses",a.courseId),c=await Bt(l),d=c.exists()?{id:c.id,...c.data()}:null;return{id:i.id,...a,course:d}}catch(n){return console.error("Error fetching user course application:",n),null}},$S=async t=>{try{const e=ut(de,"applications"),n=_r(e,Fs("userId","==",t),aa("createdAt","desc")),r=await Qt(n);return await Promise.all(r.docs.map(async i=>{const a=i.data(),l=Me(de,"courses",a.courseId),c=await Bt(l),d=c.exists()?{id:c.id,...c.data()}:null;return{id:i.id,...a,course:d}}))}catch(e){return console.error("Error getting applications:",e),[]}},AM=async()=>{try{const t=ut(de,"applications"),e=_r(t,aa("createdAt","desc")),n=await Qt(e);return await Promise.all(n.docs.map(async s=>{const i=s.data(),a=Me(de,"users",i.userId),l=await Bt(a),c=l.exists()?{id:l.id,...l.data()}:null,d=Me(de,"courses",i.courseId),h=await Bt(d),f=h.exists()?{id:h.id,...h.data()}:null;return{id:s.id,...i,user:c,course:f}}))}catch(t){return console.error("Error getting all applications:",t),[]}},jM=async t=>{try{const{userId:e,courseId:n}=t;if(!e||!n)return{success:!1,error:"잘못된 신청 정보입니다."};const r=Me(de,"courses",n),s=await Bt(r);if(!s.exists())return{success:!1,error:"강의를 찾을 수 없습니다."};const i=s.data();if(i.applicationDeadline&&(i.applicationDeadline.toDate?i.applicationDeadline.toDate():new Date(i.applicationDeadline)).getTime()<Date.now())return{success:!1,error:"신청 기간이 종료된 강의입니다."};if(i.maxStudents&&(i.enrollmentCount||0)>=i.maxStudents)return{success:!1,error:"해당 강의는 정원이 마감되었습니다."};const a=_r(ut(de,"applications"),Fs("userId","==",e),Fs("courseId","==",n),j0(1));if(!(await Qt(a)).empty)return{success:!1,error:"이미 해당 강의에 지원하셨습니다."};const c=ut(de,"applications"),d=`APP-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;return{success:!0,id:(await dc(c,{...t,applicationNumber:d,status:"SUBMITTED",createdAt:xt(),updatedAt:xt()})).id,applicationNumber:d}}catch(e){return console.error("Error creating application:",e),{success:!1,error:e.message}}},CM=async t=>{try{return(await pV(gV,"confirmEnrollment")({applicationId:t})).data}catch(e){return console.error("Error confirming enrollment:",e),{success:!1,error:e.message}}},zS=async(t,e,n="")=>{try{const r=Me(de,"applications",t);return await Js(r,{status:e,statusNote:n,updatedAt:xt()}),{success:!0}}catch(r){return console.error("Error updating application status:",r),{success:!1,error:r.message}}},qS=async t=>{try{const e=Me(de,"applications",t),n=await Bt(e);if(n.exists()){const r=n.data(),s=Me(de,"users",r.userId),i=await Bt(s),a=i.exists()?{id:i.id,...i.data()}:null,l=Me(de,"courses",r.courseId),c=await Bt(l),d=c.exists()?{id:c.id,...c.data()}:null;return{id:n.id,...r,user:a,course:d}}return null}catch(e){return console.error("Error getting application:",e),null}};function RM(){var c;const{user:t}=Ye(),[e,n]=O.useState({enrolledCourses:0,completedCourses:0,applications:0,averageProgress:0}),[r,s]=O.useState([]),[i,a]=O.useState(!0);O.useEffect(()=>{l()},[t]);const l=async()=>{if(t!=null&&t.uid)try{const d=await BS(t.uid);s(d);const h=await $S(t.uid),f=d.filter(w=>w.progress===100).length,m=d.length>0?Math.round(d.reduce((w,y)=>w+(y.progress||0),0)/d.length):0;n({enrolledCourses:d.length,completedCourses:f,applications:h.length,averageProgress:m}),a(!1)}catch(d){console.error("Error loading dashboard:",d),a(!1)}};return o.jsxs("div",{className:"min-h-screen bg-black py-12 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-5xl font-black text-white mb-3",children:"DASHBOARD"}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-purple-500 to-blue-500 mb-4"}),o.jsxs("p",{className:"text-gray-400 text-lg",children:["Welcome back, ",o.jsx("span",{className:"text-purple-400 font-bold",children:(t==null?void 0:t.displayName)||((c=t==null?void 0:t.email)==null?void 0:c.split("@")[0])})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[o.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-500/10 to-blue-500/10 backdrop-blur-xl border border-purple-500/20 p-6 hover:border-purple-500/50 transition-all duration-500",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-purple-500/20 rounded-full blur-2xl group-hover:bg-purple-500/30 transition-all"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx(kt,{className:"w-8 h-8 text-purple-400"}),o.jsx("div",{className:"text-4xl font-black text-white",children:e.enrolledCourses})]}),o.jsx("p",{className:"text-sm text-gray-400 font-bold tracking-wider",children:"ENROLLED COURSES"}),o.jsx("div",{className:"mt-4 h-1 bg-gradient-to-r from-purple-500 to-transparent"})]})]}),o.jsxs("div",{className:"group relative bg-gradient-to-br from-green-500/10 to-emerald-500/10 backdrop-blur-xl border border-green-500/20 p-6 hover:border-green-500/50 transition-all duration-500",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-green-500/20 rounded-full blur-2xl group-hover:bg-green-500/30 transition-all"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx(Ln,{className:"w-8 h-8 text-green-400"}),o.jsx("div",{className:"text-4xl font-black text-white",children:e.completedCourses})]}),o.jsx("p",{className:"text-sm text-gray-400 font-bold tracking-wider",children:"COMPLETED"}),o.jsx("div",{className:"mt-4 h-1 bg-gradient-to-r from-green-500 to-transparent"})]})]}),o.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-500/10 to-cyan-500/10 backdrop-blur-xl border border-blue-500/20 p-6 hover:border-blue-500/50 transition-all duration-500",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-blue-500/20 rounded-full blur-2xl group-hover:bg-blue-500/30 transition-all"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx(Us,{className:"w-8 h-8 text-blue-400"}),o.jsx("div",{className:"text-4xl font-black text-white",children:e.applications})]}),o.jsx("p",{className:"text-sm text-gray-400 font-bold tracking-wider",children:"APPLICATIONS"}),o.jsx("div",{className:"mt-4 h-1 bg-gradient-to-r from-blue-500 to-transparent"})]})]}),o.jsxs("div",{className:"group relative bg-gradient-to-br from-pink-500/10 to-purple-500/10 backdrop-blur-xl border border-pink-500/20 p-6 hover:border-pink-500/50 transition-all duration-500",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-pink-500/20 rounded-full blur-2xl group-hover:bg-pink-500/30 transition-all"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx(MV,{className:"w-8 h-8 text-pink-400"}),o.jsxs("div",{className:"text-4xl font-black text-white",children:[e.averageProgress,"%"]})]}),o.jsx("p",{className:"text-sm text-gray-400 font-bold tracking-wider",children:"AVG PROGRESS"}),o.jsx("div",{className:"mt-4 h-1 bg-gradient-to-r from-pink-500 to-transparent"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 bg-black/40 backdrop-blur-xl border border-white/10 p-8",children:[o.jsx("h2",{className:"text-2xl font-black text-white mb-6 tracking-wider",children:"RECENT COURSES"}),i?o.jsx("div",{className:"text-center py-12",children:o.jsx("div",{className:"text-gray-400",children:"Loading..."})}):r.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(kt,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"수강 중인 강의가 없습니다."}),o.jsx(Y,{to:"/courses",className:"mt-4 inline-block px-6 py-2 bg-purple-500/20 text-purple-400 border border-purple-500/30 font-bold hover:bg-purple-500/30 transition-all",children:"강의 둘러보기"})]}):o.jsx("div",{className:"space-y-4",children:r.map((d,h)=>{var w;const f=["from-purple-500 to-blue-500","from-blue-500 to-cyan-500","from-cyan-500 to-teal-500","from-pink-500 to-purple-500"],m=f[h%f.length];return o.jsxs("div",{className:"group flex items-center justify-between p-6 bg-white/5 border border-white/10 hover:border-purple-500/50 transition-all",children:[o.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[o.jsxs("div",{className:`w-14 h-14 bg-gradient-to-br ${m} flex items-center justify-center relative overflow-hidden`,children:[o.jsx(kt,{className:"w-7 h-7 text-white relative z-10"}),o.jsx("div",{className:"absolute inset-0 bg-white/20 group-hover:bg-white/30 transition-all"})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-white text-lg",children:((w=d.course)==null?void 0:w.title)||"강의"}),o.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[o.jsx("div",{className:"flex-1 max-w-xs h-2 bg-white/10 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full bg-gradient-to-r ${m} transition-all duration-500`,style:{width:`${d.progress||0}%`}})}),o.jsxs("span",{className:"text-sm text-gray-400 font-mono font-bold",children:[d.progress||0,"%"]})]})]})]}),o.jsx(Y,{to:`/courses/${d.courseId}/learn`,className:"px-6 py-2 bg-white/5 border border-white/20 text-white font-bold hover:bg-white/10 transition-all",children:"학습하기"})]},d.id)})})]}),o.jsxs("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8",children:[o.jsx("h2",{className:"text-2xl font-black text-white mb-6 tracking-wider",children:"QUICK LINKS"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Y,{to:"/my-classroom",className:"group block p-4 bg-white/5 border border-white/10 hover:border-purple-500/50 hover:bg-white/10 transition-all",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(kt,{className:"w-5 h-5 text-purple-400 group-hover:scale-110 transition-transform"}),o.jsx("span",{className:"font-bold text-white",children:"나의 강의실"})]})}),o.jsx(Y,{to:"/applications",className:"group block p-4 bg-white/5 border border-white/10 hover:border-blue-500/50 hover:bg-white/10 transition-all",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Us,{className:"w-5 h-5 text-blue-400 group-hover:scale-110 transition-transform"}),o.jsx("span",{className:"font-bold text-white",children:"지원신청"})]})}),o.jsx(Y,{to:"/courses",className:"group block p-4 bg-white/5 border border-white/10 hover:border-cyan-500/50 hover:bg-white/10 transition-all",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Wo,{className:"w-5 h-5 text-cyan-400 group-hover:scale-110 transition-transform"}),o.jsx("span",{className:"font-bold text-white",children:"교육과정"})]})}),o.jsx(Y,{to:"/profile",className:"group block p-4 bg-white/5 border border-white/10 hover:border-pink-500/50 hover:bg-white/10 transition-all",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(RS,{className:"w-5 h-5 text-pink-400 group-hover:scale-110 transition-transform"}),o.jsx("span",{className:"font-bold text-white",children:"마이페이지"})]})})]})]})]})]})]})}function PM(){const[t,e]=O.useState([]),[n,r]=O.useState("ALL"),[s,i]=O.useState(!0);O.useEffect(()=>{a()},[n]);const a=async()=>{try{i(!0);const c=await Q0();let d=c;n!=="ALL"&&(d=c.filter(h=>{var f;return((f=h.category)==null?void 0:f.toUpperCase())===n})),e(d)}catch(c){console.error("Failed to fetch courses:",c)}finally{i(!1)}},l=c=>{const d={beginner:"bg-green-500/20 text-green-400 border-green-500/50",intermediate:"bg-blue-500/20 text-blue-400 border-blue-500/50",advanced:"bg-purple-500/20 text-purple-400 border-purple-500/50"},h={beginner:"초급",intermediate:"중급",advanced:"고급"},f=(c==null?void 0:c.toLowerCase())||"beginner";return{className:d[f]||d.beginner,label:h[f]||h.beginner}};return o.jsxs("div",{className:"min-h-screen bg-black py-16 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx("h1",{className:"text-5xl md:text-6xl font-black text-white mb-4",children:"COURSES"}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 mx-auto mb-6"}),o.jsx("p",{className:"text-gray-400 text-lg",children:"Master the art of cybersecurity"})]}),o.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 p-6 mb-10",children:o.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[o.jsx(kS,{className:"w-5 h-5 text-purple-400"}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsx("button",{onClick:()=>r("ALL"),className:`px-6 py-2 font-bold tracking-wider transition-all ${n==="ALL"?"bg-gradient-to-r from-purple-500 to-blue-500 text-white shadow-lg shadow-purple-500/50":"bg-white/5 text-gray-400 hover:text-white hover:bg-white/10"}`,children:"ALL"}),o.jsx("button",{onClick:()=>r("BASIC"),className:`px-6 py-2 font-bold tracking-wider transition-all ${n==="BASIC"?"bg-gradient-to-r from-purple-500 to-blue-500 text-white shadow-lg shadow-purple-500/50":"bg-white/5 text-gray-400 hover:text-white hover:bg-white/10"}`,children:"BASIC"}),o.jsx("button",{onClick:()=>r("ADVANCED"),className:`px-6 py-2 font-bold tracking-wider transition-all ${n==="ADVANCED"?"bg-gradient-to-r from-purple-500 to-blue-500 text-white shadow-lg shadow-purple-500/50":"bg-white/5 text-gray-400 hover:text-white hover:bg-white/10"}`,children:"ADVANCED"}),o.jsx("button",{onClick:()=>r("PROJECT"),className:`px-6 py-2 font-bold tracking-wider transition-all ${n==="PROJECT"?"bg-gradient-to-r from-purple-500 to-blue-500 text-white shadow-lg shadow-purple-500/50":"bg-white/5 text-gray-400 hover:text-white hover:bg-white/10"}`,children:"PROJECT"})]})]})}),s?o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin mx-auto"}),o.jsx("p",{className:"text-gray-400 mt-4 font-mono",children:"LOADING..."})]}):t.length===0?o.jsxs("div",{className:"text-center py-20",children:[o.jsx(kt,{className:"w-20 h-20 text-gray-600 mx-auto mb-6"}),o.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"No Courses Available"}),o.jsx("p",{className:"text-gray-400 mb-8",children:"강의가 아직 등록되지 않았습니다."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(c=>{const d=l(c.level);return o.jsxs(Y,{to:`/courses/${c.id}`,className:"group relative bg-white/5 backdrop-blur-xl border border-white/10 hover:border-purple-500/50 transition-all duration-500 overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/0 to-blue-500/0 group-hover:from-purple-500/10 group-hover:to-blue-500/10 transition-all duration-500"}),o.jsxs("div",{className:"relative p-6",children:[o.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center mb-6 relative",children:[o.jsx(EV,{className:"w-8 h-8 text-white"}),o.jsx("div",{className:"absolute inset-0 bg-white/20 transform scale-0 group-hover:scale-100 transition-transform"})]}),o.jsx("div",{className:"mb-4",children:o.jsx("span",{className:`px-3 py-1 border text-xs font-bold tracking-wider ${d.className}`,children:d.label})}),o.jsx("h3",{className:"text-2xl font-black text-white mb-3 group-hover:text-purple-400 transition-colors",children:c.title}),o.jsx("p",{className:"text-gray-400 text-sm mb-6 line-clamp-2 leading-relaxed",children:c.description}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(la,{className:"w-4 h-4 text-purple-400"}),o.jsxs("span",{className:"font-mono",children:[c.duration||0,"h"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qr,{className:"w-4 h-4 text-purple-400"}),o.jsxs("span",{className:"font-mono",children:[c.enrollmentCount||0,"/",c.maxStudents||30]})]})]}),o.jsx("div",{className:"pt-4 border-t border-white/10",children:o.jsxs("p",{className:"text-sm text-gray-400",children:[o.jsx("span",{className:"text-purple-400 font-bold",children:"INSTRUCTOR:"})," ",c.instructor||"TBA"]})}),o.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 to-blue-500 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left"})]})]},c.id)})})]})]})}function DM(t){if(!t)return[];const e=t||{},n=OM(e.briefingContent);if(n.length>0)return n;const r=Array.isArray(e.lectures)?e.lectures:[],s=qf(e.prerequisites),i=qf(e.learningOutcomes),a=qf(e.benefits),l=(e.level||"beginner").toString().toUpperCase(),c=(e.category||"GENERAL").toString().toUpperCase(),d=[];return d.push({title:"COURSE OVERVIEW",subtitle:`${c} • ${l}`,body:e.description||"강의 소개가 준비 중입니다."}),r.length&&d.push({title:"LECTURE ROADMAP",subtitle:`${r.length}개의 세부 강의`,list:r.map((h,f)=>`${String(f+1).padStart(2,"0")}. ${h.title||"제목 미정"}`)}),i.length&&d.push({title:"LEARNING OUTCOMES",subtitle:"수료 시 기대 역량",list:i}),a.length&&d.push({title:"BENEFITS",subtitle:"참여자 혜택",list:a}),s.length&&d.push({title:"PREREQUISITES",subtitle:"학습 전 준비 사항",list:s}),d}function OM(t){if(!t||typeof t!="string")return[];const e=t.trim();if(!e)return[];if(e.startsWith("["))try{const r=JSON.parse(e);if(Array.isArray(r))return r.map(s=>HS(s)).filter(s=>s&&(s.title||s.body||s.list&&s.list.length))}catch(r){console.warn("Failed to parse briefingContent JSON:",r)}const n=e.split(/\n-{3,}\n/).map(r=>r.trim()).filter(Boolean);return n.length===0?[]:n.map(r=>LM(r)).filter(r=>r&&(r.title||r.body||r.list&&r.list.length))}function LM(t){const e=t.split(`
`).map(r=>r.trim()).filter(Boolean);if(!e.length)return null;let n={title:"",subtitle:"",body:"",list:[]};for(const r of e)r.toLowerCase().startsWith("title:")?n.title=r.slice(6).trim():r.toLowerCase().startsWith("subtitle:")?n.subtitle=r.slice(9).trim():r.startsWith("- ")?n.list.push(r.slice(2).trim()):n.body=n.body?`${n.body}
${r}`:r;return n.title||(n.title=e[0],n.body=n.body?n.body:e.slice(1).join(`
`)),HS(n)}function HS(t){if(!t||typeof t!="object")return null;const e=typeof t.title=="string"?t.title.trim():"",n=typeof t.subtitle=="string"?t.subtitle.trim():"",r=typeof t.body=="string"?t.body.trim():"",s=Array.isArray(t.list)?t.list.map(i=>typeof i=="string"?i.trim():"").filter(Boolean):[];return{title:e,subtitle:n,body:r,list:s}}function qf(t){return t?Array.isArray(t)?t.map(e=>typeof e=="string"?e:String(e)).filter(Boolean):typeof t=="string"?t.split(`
`).map(e=>e.trim()).filter(Boolean):[]:[]}function WS({course:t,title:e="COURSE BRIEFING",className:n=""}){const r=O.useMemo(()=>DM(t),[t]);return r.length?o.jsxs("div",{className:`bg-black/20 border border-white/10 p-8 space-y-8 ${n}`,children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-sm font-bold tracking-[0.3em] text-gray-500",children:e}),o.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"최종 합격자 전용 안내입니다."})]}),r.map((s,i)=>o.jsxs("div",{className:"border border-white/10 bg-white/5 p-6",children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("div",{children:[o.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["SECTION ",String(i+1).padStart(2,"0")]}),o.jsx("h3",{className:"text-xl font-black text-white mt-1",children:s.title||"제목 미정"}),s.subtitle&&o.jsx("p",{className:"text-sm text-gray-400 mt-1",children:s.subtitle})]})}),s.body&&o.jsx("p",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line",children:s.body}),s.list&&s.list.length>0&&o.jsx("ul",{className:"mt-4 space-y-2 text-sm text-gray-300",children:s.list.map((a,l)=>o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{className:"text-purple-300",children:"•"}),o.jsx("span",{children:a})]},l))})]},i))]}):o.jsxs("div",{className:`bg-black/20 border border-white/10 p-8 ${n}`,children:[o.jsx("h2",{className:"text-sm font-bold tracking-[0.3em] text-gray-500",children:e}),o.jsx("p",{className:"mt-4 text-sm text-gray-400 whitespace-pre-line",children:"강의 브리핑 자료가 아직 등록되지 않았습니다. 합격 후 담당자에게 문의해 주세요."})]})}function VM(){var vt,Rt,Ht,Er;const{id:t}=Hs(),{isAuthenticated:e,user:n}=Ye(),[r,s]=O.useState(null),[i,a]=O.useState(!0),[l,c]=O.useState(null),[d,h]=O.useState(!1),[f,m]=O.useState(null),[w,y]=O.useState(!1);O.useEffect(()=>{E()},[t]),O.useEffect(()=>{if(!e||!(n!=null&&n.uid)||!t){h(!1);return}(async()=>{try{const ke=await Tm(n.uid,t);h(ke)}catch(ke){console.error("Failed to check enrollment:",ke),h(!1)}})()},[e,n==null?void 0:n.uid,t,r==null?void 0:r.updatedAt]),O.useEffect(()=>{if(!e||!(n!=null&&n.uid)||!t||d)return;let xe=!1;const da=setInterval(async()=>{try{const Nr=await Tm(n.uid,t);!xe&&Nr&&h(!0)}catch(Nr){console.error("Failed to poll enrollment status:",Nr)}},1e4);return()=>{xe=!0,clearInterval(da)}},[e,n==null?void 0:n.uid,t,d]);const E=async()=>{if(t)try{a(!0),c(null);const xe=await mc(t);s(xe)}catch(xe){console.error("Failed to fetch course:",xe),c("강의 정보를 불러오는 중 문제가 발생했습니다."),s(null)}finally{a(!1)}},v=r||{};O.useEffect(()=>{if(!e||!(n!=null&&n.uid)||!t){m(null);return}(async()=>{try{y(!0);const ke=await kM(n.uid,t);m(ke)}catch(ke){console.error("Failed to fetch user application:",ke),m(null)}finally{y(!1)}})()},[e,n==null?void 0:n.uid,t]);const T=v.title||"강의 정보 없음",x=v.description||"강의 설명이 아직 등록되지 않았습니다.",N=v.instructor||"미정",R=v.lectures||[],C=typeof v.syllabus=="string"?v.syllabus.split(`
`).filter(Boolean):[],L=Array.isArray(v.prerequisites)?v.prerequisites:v.prerequisites?[v.prerequisites]:[],b=Array.isArray(v.learningOutcomes)?v.learningOutcomes:v.learningOutcomes?[v.learningOutcomes]:[],_=Array.isArray(v.benefits)?v.benefits:v.benefits?v.benefits.split(`
`).filter(Boolean):[],A=(v.level||"beginner").toString().toUpperCase(),j=(v.category||"GENERAL").toString().toUpperCase(),I=v.maxStudents??v.capacity??null,P=typeof I=="number"&&I>0?I:null,k=v.enrollmentCount||v.enrolledCount||0,oe=v.duration||`${R.reduce((xe,ke)=>xe+(ke.duration||0),0)}분`,ge=(()=>{if(!v.applicationDeadline)return null;if(typeof v.applicationDeadline.toDate=="function")return v.applicationDeadline.toDate();const xe=new Date(v.applicationDeadline);return Number.isNaN(xe.getTime())?null:xe})(),te=ge?ge.getTime():null,fe=Date.now(),q=typeof te=="number"?fe>=te:!1;ge&&ge.toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});const ne=P?k>=P:!1,re=(f==null?void 0:f.status)||null,Te=re?{SUBMITTED:{label:"지원서 검토 중",message:"관리자가 지원서를 검토하고 있습니다."},DOCUMENT_PASS:{label:"서류 합격",message:"면접 또는 추가 안내를 기다려 주세요."},DOCUMENT_FAIL:{label:"서류 불합격",message:"아쉽게도 이번 과정에는 참여하실 수 없습니다."},INTERVIEW_SCHEDULED:{label:"면접 예정",message:"면접 일정을 확인하고 준비해 주세요."},FINAL_PASS:{label:"최종 합격",message:"등록 확정 전까지 학습 콘텐츠는 잠시 잠겨 있습니다."},FINAL_FAIL:{label:"최종 불합격",message:"다음 기회를 기약해 주세요."},ENROLLED:{label:"등록 완료",message:"학습 콘텐츠가 곧 열립니다. 잠시 후 다시 확인해 주세요."}}[re]:null;let De="";d?De="이미 수강 등록이 완료되었습니다.":re==="ENROLLED"?De="등록이 완료되었습니다. 잠시 후 학습이 열립니다.":re==="FINAL_PASS"?De="최종 합격되었습니다. 관리자 등록 확정을 기다려 주세요.":re&&re!=="FINAL_FAIL"?De="이미 지원이 진행 중입니다.":re==="FINAL_FAIL"||re==="DOCUMENT_FAIL"?De="해당 강의 신청이 종료되었습니다.":q?De="신청 기간이 종료된 강의입니다.":ne&&(De="정원이 마감된 강의입니다.");const tt=!!De;return i?o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400 font-mono tracking-[0.2em]",children:"LOADING"})]})}):r?o.jsxs("div",{className:"min-h-screen bg-black py-16 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-10",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(Y,{to:"/courses",className:"text-gray-500 hover:text-white transition-colors flex items-center gap-2",children:[o.jsx(Ao,{className:"w-4 h-4"}),"BACK TO COURSES"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"px-4 py-1 bg-purple-500/20 border border-purple-500/50 text-purple-300 text-xs font-bold tracking-widest",children:j}),o.jsx("span",{className:"px-4 py-1 bg-blue-500/20 border border-blue-500/50 text-blue-300 text-xs font-bold tracking-widest",children:A})]})]}),o.jsx("div",{className:"hidden md:flex items-center gap-3 text-sm text-gray-400",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(M0,{className:"w-4 h-4 text-purple-300"}),o.jsx("span",{children:((Er=(Rt=(vt=v.updatedAt)==null?void 0:vt.toDate)==null?void 0:(Ht=Rt.call(vt)).toLocaleDateString)==null?void 0:Er.call(Ht))||v.updatedAt||"업데이트 정보 없음"})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[o.jsxs("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-10",children:[o.jsx("h1",{className:"text-4xl font-black text-white mb-4 leading-tight",children:T}),o.jsx("p",{className:"text-gray-400 text-lg leading-relaxed mb-8",children:x}),o.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-sm text-gray-400",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(la,{className:"w-4 h-4 text-purple-300"}),o.jsx("span",{className:"font-mono",children:oe})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qr,{className:"w-4 h-4 text-cyan-300"}),o.jsxs("span",{className:"font-mono",children:[k,"/",P||"-","명"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wo,{className:"w-4 h-4 text-yellow-300"}),o.jsx("span",{className:"font-semibold text-white/90",children:N})]})]})]}),d?o.jsxs(o.Fragment,{children:[o.jsx(WS,{course:r}),o.jsxs("div",{className:"bg-black/20 border border-white/10 p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(bm,{className:"w-5 h-5 text-purple-300"}),o.jsx("h2",{className:"text-2xl font-black text-white",children:"LECTURE PLAYLIST"})]}),R.length>0?o.jsx("div",{className:"space-y-3",children:R.map((xe,ke)=>o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white/5 border border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-purple-500/20 border border-purple-500/40 text-purple-300 flex items-center justify-center font-bold",children:String(ke+1).padStart(2,"0")}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-semibold",children:xe.title}),xe.summary&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:xe.summary})]})]}),o.jsx("span",{className:"text-sm text-gray-400 font-mono",children:xe.duration?`${xe.duration}분`:"시간 미정"})]},xe.id||ke))}):o.jsx("div",{className:"text-gray-500 text-sm",children:"등록된 세부 강의가 없습니다."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-black/20 border border-white/10 p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(NV,{className:"w-5 h-5 text-blue-300"}),o.jsx("h2",{className:"text-xl font-black text-white",children:"SYLLABUS"})]}),C.length>0?o.jsx("ul",{className:"space-y-3 text-gray-400 text-sm",children:C.map((xe,ke)=>o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-purple-300 font-mono",children:String(ke+1).padStart(2,"0")}),o.jsx("span",{children:xe})]},ke))}):o.jsx("p",{className:"text-gray-500 text-sm",children:"강의 계획 정보가 등록되지 않았습니다."})]}),o.jsxs("div",{className:"bg-black/20 border border-white/10 p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(Ln,{className:"w-5 h-5 text-green-300"}),o.jsx("h2",{className:"text-xl font-black text-white",children:"LEARNING OUTCOMES"})]}),b.length>0?o.jsx("ul",{className:"space-y-2 text-gray-400 text-sm",children:b.map((xe,ke)=>o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{className:"text-green-300",children:"•"}),o.jsx("span",{children:xe})]},ke))}):o.jsx("p",{className:"text-gray-500 text-sm",children:"학습 목표 정보가 없습니다."})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-black/20 border border-white/10 p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(bm,{className:"w-5 h-5 text-cyan-300"}),o.jsx("h2",{className:"text-xl font-black text-white",children:"PREREQUISITES"})]}),L.length>0?o.jsx("ul",{className:"space-y-2 text-gray-400 text-sm",children:L.map((xe,ke)=>o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{className:"text-cyan-300",children:"•"}),o.jsx("span",{children:xe})]},ke))}):o.jsx("p",{className:"text-gray-500 text-sm",children:"선수 지식 정보가 없습니다."})]}),o.jsxs("div",{className:"bg-black/20 border border-white/10 p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(Wo,{className:"w-5 h-5 text-yellow-300"}),o.jsx("h2",{className:"text-xl font-black text-white",children:"BENEFITS"})]}),_.length>0?o.jsx("ul",{className:"space-y-2 text-gray-400 text-sm",children:_.map((xe,ke)=>o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{className:"text-yellow-300",children:"•"}),o.jsx("span",{children:xe})]},ke))}):o.jsx("p",{className:"text-gray-500 text-sm",children:"등록된 혜택 정보가 없습니다."})]})]})]}):o.jsxs("div",{className:"bg-black/20 border border-white/10 p-10 flex flex-col items-center text-center space-y-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500/20 border border-purple-500/50 flex items-center justify-center",children:o.jsx(Kl,{className:"w-7 h-7 text-purple-300"})}),o.jsx("h2",{className:"text-2xl font-black text-white",children:"학습 콘텐츠 잠금 상태"}),Te?o.jsx("p",{className:"text-gray-400 max-w-xl",children:Te.message}):o.jsxs("p",{className:"text-gray-400 max-w-xl",children:["이 강의의 세부 커리큘럼과 학습 자료는 관리자 최종 합격 처리 후 열람할 수 있습니다.",De&&o.jsxs(o.Fragment,{children:[o.jsx("br",{}),o.jsx("span",{className:"text-purple-300",children:De})]})]})]})]}),o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8 sticky top-8",children:[o.jsx("div",{className:"aspect-video bg-gradient-to-br from-purple-500/60 to-blue-500/60 border border-white/20 flex items-center justify-center mb-6",children:o.jsx(kt,{className:"w-16 h-16 text-white"})}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{className:"flex justify-between text-sm text-gray-400",children:[o.jsx("span",{children:"수강 인원"}),o.jsxs("span",{className:"font-semibold text-white",children:[k,"/",P||"-","명"]})]}),o.jsxs("div",{className:"flex justify-between text-sm text-gray-400",children:[o.jsx("span",{children:"강의 시간"}),o.jsx("span",{className:"font-semibold text-white",children:oe})]}),o.jsxs("div",{className:"flex justify-between text-sm text-gray-400",children:[o.jsx("span",{children:"난이도"}),o.jsx("span",{className:"font-semibold text-white",children:A})]})]}),o.jsx("div",{className:"space-y-3",children:d?o.jsx(Y,{to:"/my-classroom",className:"w-full inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-bold tracking-wide hover:shadow-lg hover:shadow-blue-500/40 transition-all",children:"학습 바로가기"}):o.jsxs(o.Fragment,{children:[e?tt||w?o.jsx("button",{type:"button",disabled:!0,className:"w-full inline-flex items-center justify-center px-6 py-3 font-bold tracking-wide bg-white/5 border border-white/10 text-gray-500 cursor-not-allowed",children:w?"상태 확인 중...":re==="FINAL_PASS"?"등록 대기 중":re==="ENROLLED"?"등록 완료":"지원 불가"}):o.jsx(Y,{to:`/applications/new/${v.id||t}`,className:"w-full inline-flex items-center justify-center px-6 py-3 font-bold tracking-wide bg-gradient-to-r from-purple-500 to-blue-500 text-white hover:shadow-lg hover:shadow-purple-500/40 transition-all",children:"지원 신청하기"}):o.jsx(Y,{to:"/login",className:"w-full inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold tracking-wide hover:shadow-lg hover:shadow-purple-500/40 transition-all",children:"로그인하고 신청하기"}),De&&o.jsx("p",{className:"text-xs text-gray-500 text-center",children:De})]})}),o.jsxs("div",{className:"mt-8 border border-white/10 p-6",children:[o.jsx("h3",{className:"font-semibold text-white mb-4 tracking-wide",children:"COURSE BENEFITS"}),_.length>0?o.jsx("ul",{className:"text-sm text-gray-400 space-y-2",children:_.map((xe,ke)=>o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{className:"text-purple-300",children:"•"}),o.jsx("span",{children:xe})]},ke))}):o.jsx("p",{className:"text-sm text-gray-500",children:"혜택 정보가 아직 준비 중입니다."})]})]})})]})]})]}):o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsxs("div",{className:"text-center px-6",children:[o.jsx("p",{className:"text-2xl font-black text-white mb-3",children:"COURSE NOT FOUND"}),o.jsx("p",{className:"text-gray-500 mb-6",children:l||"요청하신 강의를 찾을 수 없습니다."}),o.jsxs(Y,{to:"/courses",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold tracking-wide hover:shadow-lg hover:shadow-purple-500/40 transition-all",children:[o.jsx(Ao,{className:"w-4 h-4"}),"강의 목록으로"]})]})})}function J0(t){if(!t||typeof t!="string")return[];const e=t.trim();if(!e)return[];if(e.startsWith("["))try{const r=JSON.parse(e);if(Array.isArray(r))return r.map(s=>GS(s)).filter(s=>s&&(s.title||s.body||s.steps&&s.steps.length))}catch(r){console.warn("Failed to parse curriculumContent JSON:",r)}const n=e.split(/\n-{3,}\n/).map(r=>r.trim()).filter(Boolean);return n.length===0?[]:n.map(r=>MM(r)).filter(r=>r&&(r.title||r.body||r.steps&&r.steps.length))}function MM(t){const e=t.split(`
`);if(!e.length)return null;const n={title:"",summary:"",body:"",steps:[]};let r=[];if(e.forEach(s=>{const i=s.trim();i.toLowerCase().startsWith("title:")?n.title=i.slice(6).trim():i.toLowerCase().startsWith("summary:")?n.summary=i.slice(8).trim():i.toLowerCase().startsWith("- ")?n.steps.push(i.slice(2).trim()):r.push(s)}),n.body=r.join(`
`).trim(),!n.title&&r.length>0){const s=r.find(i=>i.trim());n.title=s?s.trim():"Untitled"}return GS(n)}function GS(t){if(!t||typeof t!="object")return null;const e=typeof t.title=="string"?t.title.trim():"",n=typeof t.summary=="string"?t.summary.trim():"",r=typeof t.body=="string"?t.body.trim():"",s=Array.isArray(t.steps)?t.steps.map(l=>typeof l=="string"?l.trim():"").filter(Boolean):[],i=Array.isArray(t.hints)?t.hints.map(l=>typeof l=="string"?l.trim():"").filter(Boolean):[],a=typeof t.environment=="string"?t.environment.trim():"";return{title:e,summary:n,body:r,steps:s,hints:i,environment:a}}function FM(){var oe,ge;const{id:t}=Hs(),e=gn(),{user:n,isAuthenticated:r}=Ye(),[s,i]=O.useState(null),[a,l]=O.useState(!0),[c,d]=O.useState(!0),[h,f]=O.useState(!1),[m,w]=O.useState(null),[y,E]=O.useState(0),[v,T]=O.useState(!1),[x,N]=O.useState({currentModule:0,completedModules:0,totalModules:0});O.useEffect(()=>{if(!t)return;(async()=>{try{l(!0);const fe=await mc(t);if(!fe){w("강의 정보를 찾을 수 없습니다.");return}i(fe)}catch(fe){console.error("Failed to load course:",fe),w("강의 정보를 불러오는 중 오류가 발생했습니다.")}finally{l(!1)}})()},[t]),O.useEffect(()=>{if(!r||!(n!=null&&n.uid)||!t){d(!1),f(!1);return}(async()=>{try{d(!0);const fe=await Tm(n.uid,t);if(f(fe),fe||w("이 강의에 등록된 사용자만 접근할 수 있습니다."),fe){const q=await xM(n.uid,t);(q==null?void 0:q.currentModuleIndex)!=null&&E(q.currentModuleIndex),N({currentModule:(q==null?void 0:q.currentModuleIndex)||0,completedModules:(q==null?void 0:q.completedModules)||0,totalModules:(q==null?void 0:q.totalLectures)||0})}}catch(fe){console.error("Failed to verify enrollment:",fe),w("접근 권한을 확인하는 중 문제가 발생했습니다."),f(!1)}finally{d(!1)}})()},[r,n==null?void 0:n.uid,t]);const C=O.useMemo(()=>{if(!s)return[];const te=s.curriculumContent||s.briefingContent||"";return J0(te)},[s==null?void 0:s.curriculumContent,s==null?void 0:s.briefingContent]),L=C.length;if(O.useEffect(()=>{if(N(te=>({...te,totalModules:L})),L===0){E(0);return}E(te=>te>=L?L-1:te)},[L]),O.useEffect(()=>{if(!c&&r&&!h&&t){const te=setTimeout(()=>{e(`/courses/${t}`)},2500);return()=>clearTimeout(te)}},[c,r,h,e,t]),!r)return o.jsxs("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center text-center space-y-4",children:[o.jsx($f,{className:"w-12 h-12 text-yellow-400"}),o.jsx("p",{className:"text-gray-400",children:"로그인이 필요합니다."}),o.jsx(Y,{to:"/login",className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold",children:"로그인하러 가기"})]});if(a||c)return o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400 font-mono tracking-[0.2em] uppercase",children:"LOADING"})]})});if(m||!h)return o.jsxs("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center text-center space-y-4 px-6",children:[o.jsx($f,{className:"w-12 h-12 text-yellow-400"}),o.jsx("p",{className:"text-gray-300 text-sm sm:text-base leading-relaxed max-w-lg",children:m||"접근이 제한되었습니다."}),o.jsx(Y,{to:t?`/courses/${t}`:"/courses",className:"px-6 py-3 bg-white/5 border border-white/10 text-white font-bold hover:bg-white/10 transition-all",children:"강의 정보로 돌아가기"})]});const b=(s==null?void 0:s.title)||"강의",_=async te=>{if(v||!(n!=null&&n.uid)||!t||te<0||te>L-1)return;E(te);const fe=Math.max(x.completedModules||0,te);N(q=>({...q,currentModule:te,completedModules:fe}));try{T(!0),await vM(n.uid,t,{currentModuleIndex:te,completedModules:fe,progress:L>0?Math.round((fe+1)/L*100):0,totalLectures:L})}catch(q){console.error("Failed to save module progress:",q)}finally{T(!1)}},A=()=>{_(y-1)},j=()=>{_(y+1)},I=L>0?C[y]:null,P=Math.max(x.completedModules||0,y),k=L>0?Math.min(100,Math.round((P+1)/L*100)):0;return o.jsxs("div",{className:"min-h-screen bg-black text-gray-200",children:[o.jsxs("header",{className:"border-b border-white/10 bg-black/60 backdrop-blur px-6 sm:px-10 py-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>e(-1),className:"px-3 py-2 bg-white/5 border border-white/10 text-sm text-gray-300 hover:bg-white/10 transition",children:o.jsx(Ao,{className:"w-4 h-4"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 tracking-[0.3em]",children:"COURSE LEARN"}),o.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-white",children:b})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ln,{className:"w-5 h-5 text-emerald-400"}),o.jsx("span",{className:"text-xs text-emerald-400 uppercase tracking-[0.3em]",children:"ENROLLED"})]})]}),o.jsxs("main",{className:"max-w-6xl mx-auto px-6 sm:px-10 py-10 space-y-10",children:[o.jsxs("section",{className:"bg-black/40 border border-white/10 p-8",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/20 border border-purple-500/40 flex items-center justify-center",children:o.jsx(kt,{className:"w-6 h-6 text-purple-300"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-black text-white",children:"커리큘럼 안내"}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"실습 중심의 모듈형 커리큘럼입니다. 각 모듈을 순서대로 진행하면서 학습 내용을 실습하세요."})]})]}),C.length===0?o.jsx("div",{className:"text-gray-500 text-sm",children:"커리큘럼 내용이 아직 등록되지 않았습니다. 담당자에게 문의해 주세요."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 bg-white/5 border border-white/10 px-5 py-4",children:[o.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-300",children:[o.jsx(jS,{className:"w-4 h-4 text-purple-300"}),o.jsxs("span",{children:["현재 모듈 ",String(y+1).padStart(2,"0")," / ",L.toString().padStart(2,"0")]})]}),o.jsxs("div",{className:"w-full sm:w-1/2",children:[o.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-blue-500 transition-all",style:{width:`${k}%`}})}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500 text-right",children:["완료율 ",k,"%"]})]})]}),o.jsxs("article",{className:"border border-white/10 bg-white/5",children:[o.jsxs("div",{className:"border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["SECTION ",String(y+1).padStart(2,"0")]}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mt-1",children:(I==null?void 0:I.title)||`섹션 ${y+1}`}),(I==null?void 0:I.summary)&&o.jsx("p",{className:"text-sm text-gray-400 mt-1",children:I.summary})]}),((oe=I==null?void 0:I.steps)==null?void 0:oe.length)>0&&o.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs text-gray-400",children:[o.jsx(Zw,{className:"w-4 h-4"}),o.jsxs("span",{children:[I.steps.length," 단계"]})]})]}),o.jsxs("div",{className:"px-6 py-6 space-y-6",children:[(I==null?void 0:I.body)&&o.jsx("div",{className:"prose prose-invert max-w-none text-sm leading-relaxed text-gray-200",dangerouslySetInnerHTML:{__html:I.body.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" class="max-w-full h-auto my-4 rounded border border-white/10" />').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 underline">$1</a>').replace(/```([\s\S]*?)```/g,'<pre class="bg-black/60 border border-white/10 p-4 rounded my-4 overflow-x-auto"><code>$1</code></pre>').replace(/`([^`]+)`/g,'<code class="bg-purple-500/10 border border-purple-500/20 text-purple-300 px-2 py-0.5 rounded text-xs">$1</code>').replace(/\n/g,"<br/>")}}),(I==null?void 0:I.environment)&&o.jsxs("div",{className:"bg-blue-500/5 border border-blue-500/20 px-4 py-3 text-sm text-blue-200 flex items-start gap-3",children:[o.jsx($f,{className:"w-4 h-4 mt-1"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-blue-300",children:"환경 구성"}),o.jsx("div",{className:"prose prose-invert max-w-none leading-relaxed text-sm",dangerouslySetInnerHTML:{__html:I.environment.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" class="max-w-full h-auto my-2 rounded" />').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-blue-300 hover:text-blue-200 underline">$1</a>').replace(/\n/g,"<br/>")}})]})]}),(I==null?void 0:I.steps)&&I.steps.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-200 mb-3",children:[o.jsx(Zw,{className:"w-4 h-4 text-purple-300"}),o.jsx("span",{children:"진행 단계"})]}),o.jsx("ol",{className:"space-y-3 text-sm text-gray-300",children:I.steps.map((te,fe)=>o.jsxs("li",{className:"flex gap-3",children:[o.jsxs("span",{className:"text-purple-300 font-semibold",children:[fe+1,"."]}),o.jsx("span",{className:"leading-relaxed",children:te})]},fe))})]}),(I==null?void 0:I.hints)&&I.hints.length>0&&o.jsxs("div",{className:"bg-white/5 border border-purple-500/20 px-4 py-4 text-sm text-purple-200",children:[o.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[o.jsx(kV,{className:"w-4 h-4"})," 힌트"]}),o.jsx("ul",{className:"mt-3 space-y-2",children:I.hints.map((te,fe)=>o.jsxs("li",{className:"leading-relaxed flex gap-2",children:[o.jsx("span",{className:"text-purple-300",children:"•"}),o.jsx("span",{children:te})]},fe))})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[o.jsxs("span",{children:["모듈 ",y+1,"/",L]}),v&&o.jsx("span",{className:"text-purple-300",children:"저장 중..."})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{onClick:A,disabled:y===0,className:"inline-flex items-center gap-2 px-4 py-2 border border-white/10 text-sm text-gray-300 hover:text-white hover:border-white/30 disabled:opacity-40 disabled:cursor-not-allowed",children:[o.jsx(Ao,{className:"w-4 h-4"})," 이전"]}),o.jsxs("button",{onClick:j,disabled:y===L-1,className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-blue-500 text-sm font-bold text-white hover:shadow-lg hover:shadow-purple-500/40 transition disabled:opacity-40 disabled:cursor-not-allowed",children:["다음 ",o.jsx(F0,{className:"w-4 h-4"})]})]})]})]})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[o.jsxs(Y,{to:`/courses/${t}`,className:"flex items-center gap-2 hover:text-white transition",children:[o.jsx(Ao,{className:"w-4 h-4"}),"강의 정보로 돌아가기"]}),o.jsxs("span",{children:["최종 업데이트: ",(ge=s==null?void 0:s.updatedAt)!=null&&ge.toDate?s.updatedAt.toDate().toLocaleString("ko-KR"):"확인 필요"]})]})]})]})}function UM(){const{user:t}=Ye(),[e,n]=O.useState("courses"),[r,s]=O.useState([]),[i,a]=O.useState([]),[l,c]=O.useState(!0),[d,h]=O.useState(!1);O.useEffect(()=>{f()},[t]),O.useEffect(()=>{e==="assignments"&&r.length>0&&m()},[e,r]);const f=async()=>{if(t!=null&&t.uid)try{const w=await BS(t.uid);s(w),c(!1)}catch(w){console.error("Error loading enrollments:",w),c(!1)}},m=async()=>{var w;h(!0);try{const y=[];for(const E of r){const v=E.courseId||((w=E.course)==null?void 0:w.id);v&&(await Nm(v)).forEach(x=>{var N;y.push({...x,courseName:((N=E.course)==null?void 0:N.title)||"강의",courseId:v})})}a(y)}catch(y){console.error("Error loading assignments:",y)}finally{h(!1)}};return o.jsxs("div",{className:"min-h-screen bg-black py-12 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-5xl font-black text-white mb-3",children:"MY CLASSROOM"}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-blue-500 to-cyan-500 mb-4"}),o.jsx("p",{className:"text-gray-400 text-lg",children:"수강 중인 과정과 학습 현황을 확인하세요"})]}),o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-6 mb-6",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>n("courses"),className:`px-6 py-3 font-bold tracking-wider transition-all ${e==="courses"?"bg-blue-500/20 text-blue-400 border-b-2 border-blue-500":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"수강 과정"}),o.jsx("button",{onClick:()=>n("assignments"),className:`px-6 py-3 font-bold tracking-wider transition-all ${e==="assignments"?"bg-purple-500/20 text-purple-400 border-b-2 border-purple-500":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"과제"}),o.jsx("button",{onClick:()=>n("projects"),className:`px-6 py-3 font-bold tracking-wider transition-all ${e==="projects"?"bg-cyan-500/20 text-cyan-400 border-b-2 border-cyan-500":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"프로젝트"}),o.jsx("button",{onClick:()=>n("certificates"),className:`px-6 py-3 font-bold tracking-wider transition-all ${e==="certificates"?"bg-pink-500/20 text-pink-400 border-b-2 border-pink-500":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"수료증"})]})}),e==="courses"&&(l?o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-12",children:o.jsx("div",{className:"text-center py-12",children:o.jsx("div",{className:"text-gray-400",children:"Loading..."})})}):r.length===0?o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-12",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx(kt,{className:"w-20 h-20 text-blue-400 mx-auto mb-6"}),o.jsx("p",{className:"text-gray-400 text-lg mb-6",children:"수강 중인 강의가 없습니다."}),o.jsx(Y,{to:"/courses",className:"px-8 py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-bold hover:shadow-lg hover:shadow-blue-500/50 transition-all inline-block",children:"강의 둘러보기 →"})]})}):o.jsx("div",{className:"space-y-6",children:r.map(w=>{var E;const y=w.course||null;return o.jsxs("div",{className:"group bg-black/40 backdrop-blur-xl border border-white/10 p-8 hover:border-blue-500/50 transition-all",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-6",children:[o.jsxs("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center relative overflow-hidden",children:[o.jsx(kt,{className:"w-10 h-10 text-white relative z-10"}),o.jsx("div",{className:"absolute inset-0 bg-white/20 group-hover:bg-white/30 transition-all"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:(y==null?void 0:y.title)||"강의 정보 없음"}),o.jsxs("p",{className:"text-sm text-gray-400 font-mono",children:["진도: ",w.completedLectures,"/",w.totalLectures," 강의 완료"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-4xl font-black text-blue-400 mb-4",children:[w.progress,"%"]}),o.jsx(Y,{to:`/courses/${((E=w.course)==null?void 0:E.id)||w.courseId}/learn`,className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-bold hover:shadow-lg hover:shadow-blue-500/50 transition-all inline-block",children:"학습하기 →"})]})]}),o.jsx("div",{className:"mt-6",children:o.jsx("div",{className:"w-full bg-white/10 rounded-full h-3 overflow-hidden",children:o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 h-3 rounded-full transition-all duration-500",style:{width:`${w.progress}%`}})})}),y&&o.jsx("div",{className:"mt-8",children:o.jsx(WS,{course:y,title:"COURSE BRIEFING"})})]},w.id)})})),e==="assignments"&&(d?o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-12",children:o.jsx("div",{className:"text-center py-12",children:o.jsx("div",{className:"text-gray-400",children:"Loading..."})})}):i.length===0?o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-12",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Us,{className:"w-20 h-20 text-purple-400 mx-auto mb-6"}),o.jsx("p",{className:"text-gray-400 text-lg",children:"제출할 과제가 없습니다."})]})}):o.jsx("div",{className:"space-y-6",children:i.map(w=>{var v,T;const y=(T=(v=w.dueDate)==null?void 0:v.toDate)!=null&&T.call(v)?w.dueDate.toDate():w.dueDate?new Date(w.dueDate):null,E=y&&y<new Date;return o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8 hover:border-purple-500/50 transition-all",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("span",{className:"px-3 py-1 text-xs font-bold bg-purple-500/20 text-purple-400 border border-purple-500/30",children:w.courseName}),E?o.jsx("span",{className:"px-3 py-1 text-xs font-bold bg-red-500/20 text-red-400 border border-red-500/30",children:"마감됨"}):o.jsx("span",{className:"px-3 py-1 text-xs font-bold bg-green-500/20 text-green-400 border border-green-500/30",children:"진행중"})]}),o.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:w.title}),o.jsx("p",{className:"text-gray-400 leading-relaxed mb-4",children:w.description}),o.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[o.jsx(la,{className:"w-4 h-4"}),o.jsxs("span",{children:["마감: ",y?y.toLocaleDateString("ko-KR"):"미정"]})]}),w.points&&o.jsxs("div",{className:"flex items-center gap-2 text-blue-400",children:[o.jsx(Ln,{className:"w-4 h-4"}),o.jsxs("span",{children:[w.points,"점"]})]})]})]}),o.jsx(Y,{to:`/courses/${w.courseId}/learn`,className:"ml-6 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold hover:shadow-lg hover:shadow-purple-500/50 transition-all",children:"과제 보기"})]})},w.id)})})),e==="projects"&&o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-12",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx(qr,{className:"w-20 h-20 text-cyan-400 mx-auto mb-6"}),o.jsx("p",{className:"text-gray-400 text-lg",children:"진행 중인 프로젝트가 없습니다."})]})}),e==="certificates"&&o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-12",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Wo,{className:"w-20 h-20 text-pink-400 mx-auto mb-6"}),o.jsx("p",{className:"text-gray-400 text-lg",children:"발급된 수료증이 없습니다."})]})})]})]})}function BM(){const{user:t}=Ye(),[e,n]=O.useState([]),[r,s]=O.useState(!0);O.useEffect(()=>{i()},[t]);const i=async()=>{if(t!=null&&t.uid)try{const c=await $S(t.uid);n(c),s(!1)}catch(c){console.error("Error loading applications:",c),s(!1)}},a=c=>c?(c.toDate?c.toDate():new Date(c)).toLocaleDateString("ko-KR"):"-",l=c=>{const d={SUBMITTED:{icon:la,className:"bg-blue-500/20 text-blue-400 border-blue-500/30",label:"서류 심사 중"},DOCUMENT_PASS:{icon:Ln,className:"bg-green-500/20 text-green-400 border-green-500/30",label:"서류 합격"},DOCUMENT_FAIL:{icon:Go,className:"bg-red-500/20 text-red-400 border-red-500/30",label:"서류 불합격"},INTERVIEW_SCHEDULED:{icon:zi,className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",label:"면접 예정"},FINAL_PASS:{icon:Ln,className:"bg-green-500/20 text-green-400 border-green-500/30",label:"최종 합격"},FINAL_FAIL:{icon:Go,className:"bg-red-500/20 text-red-400 border-red-500/30",label:"최종 불합격"}};return d[c]||d.SUBMITTED};return o.jsxs("div",{className:"min-h-screen bg-black py-12 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"mb-12 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-5xl font-black text-white mb-3",children:"APPLICATIONS"}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-purple-500 to-blue-500 mb-4"}),o.jsx("p",{className:"text-gray-400 text-lg",children:"교육과정 지원 현황을 확인하세요"})]}),o.jsx(Y,{to:"/courses",className:"px-8 py-4 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold hover:shadow-lg hover:shadow-purple-500/50 transition-all",children:"새 과정 지원하기 →"})]}),r?o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-12",children:o.jsx("div",{className:"text-center py-12",children:o.jsx("div",{className:"text-gray-400",children:"Loading..."})})}):e.length===0?o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-12",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Us,{className:"w-20 h-20 text-purple-400 mx-auto mb-6"}),o.jsx("p",{className:"text-gray-400 text-lg mb-6",children:"지원한 과정이 없습니다."}),o.jsx(Y,{to:"/courses",className:"px-8 py-4 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold hover:shadow-lg hover:shadow-purple-500/50 transition-all inline-block",children:"교육과정 둘러보기"})]})}):o.jsx("div",{className:"space-y-6",children:e.map(c=>{const d=l(c.status),h=d.icon,m=(c.course||{}).title||"강의 정보 없음";return o.jsx("div",{className:"group bg-black/40 backdrop-blur-xl border border-white/10 p-8 hover:border-purple-500/50 transition-all",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[o.jsx("h3",{className:"text-2xl font-black text-white",children:m}),o.jsxs("span",{className:`px-4 py-2 border text-sm font-bold flex items-center space-x-2 ${d.className}`,children:[o.jsx(h,{className:"w-4 h-4"}),o.jsx("span",{children:d.label})]})]}),o.jsxs("div",{className:"text-sm text-gray-400 space-y-2 font-mono",children:[o.jsxs("p",{children:["지원번호: ",o.jsx("span",{className:"text-purple-400",children:c.applicationNumber})]}),o.jsxs("p",{children:["지원일: ",o.jsx("span",{className:"text-blue-400",children:a(c.createdAt)})]})]})]}),o.jsx("div",{className:"flex space-x-3",children:o.jsx(Y,{to:`/applications/${c.id}`,className:"px-6 py-3 bg-white/5 border border-white/20 text-white font-bold hover:bg-white/10 hover:border-purple-500/50 transition-all",children:"상세보기 →"})})]})},c.id)})})]})]})}function $M(){const{courseId:t}=Hs(),e=gn(),{user:n}=Ye(),[r,s]=O.useState(""),[i,a]=O.useState(null),[l,c]=O.useState(!0),[d,h]=O.useState(!1),{register:f,handleSubmit:m,formState:{errors:w}}=pc();O.useEffect(()=>{t&&(async()=>{try{c(!0);const v=await mc(t);a(v)}catch(v){console.error("Failed to load course for application:",v),a(null)}finally{c(!1)}})()},[t]);const y=async E=>{try{if(!n){s("로그인이 필요합니다.");return}h(!0),s("");const v={userId:n.uid,userName:n.displayName||n.email,userEmail:n.email,courseId:t,courseTitle:(i==null?void 0:i.title)||"",motivation:E.motivation,studyPlan:E.studyPlan,careerGoal:E.careerGoal,technicalSkills:E.technicalSkills||"",certifications:E.certifications||"",projects:E.projects||""},T=await jM(v);if(!T.success)throw new Error(T.error||"지원 신청에 실패했습니다.");e("/applications",{replace:!0})}catch(v){console.error("Application submission failed:",v),s(v.message||"지원 신청에 실패했습니다.")}finally{h(!1)}};return o.jsxs("div",{className:"min-h-screen bg-black py-16 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6 mb-10",children:[o.jsxs("button",{onClick:()=>e(-1),className:"inline-flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[o.jsx(Pi,{className:"w-4 h-4"}),"뒤로가기"]}),i&&o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xs text-gray-500 tracking-[0.3em] mb-2",children:"APPLY FOR COURSE"}),o.jsx("h1",{className:"text-3xl md:text-4xl font-black text-white leading-tight",children:i.title}),o.jsx("p",{className:"text-gray-500 mt-2 text-sm",children:i.instructor?`담당 강사: ${i.instructor}`:"담당 강사 배정 예정"})]})]}),l?o.jsx("div",{className:"bg-black/40 border border-white/10 p-12 flex items-center justify-center",children:o.jsx($t,{className:"w-8 h-8 text-blue-400 animate-spin"})}):o.jsxs("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8 md:p-12",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-500/20 border border-blue-500/40 flex items-center justify-center",children:o.jsx(Us,{className:"w-6 h-6 text-blue-300"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-black text-white",children:"지원 신청서"}),o.jsx("p",{className:"text-gray-500 text-sm",children:"정확한 정보를 입력해 주세요."})]})]}),r&&o.jsx("div",{className:"mb-6 p-4 border border-red-500/40 bg-red-500/10 text-red-200 text-sm",children:r}),o.jsxs("form",{onSubmit:m(y),className:"space-y-8",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsx("h3",{className:"text-sm font-bold tracking-[0.3em] text-gray-500",children:"WHY THIS COURSE?"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 tracking-[0.2em] mb-2",children:"지원 동기 *"}),o.jsx("textarea",{...f("motivation",{required:"지원 동기를 입력하세요"}),rows:5,className:"w-full bg-black/40 border border-white/10 px-4 py-3 text-sm text-white resize-none focus:outline-none focus:border-blue-500",placeholder:"본 교육과정에 지원하게 된 동기를 작성해주세요"}),w.motivation&&o.jsx("p",{className:"mt-2 text-xs text-red-300",children:w.motivation.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 tracking-[0.2em] mb-2",children:"학습 계획 *"}),o.jsx("textarea",{...f("studyPlan",{required:"학습 계획을 입력하세요"}),rows:5,className:"w-full bg-black/40 border border-white/10 px-4 py-3 text-sm text-white resize-none focus:outline-none focus:border-blue-500",placeholder:"교육과정 수료 후 학습 계획을 작성해주세요"}),w.studyPlan&&o.jsx("p",{className:"mt-2 text-xs text-red-300",children:w.studyPlan.message})]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h3",{className:"text-sm font-bold tracking-[0.3em] text-gray-500",children:"CAREER VISION"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 tracking-[0.2em] mb-2",children:"진로 목표 *"}),o.jsx("textarea",{...f("careerGoal",{required:"진로 목표를 입력하세요"}),rows:5,className:"w-full bg-black/40 border border-white/10 px-4 py-3 text-sm text-white resize-none focus:outline-none focus:border-blue-500",placeholder:"정보보안 분야에서의 진로 목표를 작성해주세요"}),w.careerGoal&&o.jsx("p",{className:"mt-2 text-xs text-red-300",children:w.careerGoal.message})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 tracking-[0.2em] mb-2",children:"보유 기술"}),o.jsx("textarea",{...f("technicalSkills"),rows:2,className:"w-full bg-black/40 border border-white/10 px-4 py-3 text-sm text-white resize-none focus:outline-none focus:border-blue-500",placeholder:"예: Python, Java, Linux, Burp Suite"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 tracking-[0.2em] mb-2",children:"보유 자격증"}),o.jsx("textarea",{...f("certifications"),rows:2,className:"w-full bg-black/40 border border-white/10 px-4 py-3 text-sm text-white resize-none focus:outline-none focus:border-blue-500",placeholder:"예: 정보보안기사, CISSP 등"})]})]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h3",{className:"text-sm font-bold tracking-[0.3em] text-gray-500",children:"PROJECT EXPERIENCE"}),o.jsx("textarea",{...f("projects"),rows:4,className:"w-full bg-black/40 border border-white/10 px-4 py-3 text-sm text-white resize-none focus:outline-none focus:border-blue-500",placeholder:"진행했던 프로젝트나 팀 활동, 해커톤 경험 등을 작성해주세요"})]}),o.jsx("section",{className:"space-y-4",children:o.jsxs("label",{className:"flex items-start gap-3 bg-blue-500/5 border border-blue-500/20 p-4",children:[o.jsx("input",{type:"checkbox",required:!0,className:"mt-1 w-4 h-4 rounded border-blue-500/40 text-blue-500 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-300 leading-relaxed",children:"제출한 정보가 사실임을 확인하며, 허위 정보 제출 시 합격이 취소될 수 있음을 이해합니다."})]})}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsx("button",{type:"button",onClick:()=>e(-1),className:"flex-1 px-6 py-3 bg-white/5 border border-white/10 text-white font-bold tracking-wide hover:bg-white/10 transition-all",disabled:d,children:"취소"}),o.jsxs("button",{type:"submit",disabled:d,className:"flex-1 inline-flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-bold tracking-wide hover:shadow-lg hover:shadow-blue-500/40 transition-all disabled:opacity-50",children:[d?o.jsx($t,{className:"w-4 h-4 animate-spin"}):o.jsx(AS,{className:"w-4 h-4"}),d?"제출 중...":"지원 신청하기"]})]})]})]})]})]})}const KS=async(t=50)=>{try{const e=ut(de,"notices"),n=_r(e,aa("createdAt","desc"),j0(t));return(await Qt(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Error getting notices:",e),[]}},zM=async t=>{try{const e=Me(de,"notices",t),n=await Bt(e);if(n.exists()){const r={id:n.id,...n.data()};try{await Js(e,{views:(r.views||0)+1})}catch(s){console.warn("Failed to increment notice views (ignored):",s)}return r}return null}catch(e){return console.error("Error getting notice:",e),null}},qM=async t=>{try{const e=ut(de,"notices");return{success:!0,id:(await dc(e,{...t,views:0,createdAt:xt(),updatedAt:xt()})).id}}catch(e){return console.error("Error creating notice:",e),{success:!1,error:e.message}}},HM=async(t,e)=>{try{const n=Me(de,"notices",t);return await Js(n,{...e,updatedAt:xt()}),{success:!0}}catch(n){return console.error("Error updating notice:",n),{success:!1,error:n.message}}},WM=async t=>{try{const e=Me(de,"notices",t);return await C0(e),{success:!0}}catch(e){return console.error("Error deleting notice:",e),{success:!1,error:e.message}}};function GM(){const[t,e]=O.useState([]),[n,r]=O.useState(!0);O.useEffect(()=>{s()},[]);const s=async()=>{try{const l=await KS(50);e(l)}catch(l){console.error("Error loading notices:",l)}finally{r(!1)}},i=l=>l?(l.toDate?l.toDate():new Date(l)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",a=l=>{const c={general:"GENERAL",event:"EVENT",update:"UPDATE",important:"IMPORTANT"},d=(l==null?void 0:l.toLowerCase())||"general";return c[d]||"GENERAL"};return o.jsxs("div",{className:"min-h-screen bg-black py-16 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx("h1",{className:"text-5xl md:text-6xl font-black text-white mb-4",children:"NOTICE"}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 mx-auto mb-6"}),o.jsx("p",{className:"text-gray-400 text-lg",children:"Stay updated with latest news"})]}),n?o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin mx-auto"}),o.jsx("p",{className:"text-gray-400 mt-4 font-mono",children:"LOADING..."})]}):t.length===0?o.jsxs("div",{className:"text-center py-20",children:[o.jsx(NS,{className:"w-20 h-20 text-gray-600 mx-auto mb-6"}),o.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"No Notices Available"}),o.jsx("p",{className:"text-gray-400",children:"공지사항이 아직 등록되지 않았습니다."})]}):o.jsx("div",{className:"space-y-4",children:t.map(l=>o.jsxs(Y,{to:`/notices/${l.id}`,className:"group block bg-white/5 backdrop-blur-xl border border-white/10 hover:border-purple-500/50 p-6 transition-all duration-500 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/0 to-blue-500/0 group-hover:from-purple-500/5 group-hover:to-blue-500/5 transition-all duration-500"}),o.jsxs("div",{className:"relative flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[l.isPinned&&o.jsx(OV,{className:"w-5 h-5 text-purple-400"}),l.isImportant&&o.jsx(zi,{className:"w-5 h-5 text-red-400 animate-pulse"}),o.jsx("span",{className:"px-3 py-1 bg-purple-500/20 border border-purple-500/50 text-purple-300 text-xs font-bold tracking-wider",children:a(l.category)})]}),o.jsx("h3",{className:"text-2xl font-black text-white mb-3 group-hover:text-purple-400 transition-colors",children:l.title}),o.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[o.jsx("span",{className:"font-mono",children:i(l.createdAt)}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(IS,{className:"w-4 h-4 text-purple-400"}),o.jsx("span",{className:"font-mono",children:l.views||0})]})]})]}),o.jsx(F0,{className:"w-6 h-6 text-gray-600 group-hover:text-purple-400 group-hover:translate-x-2 transition-all"})]}),o.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 to-blue-500 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left"})]},l.id))})]})]})}function KM(){const{id:t}=Hs(),e=gn(),[n,r]=O.useState(null),[s,i]=O.useState(!0);O.useEffect(()=>{a()},[t]);const a=async()=>{try{const d=await zM(t);r(d)}catch(d){console.error("Error loading notice:",d)}finally{i(!1)}},l=d=>d?(d.toDate?d.toDate():new Date(d)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",c=d=>{const h={general:"GENERAL",event:"EVENT",update:"UPDATE",important:"IMPORTANT"},f=(d==null?void 0:d.toLowerCase())||"general";return h[f]||"GENERAL"};return s?o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400 font-mono",children:"LOADING..."})]})}):n?o.jsxs("div",{className:"min-h-screen bg-black py-12 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("button",{onClick:()=>e(-1),className:"flex items-center space-x-2 text-gray-400 hover:text-white mb-8 transition-colors group",children:[o.jsx(Pi,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),o.jsx("span",{className:"font-bold",children:"Back to List"})]}),o.jsxs("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 overflow-hidden",children:[o.jsxs("div",{className:"border-b border-white/10 p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("span",{className:"px-4 py-2 bg-purple-500/20 border border-purple-500/50 text-purple-300 text-xs font-bold tracking-wider",children:c(n.category)}),n.isPinned&&o.jsx("span",{className:"px-4 py-2 bg-yellow-500/20 border border-yellow-500/50 text-yellow-300 text-xs font-bold tracking-wider",children:"PINNED"})]}),o.jsx("h1",{className:"text-4xl font-black text-white mb-6 leading-tight",children:n.title}),o.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-sm text-gray-400",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qi,{className:"w-4 h-4 text-purple-400"}),o.jsx("span",{className:"font-mono",children:n.author||"Admin"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(M0,{className:"w-4 h-4 text-purple-400"}),o.jsx("span",{className:"font-mono",children:l(n.createdAt)})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(IS,{className:"w-4 h-4 text-purple-400"}),o.jsxs("span",{className:"font-mono",children:[n.views||0," views"]})]})]})]}),o.jsx("div",{className:"p-8",children:o.jsx("div",{className:"prose prose-invert max-w-none text-gray-300 text-base leading-relaxed",dangerouslySetInnerHTML:{__html:n.content.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" class="max-w-full h-auto my-4 rounded border border-white/10" />').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 underline">$1</a>').replace(/```([\s\S]*?)```/g,'<pre class="bg-black/60 border border-white/10 p-4 rounded my-4 overflow-x-auto"><code>$1</code></pre>').replace(/`([^`]+)`/g,'<code class="bg-purple-500/10 border border-purple-500/20 text-purple-300 px-2 py-0.5 rounded">$1</code>').replace(/### ([^\n]+)/g,'<h3 class="text-xl font-bold text-gray-200 mt-4 mb-2">$1</h3>').replace(/## ([^\n]+)/g,'<h2 class="text-2xl font-bold text-white mt-6 mb-3">$1</h2>').replace(/# ([^\n]+)/g,'<h1 class="text-3xl font-black text-white mt-8 mb-4 border-b border-purple-500/30 pb-2">$1</h1>').replace(/\n/g,"<br/>")}})}),o.jsx("div",{className:"border-t border-white/10 p-8",children:o.jsx("button",{onClick:()=>e("/notices"),className:"px-8 py-3 bg-white/5 border border-white/20 text-white font-bold hover:bg-white/10 hover:border-purple-500/50 transition-all",children:"Back to List"})})]})]})]}):o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:"Notice Not Found"}),o.jsx("button",{onClick:()=>e("/notices"),className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold hover:shadow-lg hover:shadow-purple-500/50 transition-all",children:"Back to Notices"})]})})}function QM(){const[t,e]=O.useState(null),n=[{id:1,category:"GENERAL",question:"덕영고등학교 정보보안소프트웨어과는 어떤 곳인가요?",answer:"덕영고등학교 정보보안소프트웨어과는 미래의 화이트해커와 정보보안 전문가를 양성하는 특성화 학과입니다. 실무 중심의 교육과 현직 전문가 멘토링을 통해 실전 역량을 키울 수 있습니다."},{id:2,category:"APPLICATION",question:"동아리 가입은 어떻게 하나요?",answer:"덕영고등학교 정보보안소프트웨어과 재학생이라면 누구나 지원 가능합니다. 정보보안에 대한 열정과 배우고자 하는 의지가 있다면 환영합니다."},{id:3,category:"COURSE",question:"교육 과정은 어떻게 구성되어 있나요?",answer:"기초 보안 개념부터 실전 해킹 기법, 팀 프로젝트까지 단계별로 구성되어 있습니다. 방과 후 활동과 주말 세미나를 통해 심화 학습을 진행합니다."},{id:4,category:"ACTIVITY",question:"동아리 활동은 어떻게 진행되나요?",answer:"주 2회 정기 모임을 통해 이론 학습과 실습을 진행하며, 월 1회 외부 전문가 특강과 해킹 대회 참가 기회가 제공됩니다. 방학 중에는 집중 프로젝트를 수행합니다."},{id:5,category:"GENERAL",question:"동아리 활동을 통해 얻을 수 있는 것은?",answer:"정보보안 실무 역량 강화, 각종 보안 대회 참가 및 수상 경력, 생활기록부 기재를 통한 입시 우대, 선배-후배 멘토링 네트워크 구축 등 다양한 혜택이 있습니다."}],r=s=>({GENERAL:"GENERAL",APPLICATION:"APPLICATION",COURSE:"COURSE",ACTIVITY:"ACTIVITY",TECHNICAL:"TECHNICAL"})[s]||"GENERAL";return o.jsxs("div",{className:"min-h-screen bg-black py-16 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsxs("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center mx-auto mb-6 relative",children:[o.jsx(SV,{className:"w-10 h-10 text-white"}),o.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})]}),o.jsx("h1",{className:"text-5xl md:text-6xl font-black text-white mb-4",children:"FAQ"}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 mx-auto mb-6"}),o.jsx("p",{className:"text-gray-400 text-lg",children:"Find answers to common questions"})]}),o.jsx("div",{className:"space-y-4 mb-10",children:n.map(s=>o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 overflow-hidden transition-all duration-500",children:[o.jsxs("button",{onClick:()=>e(t===s.id?null:s.id),className:"w-full flex items-center justify-between text-left p-6 hover:bg-white/5 transition-all",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"mb-2",children:o.jsx("span",{className:"px-3 py-1 bg-purple-500/20 border border-purple-500/50 text-purple-300 text-xs font-bold tracking-wider",children:r(s.category)})}),o.jsx("span",{className:"text-xl font-bold text-white",children:s.question})]}),t===s.id?o.jsx(_V,{className:"w-6 h-6 text-purple-400 ml-4"}):o.jsx(bV,{className:"w-6 h-6 text-gray-600 ml-4"})]}),t===s.id&&o.jsx("div",{className:"px-6 pb-6 pt-2 border-t border-white/10 animate-fadeIn",children:o.jsx("p",{className:"text-gray-400 leading-relaxed",children:s.answer})})]},s.id))}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-500/10 to-blue-500/10 backdrop-blur-xl border border-purple-500/20 p-8 text-center",children:[o.jsx(RV,{className:"w-12 h-12 text-purple-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-300 text-lg mb-4",children:"찾으시는 답변이 없으신가요?"}),o.jsx(Y,{to:"/inquiry",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold hover:shadow-lg hover:shadow-purple-500/50 transition-all",children:"문의하기"})]})]})]})}function JM(){const{user:t}=Ye(),[e,n]=O.useState(!1),[r,s]=O.useState(!1),[i,a]=O.useState(""),{register:l,handleSubmit:c,reset:d,formState:{errors:h}}=pc({defaultValues:{name:(t==null?void 0:t.displayName)||"",email:(t==null?void 0:t.email)||""}}),f=async m=>{s(!0),a("");try{await dc(ut(de,"contacts"),{name:m.name,email:m.email,category:m.category,subject:m.subject,message:m.message,userId:(t==null?void 0:t.uid)||null,status:"pending",createdAt:xt()}),n(!0),d(),setTimeout(()=>n(!1),5e3)}catch(w){console.error("Error submitting inquiry:",w),a("문의 등록에 실패했습니다. 다시 시도해주세요.")}finally{s(!1)}};return o.jsxs("div",{className:"min-h-screen bg-black py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsxs("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center mx-auto mb-6 relative",children:[o.jsx(PV,{className:"w-12 h-12 text-white"}),o.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})]}),o.jsx("h1",{className:"text-5xl font-black text-white mb-3",children:"CONTACT US"}),o.jsx("p",{className:"text-gray-400 text-lg",children:"문의사항을 남겨주시면 빠른 시일 내에 답변드리겠습니다"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 p-8 md:p-10",children:[e&&o.jsx("div",{className:"mb-6 p-6 bg-green-500/10 border border-green-500/50",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx(xi,{className:"w-6 h-6 text-green-400 flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:"문의 접수 완료!"}),o.jsx("p",{className:"text-gray-300",children:"문의가 성공적으로 등록되었습니다. 빠른 시일 내에 답변드리겠습니다."})]})]})}),i&&o.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/50",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(zi,{className:"w-5 h-5 text-red-400"}),o.jsxs("p",{className:"text-red-400 font-mono text-sm",children:["ERROR: ",i]})]})}),o.jsxs("form",{onSubmit:c(f),className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"NAME *"}),o.jsxs("div",{className:"relative",children:[o.jsx(qi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),o.jsx("input",{...l("name",{required:"이름을 입력하세요"}),type:"text",className:"w-full bg-black/40 border border-white/20 text-white pl-12 pr-4 py-3 focus:outline-none focus:border-purple-500 transition-colors font-mono",placeholder:"이름"})]}),h.name&&o.jsx("p",{className:"mt-1 text-sm text-red-400 font-mono",children:h.name.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"EMAIL *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Bs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),o.jsx("input",{...l("email",{required:"이메일을 입력하세요",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"올바른 이메일 형식이 아닙니다"}}),type:"email",className:"w-full bg-black/40 border border-white/20 text-white pl-12 pr-4 py-3 focus:outline-none focus:border-purple-500 transition-colors font-mono",placeholder:"email@example.com"})]}),h.email&&o.jsx("p",{className:"mt-1 text-sm text-red-400 font-mono",children:h.email.message})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"CATEGORY *"}),o.jsxs("select",{...l("category",{required:"문의 유형을 선택하세요"}),className:"w-full bg-black/40 border border-white/20 text-white px-4 py-3 focus:outline-none focus:border-purple-500 transition-colors font-mono",children:[o.jsx("option",{value:"",className:"bg-black",children:"선택하세요"}),o.jsx("option",{value:"general",className:"bg-black",children:"일반 문의"}),o.jsx("option",{value:"application",className:"bg-black",children:"지원 관련"}),o.jsx("option",{value:"course",className:"bg-black",children:"교육 과정"}),o.jsx("option",{value:"technical",className:"bg-black",children:"기술 지원"}),o.jsx("option",{value:"other",className:"bg-black",children:"기타"})]}),h.category&&o.jsx("p",{className:"mt-1 text-sm text-red-400 font-mono",children:h.category.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"SUBJECT *"}),o.jsx("input",{...l("subject",{required:"제목을 입력하세요"}),type:"text",className:"w-full bg-black/40 border border-white/20 text-white px-4 py-3 focus:outline-none focus:border-purple-500 transition-colors font-mono",placeholder:"문의 제목"}),h.subject&&o.jsx("p",{className:"mt-1 text-sm text-red-400 font-mono",children:h.subject.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"MESSAGE *"}),o.jsx("textarea",{...l("message",{required:"내용을 입력하세요",minLength:{value:10,message:"최소 10자 이상 입력해주세요"}}),rows:8,className:"w-full bg-black/40 border border-white/20 text-white px-4 py-3 focus:outline-none focus:border-purple-500 transition-colors font-mono resize-none",placeholder:"문의 내용을 상세히 작성해주세요..."}),h.message&&o.jsx("p",{className:"mt-1 text-sm text-red-400 font-mono",children:h.message.message})]}),o.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-4 font-bold tracking-wider hover:from-purple-700 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 group",children:r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"SENDING..."]}):o.jsxs(o.Fragment,{children:[o.jsx(AS,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"}),"SEND MESSAGE"]})})]})]})]})]})}function QS(t,e){return function(){return t.apply(e,arguments)}}const{toString:YM}=Object.prototype,{getPrototypeOf:Y0}=Object,{iterator:Ah,toStringTag:JS}=Symbol,jh=(t=>e=>{const n=YM.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Zn=t=>(t=t.toLowerCase(),e=>jh(e)===t),Ch=t=>e=>typeof e===t,{isArray:ca}=Array,Ko=Ch("undefined");function gc(t){return t!==null&&!Ko(t)&&t.constructor!==null&&!Ko(t.constructor)&&pn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const YS=Zn("ArrayBuffer");function XM(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&YS(t.buffer),e}const ZM=Ch("string"),pn=Ch("function"),XS=Ch("number"),yc=t=>t!==null&&typeof t=="object",eF=t=>t===!0||t===!1,ku=t=>{if(jh(t)!=="object")return!1;const e=Y0(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(JS in t)&&!(Ah in t)},tF=t=>{if(!yc(t)||gc(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},nF=Zn("Date"),rF=Zn("File"),sF=Zn("Blob"),iF=Zn("FileList"),oF=t=>yc(t)&&pn(t.pipe),aF=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||pn(t.append)&&((e=jh(t))==="formdata"||e==="object"&&pn(t.toString)&&t.toString()==="[object FormData]"))},lF=Zn("URLSearchParams"),[cF,uF,dF,hF]=["ReadableStream","Request","Response","Headers"].map(Zn),fF=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),ca(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(gc(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let l;for(r=0;r<a;r++)l=i[r],e.call(null,t[l],l,t)}}function ZS(t,e){if(gc(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const fi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,eI=t=>!Ko(t)&&t!==fi;function Sm(){const{caseless:t,skipUndefined:e}=eI(this)&&this||{},n={},r=(s,i)=>{const a=t&&ZS(n,i)||i;ku(n[a])&&ku(s)?n[a]=Sm(n[a],s):ku(s)?n[a]=Sm({},s):ca(s)?n[a]=s.slice():(!e||!Ko(s))&&(n[a]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&xc(arguments[s],r);return n}const pF=(t,e,n,{allOwnKeys:r}={})=>(xc(e,(s,i)=>{n&&pn(s)?t[i]=QS(s,n):t[i]=s},{allOwnKeys:r}),t),mF=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),gF=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},yF=(t,e,n,r)=>{let s,i,a;const l={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!r||r(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=n!==!1&&Y0(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},xF=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},vF=t=>{if(!t)return null;if(ca(t))return t;let e=t.length;if(!XS(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},wF=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Y0(Uint8Array)),bF=(t,e)=>{const r=(t&&t[Ah]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},_F=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},EF=Zn("HTMLFormElement"),NF=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),fb=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),TF=Zn("RegExp"),tI=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};xc(n,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(r[i]=a||s)}),Object.defineProperties(t,r)},SF=t=>{tI(t,(e,n)=>{if(pn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(pn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},IF=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return ca(t)?r(t):r(String(t).split(e)),n},kF=()=>{},AF=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function jF(t){return!!(t&&pn(t.append)&&t[JS]==="FormData"&&t[Ah])}const CF=t=>{const e=new Array(10),n=(r,s)=>{if(yc(r)){if(e.indexOf(r)>=0)return;if(gc(r))return r;if(!("toJSON"in r)){e[s]=r;const i=ca(r)?[]:{};return xc(r,(a,l)=>{const c=n(a,s+1);!Ko(c)&&(i[l]=c)}),e[s]=void 0,i}}return r};return n(t,0)},RF=Zn("AsyncFunction"),PF=t=>t&&(yc(t)||pn(t))&&pn(t.then)&&pn(t.catch),nI=((t,e)=>t?setImmediate:e?((n,r)=>(fi.addEventListener("message",({source:s,data:i})=>{s===fi&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),fi.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",pn(fi.postMessage)),DF=typeof queueMicrotask<"u"?queueMicrotask.bind(fi):typeof process<"u"&&process.nextTick||nI,OF=t=>t!=null&&pn(t[Ah]),F={isArray:ca,isArrayBuffer:YS,isBuffer:gc,isFormData:aF,isArrayBufferView:XM,isString:ZM,isNumber:XS,isBoolean:eF,isObject:yc,isPlainObject:ku,isEmptyObject:tF,isReadableStream:cF,isRequest:uF,isResponse:dF,isHeaders:hF,isUndefined:Ko,isDate:nF,isFile:rF,isBlob:sF,isRegExp:TF,isFunction:pn,isStream:oF,isURLSearchParams:lF,isTypedArray:wF,isFileList:iF,forEach:xc,merge:Sm,extend:pF,trim:fF,stripBOM:mF,inherits:gF,toFlatObject:yF,kindOf:jh,kindOfTest:Zn,endsWith:xF,toArray:vF,forEachEntry:bF,matchAll:_F,isHTMLForm:EF,hasOwnProperty:fb,hasOwnProp:fb,reduceDescriptors:tI,freezeMethods:SF,toObjectSet:IF,toCamelCase:NF,noop:kF,toFiniteNumber:AF,findKey:ZS,global:fi,isContextDefined:eI,isSpecCompliantForm:jF,toJSONObject:CF,isAsyncFn:RF,isThenable:PF,setImmediate:nI,asap:DF,isIterable:OF};function pe(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}F.inherits(pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.status}}});const rI=pe.prototype,sI={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{sI[t]={value:t}});Object.defineProperties(pe,sI);Object.defineProperty(rI,"isAxiosError",{value:!0});pe.from=(t,e,n,r,s,i)=>{const a=Object.create(rI);F.toFlatObject(t,a,function(h){return h!==Error.prototype},d=>d!=="isAxiosError");const l=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return pe.call(a,l,c,n,r,s),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",i&&Object.assign(a,i),a};const LF=null;function Im(t){return F.isPlainObject(t)||F.isArray(t)}function iI(t){return F.endsWith(t,"[]")?t.slice(0,-2):t}function pb(t,e,n){return t?t.concat(e).map(function(s,i){return s=iI(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function VF(t){return F.isArray(t)&&!t.some(Im)}const MF=F.toFlatObject(F,{},null,function(e){return/^is[A-Z]/.test(e)});function Rh(t,e,n){if(!F.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=F.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,v){return!F.isUndefined(v[E])});const r=n.metaTokens,s=n.visitor||h,i=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(e);if(!F.isFunction(s))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if(F.isDate(y))return y.toISOString();if(F.isBoolean(y))return y.toString();if(!c&&F.isBlob(y))throw new pe("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(y)||F.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function h(y,E,v){let T=y;if(y&&!v&&typeof y=="object"){if(F.endsWith(E,"{}"))E=r?E:E.slice(0,-2),y=JSON.stringify(y);else if(F.isArray(y)&&VF(y)||(F.isFileList(y)||F.endsWith(E,"[]"))&&(T=F.toArray(y)))return E=iI(E),T.forEach(function(N,R){!(F.isUndefined(N)||N===null)&&e.append(a===!0?pb([E],R,i):a===null?E:E+"[]",d(N))}),!1}return Im(y)?!0:(e.append(pb(v,E,i),d(y)),!1)}const f=[],m=Object.assign(MF,{defaultVisitor:h,convertValue:d,isVisitable:Im});function w(y,E){if(!F.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+E.join("."));f.push(y),F.forEach(y,function(T,x){(!(F.isUndefined(T)||T===null)&&s.call(e,T,F.isString(x)?x.trim():x,E,m))===!0&&w(T,E?E.concat(x):[x])}),f.pop()}}if(!F.isObject(t))throw new TypeError("data must be an object");return w(t),e}function mb(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function X0(t,e){this._pairs=[],t&&Rh(t,this,e)}const oI=X0.prototype;oI.append=function(e,n){this._pairs.push([e,n])};oI.toString=function(e){const n=e?function(r){return e.call(this,r,mb)}:mb;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function FF(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function aI(t,e,n){if(!e)return t;const r=n&&n.encode||FF;F.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=F.isURLSearchParams(e)?e.toString():new X0(e,n).toString(r),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class gb{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){F.forEach(this.handlers,function(r){r!==null&&e(r)})}}const lI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},UF=typeof URLSearchParams<"u"?URLSearchParams:X0,BF=typeof FormData<"u"?FormData:null,$F=typeof Blob<"u"?Blob:null,zF={isBrowser:!0,classes:{URLSearchParams:UF,FormData:BF,Blob:$F},protocols:["http","https","file","blob","url","data"]},Z0=typeof window<"u"&&typeof document<"u",km=typeof navigator=="object"&&navigator||void 0,qF=Z0&&(!km||["ReactNative","NativeScript","NS"].indexOf(km.product)<0),HF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",WF=Z0&&window.location.href||"http://localhost",GF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Z0,hasStandardBrowserEnv:qF,hasStandardBrowserWebWorkerEnv:HF,navigator:km,origin:WF},Symbol.toStringTag,{value:"Module"})),Ft={...GF,...zF};function KF(t,e){return Rh(t,new Ft.classes.URLSearchParams,{visitor:function(n,r,s,i){return Ft.isNode&&F.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function QF(t){return F.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function JF(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function cI(t){function e(n,r,s,i){let a=n[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=i>=n.length;return a=!a&&F.isArray(s)?s.length:a,c?(F.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!l):((!s[a]||!F.isObject(s[a]))&&(s[a]=[]),e(n,r,s[a],i)&&F.isArray(s[a])&&(s[a]=JF(s[a])),!l)}if(F.isFormData(t)&&F.isFunction(t.entries)){const n={};return F.forEachEntry(t,(r,s)=>{e(QF(r),s,n,0)}),n}return null}function YF(t,e,n){if(F.isString(t))try{return(e||JSON.parse)(t),F.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const vc={transitional:lI,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=F.isObject(e);if(i&&F.isHTMLForm(e)&&(e=new FormData(e)),F.isFormData(e))return s?JSON.stringify(cI(e)):e;if(F.isArrayBuffer(e)||F.isBuffer(e)||F.isStream(e)||F.isFile(e)||F.isBlob(e)||F.isReadableStream(e))return e;if(F.isArrayBufferView(e))return e.buffer;if(F.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return KF(e,this.formSerializer).toString();if((l=F.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Rh(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),YF(e)):e}],transformResponse:[function(e){const n=this.transitional||vc.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(F.isResponse(e)||F.isReadableStream(e))return e;if(e&&F.isString(e)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(l){if(a)throw l.name==="SyntaxError"?pe.from(l,pe.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ft.classes.FormData,Blob:Ft.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],t=>{vc.headers[t]={}});const XF=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ZF=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||e[n]&&XF[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},yb=Symbol("internals");function Ba(t){return t&&String(t).trim().toLowerCase()}function Au(t){return t===!1||t==null?t:F.isArray(t)?t.map(Au):String(t)}function eU(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const tU=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Hf(t,e,n,r,s){if(F.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!F.isString(e)){if(F.isString(r))return e.indexOf(r)!==-1;if(F.isRegExp(r))return r.test(e)}}function nU(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function rU(t,e){const n=F.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,a){return this[r].call(this,e,s,i,a)},configurable:!0})})}let mn=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(l,c,d){const h=Ba(c);if(!h)throw new Error("header name must be a non-empty string");const f=F.findKey(s,h);(!f||s[f]===void 0||d===!0||d===void 0&&s[f]!==!1)&&(s[f||c]=Au(l))}const a=(l,c)=>F.forEach(l,(d,h)=>i(d,h,c));if(F.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(F.isString(e)&&(e=e.trim())&&!tU(e))a(ZF(e),n);else if(F.isObject(e)&&F.isIterable(e)){let l={},c,d;for(const h of e){if(!F.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[d=h[0]]=(c=l[d])?F.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}a(l,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Ba(e),e){const r=F.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return eU(s);if(F.isFunction(n))return n.call(this,s,r);if(F.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ba(e),e){const r=F.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Hf(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(a){if(a=Ba(a),a){const l=F.findKey(r,a);l&&(!n||Hf(r,r[l],l,n))&&(delete r[l],s=!0)}}return F.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Hf(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return F.forEach(this,(s,i)=>{const a=F.findKey(r,i);if(a){n[a]=Au(s),delete n[i];return}const l=e?nU(i):String(i).trim();l!==i&&delete n[i],n[l]=Au(s),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return F.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&F.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[yb]=this[yb]={accessors:{}}).accessors,s=this.prototype;function i(a){const l=Ba(a);r[l]||(rU(s,a),r[l]=!0)}return F.isArray(e)?e.forEach(i):i(e),this}};mn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(mn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});F.freezeMethods(mn);function Wf(t,e){const n=this||vc,r=e||n,s=mn.from(r.headers);let i=r.data;return F.forEach(t,function(l){i=l.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function uI(t){return!!(t&&t.__CANCEL__)}function ua(t,e,n){pe.call(this,t??"canceled",pe.ERR_CANCELED,e,n),this.name="CanceledError"}F.inherits(ua,pe,{__CANCEL__:!0});function dI(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new pe("Request failed with status code "+n.status,[pe.ERR_BAD_REQUEST,pe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function sU(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function iU(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),h=r[i];a||(a=d),n[s]=c,r[s]=d;let f=i,m=0;for(;f!==s;)m+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),d-a<e)return;const w=h&&d-h;return w?Math.round(m*1e3/w):void 0}}function oU(t,e){let n=0,r=1e3/e,s,i;const a=(d,h=Date.now())=>{n=h,s=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const h=Date.now(),f=h-n;f>=r?a(d,h):(s=d,i||(i=setTimeout(()=>{i=null,a(s)},r-f)))},()=>s&&a(s)]}const kd=(t,e,n=3)=>{let r=0;const s=iU(50,250);return oU(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,c=a-r,d=s(c),h=a<=l;r=a;const f={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&h?(l-a)/d:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(f)},n)},xb=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},vb=t=>(...e)=>F.asap(()=>t(...e)),aU=Ft.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ft.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ft.origin),Ft.navigator&&/(msie|trident)/i.test(Ft.navigator.userAgent)):()=>!0,lU=Ft.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const a=[t+"="+encodeURIComponent(e)];F.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),F.isString(r)&&a.push("path="+r),F.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function cU(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function uU(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function hI(t,e,n){let r=!cU(e);return t&&(r||n==!1)?uU(t,e):e}const wb=t=>t instanceof mn?{...t}:t;function Di(t,e){e=e||{};const n={};function r(d,h,f,m){return F.isPlainObject(d)&&F.isPlainObject(h)?F.merge.call({caseless:m},d,h):F.isPlainObject(h)?F.merge({},h):F.isArray(h)?h.slice():h}function s(d,h,f,m){if(F.isUndefined(h)){if(!F.isUndefined(d))return r(void 0,d,f,m)}else return r(d,h,f,m)}function i(d,h){if(!F.isUndefined(h))return r(void 0,h)}function a(d,h){if(F.isUndefined(h)){if(!F.isUndefined(d))return r(void 0,d)}else return r(void 0,h)}function l(d,h,f){if(f in e)return r(d,h);if(f in t)return r(void 0,d)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(d,h,f)=>s(wb(d),wb(h),f,!0)};return F.forEach(Object.keys({...t,...e}),function(h){const f=c[h]||s,m=f(t[h],e[h],h);F.isUndefined(m)&&f!==l||(n[h]=m)}),n}const fI=t=>{const e=Di({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:l}=e;if(e.headers=a=mn.from(a),e.url=aI(hI(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),F.isFormData(n)){if(Ft.hasStandardBrowserEnv||Ft.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(F.isFunction(n.getHeaders)){const c=n.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([h,f])=>{d.includes(h.toLowerCase())&&a.set(h,f)})}}if(Ft.hasStandardBrowserEnv&&(r&&F.isFunction(r)&&(r=r(e)),r||r!==!1&&aU(e.url))){const c=s&&i&&lU.read(i);c&&a.set(s,c)}return e},dU=typeof XMLHttpRequest<"u",hU=dU&&function(t){return new Promise(function(n,r){const s=fI(t);let i=s.data;const a=mn.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=s,h,f,m,w,y;function E(){w&&w(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let v=new XMLHttpRequest;v.open(s.method.toUpperCase(),s.url,!0),v.timeout=s.timeout;function T(){if(!v)return;const N=mn.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),C={data:!l||l==="text"||l==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:N,config:t,request:v};dI(function(b){n(b),E()},function(b){r(b),E()},C),v=null}"onloadend"in v?v.onloadend=T:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(T)},v.onabort=function(){v&&(r(new pe("Request aborted",pe.ECONNABORTED,t,v)),v=null)},v.onerror=function(R){const C=R&&R.message?R.message:"Network Error",L=new pe(C,pe.ERR_NETWORK,t,v);L.event=R||null,r(L),v=null},v.ontimeout=function(){let R=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const C=s.transitional||lI;s.timeoutErrorMessage&&(R=s.timeoutErrorMessage),r(new pe(R,C.clarifyTimeoutError?pe.ETIMEDOUT:pe.ECONNABORTED,t,v)),v=null},i===void 0&&a.setContentType(null),"setRequestHeader"in v&&F.forEach(a.toJSON(),function(R,C){v.setRequestHeader(C,R)}),F.isUndefined(s.withCredentials)||(v.withCredentials=!!s.withCredentials),l&&l!=="json"&&(v.responseType=s.responseType),d&&([m,y]=kd(d,!0),v.addEventListener("progress",m)),c&&v.upload&&([f,w]=kd(c),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",w)),(s.cancelToken||s.signal)&&(h=N=>{v&&(r(!N||N.type?new ua(null,t,v):N),v.abort(),v=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const x=sU(s.url);if(x&&Ft.protocols.indexOf(x)===-1){r(new pe("Unsupported protocol "+x+":",pe.ERR_BAD_REQUEST,t));return}v.send(i||null)})},fU=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(d){if(!s){s=!0,l();const h=d instanceof Error?d:this.reason;r.abort(h instanceof pe?h:new ua(h instanceof Error?h.message:h))}};let a=e&&setTimeout(()=>{a=null,i(new pe(`timeout ${e} of ms exceeded`,pe.ETIMEDOUT))},e);const l=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>F.asap(l),c}},pU=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},mU=async function*(t,e){for await(const n of gU(t))yield*pU(n,e)},gU=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},bb=(t,e,n,r)=>{const s=mU(t,e);let i=0,a,l=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:d,value:h}=await s.next();if(d){l(),c.close();return}let f=h.byteLength;if(n){let m=i+=f;n(m)}c.enqueue(new Uint8Array(h))}catch(d){throw l(d),d}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},_b=64*1024,{isFunction:su}=F,yU=(({Request:t,Response:e})=>({Request:t,Response:e}))(F.global),{ReadableStream:Eb,TextEncoder:Nb}=F.global,Tb=(t,...e)=>{try{return!!t(...e)}catch{return!1}},xU=t=>{t=F.merge.call({skipUndefined:!0},yU,t);const{fetch:e,Request:n,Response:r}=t,s=e?su(e):typeof fetch=="function",i=su(n),a=su(r);if(!s)return!1;const l=s&&su(Eb),c=s&&(typeof Nb=="function"?(y=>E=>y.encode(E))(new Nb):async y=>new Uint8Array(await new n(y).arrayBuffer())),d=i&&l&&Tb(()=>{let y=!1;const E=new n(Ft.origin,{body:new Eb,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!E}),h=a&&l&&Tb(()=>F.isReadableStream(new r("").body)),f={stream:h&&(y=>y.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!f[y]&&(f[y]=(E,v)=>{let T=E&&E[y];if(T)return T.call(E);throw new pe(`Response type '${y}' is not supported`,pe.ERR_NOT_SUPPORT,v)})});const m=async y=>{if(y==null)return 0;if(F.isBlob(y))return y.size;if(F.isSpecCompliantForm(y))return(await new n(Ft.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(F.isArrayBufferView(y)||F.isArrayBuffer(y))return y.byteLength;if(F.isURLSearchParams(y)&&(y=y+""),F.isString(y))return(await c(y)).byteLength},w=async(y,E)=>{const v=F.toFiniteNumber(y.getContentLength());return v??m(E)};return async y=>{let{url:E,method:v,data:T,signal:x,cancelToken:N,timeout:R,onDownloadProgress:C,onUploadProgress:L,responseType:b,headers:_,withCredentials:A="same-origin",fetchOptions:j}=fI(y),I=e||fetch;b=b?(b+"").toLowerCase():"text";let P=fU([x,N&&N.toAbortSignal()],R),k=null;const oe=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let ge;try{if(L&&d&&v!=="get"&&v!=="head"&&(ge=await w(_,T))!==0){let ye=new n(E,{method:"POST",body:T,duplex:"half"}),Te;if(F.isFormData(T)&&(Te=ye.headers.get("content-type"))&&_.setContentType(Te),ye.body){const[De,tt]=xb(ge,kd(vb(L)));T=bb(ye.body,_b,De,tt)}}F.isString(A)||(A=A?"include":"omit");const te=i&&"credentials"in n.prototype,fe={...j,signal:P,method:v.toUpperCase(),headers:_.normalize().toJSON(),body:T,duplex:"half",credentials:te?A:void 0};k=i&&new n(E,fe);let q=await(i?I(k,j):I(E,fe));const ne=h&&(b==="stream"||b==="response");if(h&&(C||ne&&oe)){const ye={};["status","statusText","headers"].forEach(vt=>{ye[vt]=q[vt]});const Te=F.toFiniteNumber(q.headers.get("content-length")),[De,tt]=C&&xb(Te,kd(vb(C),!0))||[];q=new r(bb(q.body,_b,De,()=>{tt&&tt(),oe&&oe()}),ye)}b=b||"text";let re=await f[F.findKey(f,b)||"text"](q,y);return!ne&&oe&&oe(),await new Promise((ye,Te)=>{dI(ye,Te,{data:re,headers:mn.from(q.headers),status:q.status,statusText:q.statusText,config:y,request:k})})}catch(te){throw oe&&oe(),te&&te.name==="TypeError"&&/Load failed|fetch/i.test(te.message)?Object.assign(new pe("Network Error",pe.ERR_NETWORK,y,k),{cause:te.cause||te}):pe.from(te,te&&te.code,y,k)}}},vU=new Map,pI=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let a=i.length,l=a,c,d,h=vU;for(;l--;)c=i[l],d=h.get(c),d===void 0&&h.set(c,d=l?new Map:xU(e)),h=d;return d};pI();const Am={http:LF,xhr:hU,fetch:{get:pI}};F.forEach(Am,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Sb=t=>`- ${t}`,wU=t=>F.isFunction(t)||t===null||t===!1,mI={getAdapter:(t,e)=>{t=F.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let a=0;a<n;a++){r=t[a];let l;if(s=r,!wU(r)&&(s=Am[(l=String(r)).toLowerCase()],s===void 0))throw new pe(`Unknown adapter '${l}'`);if(s&&(F.isFunction(s)||(s=s.get(e))))break;i[l||"#"+a]=s}if(!s){const a=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=n?a.length>1?`since :
`+a.map(Sb).join(`
`):" "+Sb(a[0]):"as no adapter specified";throw new pe("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:Am};function Gf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ua(null,t)}function Ib(t){return Gf(t),t.headers=mn.from(t.headers),t.data=Wf.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),mI.getAdapter(t.adapter||vc.adapter,t)(t).then(function(r){return Gf(t),r.data=Wf.call(t,t.transformResponse,r),r.headers=mn.from(r.headers),r},function(r){return uI(r)||(Gf(t),r&&r.response&&(r.response.data=Wf.call(t,t.transformResponse,r.response),r.response.headers=mn.from(r.response.headers))),Promise.reject(r)})}const gI="1.12.2",Ph={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ph[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const kb={};Ph.transitional=function(e,n,r){function s(i,a){return"[Axios v"+gI+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,l)=>{if(e===!1)throw new pe(s(a," has been removed"+(n?" in "+n:"")),pe.ERR_DEPRECATED);return n&&!kb[a]&&(kb[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,a,l):!0}};Ph.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function bU(t,e,n){if(typeof t!="object")throw new pe("options must be an object",pe.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],a=e[i];if(a){const l=t[i],c=l===void 0||a(l,i,t);if(c!==!0)throw new pe("option "+i+" must be "+c,pe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new pe("Unknown option "+i,pe.ERR_BAD_OPTION)}}const ju={assertOptions:bU,validators:Ph},sr=ju.validators;let vi=class{constructor(e){this.defaults=e||{},this.interceptors={request:new gb,response:new gb}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Di(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&ju.assertOptions(r,{silentJSONParsing:sr.transitional(sr.boolean),forcedJSONParsing:sr.transitional(sr.boolean),clarifyTimeoutError:sr.transitional(sr.boolean)},!1),s!=null&&(F.isFunction(s)?n.paramsSerializer={serialize:s}:ju.assertOptions(s,{encode:sr.function,serialize:sr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ju.assertOptions(n,{baseUrl:sr.spelling("baseURL"),withXsrfToken:sr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&F.merge(i.common,i[n.method]);i&&F.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),n.headers=mn.concat(a,i);const l=[];let c=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(c=c&&E.synchronous,l.unshift(E.fulfilled,E.rejected))});const d=[];this.interceptors.response.forEach(function(E){d.push(E.fulfilled,E.rejected)});let h,f=0,m;if(!c){const y=[Ib.bind(this),void 0];for(y.unshift(...l),y.push(...d),m=y.length,h=Promise.resolve(n);f<m;)h=h.then(y[f++],y[f++]);return h}m=l.length;let w=n;for(;f<m;){const y=l[f++],E=l[f++];try{w=y(w)}catch(v){E.call(this,v);break}}try{h=Ib.call(this,w)}catch(y){return Promise.reject(y)}for(f=0,m=d.length;f<m;)h=h.then(d[f++],d[f++]);return h}getUri(e){e=Di(this.defaults,e);const n=hI(e.baseURL,e.url,e.allowAbsoluteUrls);return aI(n,e.params,e.paramsSerializer)}};F.forEach(["delete","get","head","options"],function(e){vi.prototype[e]=function(n,r){return this.request(Di(r||{},{method:e,url:n,data:(r||{}).data}))}});F.forEach(["post","put","patch"],function(e){function n(r){return function(i,a,l){return this.request(Di(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}vi.prototype[e]=n(),vi.prototype[e+"Form"]=n(!0)});let _U=class yI{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(l=>{r.subscribe(l),i=l}).then(s);return a.cancel=function(){r.unsubscribe(i)},a},e(function(i,a,l){r.reason||(r.reason=new ua(i,a,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new yI(function(s){e=s}),cancel:e}}};function EU(t){return function(n){return t.apply(null,n)}}function NU(t){return F.isObject(t)&&t.isAxiosError===!0}const jm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jm).forEach(([t,e])=>{jm[e]=t});function xI(t){const e=new vi(t),n=QS(vi.prototype.request,e);return F.extend(n,vi.prototype,e,{allOwnKeys:!0}),F.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return xI(Di(t,s))},n}const Ze=xI(vc);Ze.Axios=vi;Ze.CanceledError=ua;Ze.CancelToken=_U;Ze.isCancel=uI;Ze.VERSION=gI;Ze.toFormData=Rh;Ze.AxiosError=pe;Ze.Cancel=Ze.CanceledError;Ze.all=function(e){return Promise.all(e)};Ze.spread=EU;Ze.isAxiosError=NU;Ze.mergeConfig=Di;Ze.AxiosHeaders=mn;Ze.formToJSON=t=>cI(F.isHTMLForm(t)?new FormData(t):t);Ze.getAdapter=mI.getAdapter;Ze.HttpStatusCode=jm;Ze.default=Ze;const{Axios:t9,AxiosError:n9,CanceledError:r9,isCancel:s9,CancelToken:i9,VERSION:o9,all:a9,Cancel:l9,isAxiosError:c9,spread:u9,toFormData:d9,AxiosHeaders:h9,HttpStatusCode:f9,formToJSON:p9,getAdapter:m9,mergeConfig:g9}=Ze,Ad=Ze.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});Ad.interceptors.request.use(t=>{const e=Ye.getState().accessToken;return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));Ad.interceptors.response.use(t=>t,async t=>{var n;const e=t.config;if(((n=t.response)==null?void 0:n.status)===401&&!e._retry){e._retry=!0;try{const r=Ye.getState().refreshToken,s=await Ze.post("/api/auth/refresh",null,{params:{refreshToken:r}}),{accessToken:i,refreshToken:a}=s.data.data;return Ye.getState().setAuth(Ye.getState().user,i,a),e.headers.Authorization=`Bearer ${i}`,Ad(e)}catch(r){return Ye.getState().logout(),window.location.href="/login",Promise.reject(r)}}return Promise.reject(t)});function TU(){var m,w;const{user:t,updateUser:e}=Ye(),[n,r]=O.useState("profile"),[s,i]=O.useState(""),[a,l]=O.useState(""),{register:c,handleSubmit:d,formState:{errors:h}}=pc({defaultValues:t}),f=async y=>{var E,v;try{const T=await Ad.put("/users/profile",y);e(T.data.data),i("프로필이 업데이트되었습니다."),l(""),setTimeout(()=>i(""),3e3)}catch(T){l(((v=(E=T.response)==null?void 0:E.data)==null?void 0:v.message)||"업데이트에 실패했습니다.")}};return o.jsxs("div",{className:"min-h-screen bg-black py-12 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h1",{className:"text-5xl font-black text-white mb-3",children:"MY PROFILE"}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-purple-500 to-blue-500 mb-4"}),o.jsx("p",{className:"text-gray-400 text-lg",children:"계정 정보를 관리하세요"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"lg:col-span-1",children:o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-6",children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>r("profile"),className:`w-full flex items-center space-x-3 px-4 py-3 transition-all font-bold ${n==="profile"?"bg-purple-500/20 text-purple-400 border border-purple-500/30":"text-gray-400 hover:bg-white/5 hover:text-white border border-transparent"}`,children:[o.jsx(qi,{className:"w-5 h-5"}),o.jsx("span",{children:"프로필"})]}),o.jsxs("button",{onClick:()=>r("security"),className:`w-full flex items-center space-x-3 px-4 py-3 transition-all font-bold ${n==="security"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"text-gray-400 hover:bg-white/5 hover:text-white border border-transparent"}`,children:[o.jsx(Kl,{className:"w-5 h-5"}),o.jsx("span",{children:"보안"})]}),o.jsxs("button",{onClick:()=>r("notifications"),className:`w-full flex items-center space-x-3 px-4 py-3 transition-all font-bold ${n==="notifications"?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":"text-gray-400 hover:bg-white/5 hover:text-white border border-transparent"}`,children:[o.jsx(NS,{className:"w-5 h-5"}),o.jsx("span",{children:"알림 설정"})]}),o.jsxs("button",{onClick:()=>r("privacy"),className:`w-full flex items-center space-x-3 px-4 py-3 transition-all font-bold ${n==="privacy"?"bg-pink-500/20 text-pink-400 border border-pink-500/30":"text-gray-400 hover:bg-white/5 hover:text-white border border-transparent"}`,children:[o.jsx(xi,{className:"w-5 h-5"}),o.jsx("span",{children:"개인정보"})]})]})})}),o.jsx("div",{className:"lg:col-span-3",children:o.jsxs("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8",children:[s&&o.jsx("div",{className:"mb-6 p-4 bg-green-500/10 border border-green-500/50 text-green-400",children:o.jsxs("span",{className:"font-mono text-sm",children:["SUCCESS: ",s]})}),a&&o.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/50 text-red-400",children:o.jsxs("span",{className:"font-mono text-sm",children:["ERROR: ",a]})}),n==="profile"&&o.jsxs("form",{onSubmit:d(f),className:"space-y-6",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-8 tracking-wider",children:"PROFILE INFO"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"DISPLAY NAME"}),o.jsx("input",{type:"text",value:t==null?void 0:t.displayName,disabled:!0,className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-gray-500 font-mono cursor-not-allowed"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"EMAIL"}),o.jsx("input",{type:"email",value:t==null?void 0:t.email,disabled:!0,className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-gray-500 font-mono cursor-not-allowed"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"ROLE"}),o.jsx("input",{type:"text",value:(m=t==null?void 0:t.role)==null?void 0:m.toUpperCase(),disabled:!0,className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-purple-400 font-mono font-bold cursor-not-allowed"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"USER ID"}),o.jsx("input",{type:"text",value:((w=t==null?void 0:t.uid)==null?void 0:w.substring(0,8))+"...",disabled:!0,className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-gray-500 font-mono cursor-not-allowed"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"PHONE"}),o.jsx("input",{...c("phone"),type:"tel",placeholder:"010-1234-5678",className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors font-mono"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"전공"}),o.jsx("input",{...c("major"),type:"text",placeholder:"전공을 입력하세요",className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors font-mono"})]})]}),o.jsx("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold hover:shadow-lg hover:shadow-purple-500/50 transition-all",children:"저장하기"})]}),n==="security"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-8 tracking-wider",children:"SECURITY"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"현재 비밀번호"}),o.jsx("input",{type:"password",className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 transition-colors font-mono"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"새 비밀번호"}),o.jsx("input",{type:"password",className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 transition-colors font-mono"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2 tracking-wider",children:"새 비밀번호 확인"}),o.jsx("input",{type:"password",className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 transition-colors font-mono"})]}),o.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-bold hover:shadow-lg hover:shadow-blue-500/50 transition-all",children:"비밀번호 변경"})]}),n==="notifications"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-8 tracking-wider",children:"NOTIFICATIONS"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("label",{className:"flex items-center justify-between p-4 bg-black/30 border border-white/10 hover:border-cyan-500/30 transition-colors",children:[o.jsx("span",{className:"text-gray-200 font-medium",children:"이메일 알림"}),o.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-white/20 bg-black/50 text-cyan-500 focus:ring-cyan-500"})]}),o.jsxs("label",{className:"flex items-center justify-between p-4 bg-black/30 border border-white/10 hover:border-cyan-500/30 transition-colors",children:[o.jsx("span",{className:"text-gray-200 font-medium",children:"공지사항 알림"}),o.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-white/20 bg-black/50 text-cyan-500 focus:ring-cyan-500"})]}),o.jsxs("label",{className:"flex items-center justify-between p-4 bg-black/30 border border-white/10 hover:border-cyan-500/30 transition-colors",children:[o.jsx("span",{className:"text-gray-200 font-medium",children:"과제 마감 알림"}),o.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-white/20 bg-black/50 text-cyan-500 focus:ring-cyan-500"})]})]}),o.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-bold hover:shadow-lg hover:shadow-cyan-500/50 transition-all",children:"저장하기"})]}),n==="privacy"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-3xl font-black text-white mb-8 tracking-wider",children:"PRIVACY"}),o.jsx("div",{className:"p-6 bg-yellow-500/10 border border-yellow-500/30",children:o.jsx("p",{className:"text-sm text-yellow-300 font-medium",children:"⚠️ 회원 탈퇴 시 모든 데이터가 삭제되며 복구할 수 없습니다."})}),o.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white font-bold hover:shadow-lg hover:shadow-red-500/50 transition-all",children:"회원 탈퇴"})]})]})})]})]})]})}function SU(){const{user:t}=Ye(),[e,n]=O.useState({totalUsers:0,totalCourses:0,totalNotices:0,totalApplications:0,totalContacts:0}),[r,s]=O.useState([]),[i,a]=O.useState([]),[l,c]=O.useState(!0);O.useEffect(()=>{d()},[]);const d=async()=>{try{const h=ut(de,"users"),f=ut(de,"courses"),m=ut(de,"notices"),w=ut(de,"applications"),y=ut(de,"contacts"),[E,v,T,x,N]=await Promise.all([Qt(h),Qt(f),Qt(m),Qt(w),Qt(y)]),R=E.docs.map(L=>({id:L.id,...L.data()})).sort((L,b)=>{var j,I,P,k;const _=((I=(j=L.createdAt)==null?void 0:j.toMillis)==null?void 0:I.call(j))||0;return(((k=(P=b.createdAt)==null?void 0:P.toMillis)==null?void 0:k.call(P))||0)-_}),C=N.docs.map(L=>({id:L.id,...L.data()})).sort((L,b)=>{var j,I,P,k;const _=((I=(j=L.createdAt)==null?void 0:j.toMillis)==null?void 0:I.call(j))||0;return(((k=(P=b.createdAt)==null?void 0:P.toMillis)==null?void 0:k.call(P))||0)-_});s(R),a(C),n({totalUsers:R.length,totalCourses:v.size,totalNotices:T.size,totalApplications:x.size,totalContacts:C.length}),c(!1)}catch(h){console.error("Error loading data:",h),c(!1)}};return l?o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):o.jsx("div",{className:"min-h-screen bg-black py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsx("div",{className:"mb-12",children:o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center",children:o.jsx(xi,{className:"w-8 h-8 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-black text-white",children:"ADMIN PANEL"}),o.jsxs("p",{className:"text-gray-400",children:["Welcome, ",t==null?void 0:t.displayName]})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx(qr,{className:"w-8 h-8 text-purple-400"}),o.jsx("span",{className:"text-3xl font-black text-white",children:e.totalUsers})]}),o.jsx("h3",{className:"text-gray-400 font-medium",children:"Total Users"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx(kt,{className:"w-8 h-8 text-blue-400"}),o.jsx("span",{className:"text-3xl font-black text-white",children:e.totalCourses})]}),o.jsx("h3",{className:"text-gray-400 font-medium",children:"Total Courses"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx(Us,{className:"w-8 h-8 text-cyan-400"}),o.jsx("span",{className:"text-3xl font-black text-white",children:e.totalNotices})]}),o.jsx("h3",{className:"text-gray-400 font-medium",children:"Total Notices"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx(wV,{className:"w-8 h-8 text-green-400"}),o.jsx("span",{className:"text-3xl font-black text-white",children:e.totalApplications})]}),o.jsx("h3",{className:"text-gray-400 font-medium",children:"Applications"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx(Bs,{className:"w-8 h-8 text-yellow-400"}),o.jsx("span",{className:"text-3xl font-black text-white",children:e.totalContacts})]}),o.jsx("h3",{className:"text-gray-400 font-medium",children:"Contact Messages"})]})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 p-6 mb-12",children:[o.jsx("h2",{className:"text-2xl font-black text-white mb-6",children:"CONTACT MESSAGES"}),o.jsx("div",{className:"space-y-4",children:i.length===0?o.jsx("p",{className:"text-gray-400 text-center py-8",children:"문의 내역이 없습니다."}):i.slice(0,5).map(h=>{var f,m;return o.jsxs("div",{className:"bg-black/40 border border-white/10 p-5 hover:border-purple-500/50 transition-all",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[o.jsx(Bs,{className:"w-5 h-5 text-purple-400 mt-1 flex-shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("p",{className:"text-white font-bold",children:h.name}),o.jsx("span",{className:"px-2 py-0.5 text-xs font-bold bg-purple-500/20 text-purple-400 border border-purple-500/30",children:((f=h.category)==null?void 0:f.toUpperCase())||"GENERAL"})]}),o.jsx("p",{className:"text-gray-400 text-sm font-mono",children:h.email}),h.subject&&o.jsx("p",{className:"text-white text-sm font-semibold mt-2",children:h.subject})]})]}),o.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap ml-4",children:(m=h.createdAt)==null?void 0:m.toDate().toLocaleDateString()})]}),o.jsx("p",{className:"text-gray-300 text-sm ml-8 line-clamp-2",children:h.message})]},h.id)})})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 p-6",children:[o.jsx("h2",{className:"text-2xl font-black text-white mb-6",children:"USER MANAGEMENT"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-white/10",children:[o.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-bold",children:"NAME"}),o.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-bold",children:"EMAIL"}),o.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-bold",children:"ROLE"}),o.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-bold",children:"JOINED"}),o.jsx("th",{className:"text-left py-3 px-4 text-gray-400 font-bold",children:"ACTIONS"})]})}),o.jsx("tbody",{children:r.map(h=>{var f,m;return o.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[o.jsx("td",{className:"py-3 px-4 text-white font-medium",children:h.displayName}),o.jsx("td",{className:"py-3 px-4 text-gray-400 font-mono text-sm",children:h.email}),o.jsx("td",{className:"py-3 px-4",children:o.jsx("span",{className:`px-3 py-1 text-xs font-bold border ${h.role==="admin"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-blue-500/20 text-blue-400 border-blue-500/30"}`,children:(f=h.role)==null?void 0:f.toUpperCase()})}),o.jsx("td",{className:"py-3 px-4 text-gray-400 text-sm",children:(m=h.createdAt)==null?void 0:m.toDate().toLocaleDateString()}),o.jsx("td",{className:"py-3 px-4",children:o.jsx("button",{className:"text-purple-400 hover:text-purple-300 text-sm font-medium",children:"View"})})]},h.id)})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-12",children:[o.jsxs(Y,{to:"/admin/courses",className:"bg-white/5 backdrop-blur-xl border border-white/10 p-6 hover:border-purple-500/50 transition-all group block",children:[o.jsx(kt,{className:"w-12 h-12 text-purple-400 mb-4 group-hover:scale-110 transition-transform"}),o.jsx("h3",{className:"text-xl font-black text-white mb-2",children:"Manage Courses"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Create and edit courses"})]}),o.jsxs(Y,{to:"/admin/notices",className:"bg-white/5 backdrop-blur-xl border border-white/10 p-6 hover:border-blue-500/50 transition-all group block",children:[o.jsx(Us,{className:"w-12 h-12 text-blue-400 mb-4 group-hover:scale-110 transition-transform"}),o.jsx("h3",{className:"text-xl font-black text-white mb-2",children:"Manage Notices"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Post announcements"})]}),o.jsxs(Y,{to:"/admin/applications",className:"bg-white/5 backdrop-blur-xl border border-white/10 p-6 hover:border-cyan-500/50 transition-all group block",children:[o.jsx(VV,{className:"w-12 h-12 text-cyan-400 mb-4 group-hover:scale-110 transition-transform"}),o.jsx("h3",{className:"text-xl font-black text-white mb-2",children:"Manage Applications"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Review student applications"})]})]})]})})}function IU(){const[t,e]=O.useState([]),[n,r]=O.useState(!0),[s,i]=O.useState(!1),[a,l]=O.useState(null),[c,d]=O.useState({title:"",description:"",category:"",level:"beginner",duration:"",instructor:"",instructorId:"",thumbnail:"",price:0,maxStudents:30,applicationDeadline:""});O.useEffect(()=>{h()},[]);const h=async()=>{const y=await Q0();e(y),r(!1)},f=async y=>{y.preventDefault(),a?await TM(a.id,c):await NM(c),i(!1),l(null),d({title:"",description:"",category:"",level:"beginner",duration:"",instructor:"",instructorId:"",thumbnail:"",price:0,maxStudents:30,applicationDeadline:""}),h()},m=y=>{var v;l(y);const E=(v=y.applicationDeadline)!=null&&v.toDate?y.applicationDeadline.toDate():y.applicationDeadline?new Date(y.applicationDeadline):null;d({title:y.title||"",description:y.description||"",category:y.category||"",level:y.level||"beginner",duration:y.duration||"",instructor:y.instructor||"",instructorId:y.instructorId||"",thumbnail:y.thumbnail||"",price:y.price||0,maxStudents:y.maxStudents??y.capacity??30,applicationDeadline:E?E.toISOString().slice(0,16):""}),i(!0)},w=async y=>{confirm("정말 이 강의를 삭제하시겠습니까?")&&(await SM(y),h())};return o.jsxs("div",{className:"min-h-screen bg-black py-12 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"mb-12 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx(Y,{to:"/admin",className:"text-gray-400 hover:text-white mb-2 inline-block",children:"← Back to Admin"}),o.jsx("h1",{className:"text-5xl font-black text-white mb-3",children:"MANAGE COURSES"}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-blue-500 to-cyan-500 mb-4"}),o.jsx(Y,{to:"/admin/course-manager",className:"inline-flex items-center gap-2 text-sm text-blue-300 hover:text-white",children:"고급 커리큘럼 편집기로 이동 →"})]}),o.jsxs("button",{onClick:()=>{l(null),d({title:"",description:"",category:"",level:"beginner",duration:"",instructor:"",instructorId:"",thumbnail:"",price:0,maxStudents:30,applicationDeadline:"",briefingContent:"",curriculumContent:""}),i(!0)},className:"px-8 py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-bold hover:shadow-lg hover:shadow-blue-500/50 transition-all flex items-center gap-2",children:[o.jsx(Ih,{className:"w-5 h-5"}),"새 강의 추가"]})]}),n?o.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading..."}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(y=>o.jsxs("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-6 hover:border-blue-500/50 transition-all",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsx(kt,{className:"w-8 h-8 text-blue-400"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>m(y),className:"p-2 bg-white/5 border border-white/10 text-blue-400 hover:bg-white/10 transition-all",children:o.jsx(Sh,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>w(y.id),className:"p-2 bg-white/5 border border-white/10 text-red-400 hover:bg-white/10 transition-all",children:o.jsx(B0,{className:"w-4 h-4"})})]})]}),o.jsx("h3",{className:"text-xl font-black text-white mb-2",children:y.title}),o.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:y.description}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:"text-gray-500",children:["등록: ",y.enrollmentCount||0," / ",y.maxStudents||"∞","명"]}),o.jsx("span",{className:`px-3 py-1 text-xs font-bold ${y.isActive?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-gray-500/20 text-gray-400 border border-gray-500/30"}`,children:y.isActive?"ACTIVE":"INACTIVE"})]}),y.applicationDeadline&&o.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:["신청 마감: ",y.applicationDeadline.toDate?y.applicationDeadline.toDate().toLocaleString():new Date(y.applicationDeadline).toLocaleString()]})]},y.id))}),s&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-black border border-white/10 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-3xl font-black text-white",children:a?"EDIT COURSE":"NEW COURSE"}),o.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-white",children:o.jsx($0,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"TITLE"}),o.jsx("input",{type:"text",required:!0,value:c.title,onChange:y=>d({...c,title:y.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-colors"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"DESCRIPTION"}),o.jsx("textarea",{required:!0,rows:4,value:c.description,onChange:y=>d({...c,description:y.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-colors"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"CATEGORY"}),o.jsx("input",{type:"text",required:!0,value:c.category,onChange:y=>d({...c,category:y.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-colors"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"LEVEL"}),o.jsxs("select",{value:c.level,onChange:y=>d({...c,level:y.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-colors",children:[o.jsx("option",{value:"beginner",children:"Beginner"}),o.jsx("option",{value:"intermediate",children:"Intermediate"}),o.jsx("option",{value:"advanced",children:"Advanced"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"DURATION"}),o.jsx("input",{type:"text",placeholder:"e.g., 8 weeks",value:c.duration,onChange:y=>d({...c,duration:y.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-colors"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"INSTRUCTOR"}),o.jsx("input",{type:"text",value:c.instructor,onChange:y=>d({...c,instructor:y.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-colors"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"INSTRUCTOR UID"}),o.jsx("input",{type:"text",value:c.instructorId,onChange:y=>d({...c,instructorId:y.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-colors"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"MAX STUDENTS"}),o.jsx("input",{type:"number",min:"1",value:c.maxStudents,onChange:y=>d({...c,maxStudents:y.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-colors"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"APPLICATION DEADLINE"}),o.jsx("input",{type:"datetime-local",value:c.applicationDeadline,onChange:y=>d({...c,applicationDeadline:y.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-colors"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"INSTRUCTOR UID"}),o.jsx("input",{type:"text",value:c.instructorId,onChange:y=>d({...c,instructorId:y.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-colors"})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-6 py-3 bg-white/5 border border-white/20 text-white font-bold hover:bg-white/10 transition-all",children:"취소"}),o.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-bold hover:shadow-lg hover:shadow-blue-500/50 transition-all",children:a?"수정":"생성"})]})]})]})})})]})]})}var vI={exports:{}};(()=>{var t={d:(i,a)=>{for(var l in a)t.o(a,l)&&!t.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:a[l]})},o:(i,a)=>Object.prototype.hasOwnProperty.call(i,a),r:i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})}},e={};function n(i,a){for(var l=0;l<a.length;l++){var c=a[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}t.r(e),t.d(e,{default:()=>s});var r=function(){function i(){(function(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")})(this,i)}var a,l;return a=i,l=[{key:"changeHeightWidth",value:function(c,d,h,f,m,w){return h>f&&(c=Math.round(c*f/h),h=f),c>d&&(h=Math.round(h*d/c),c=d),m&&h<m&&(c=Math.round(c*m/h),h=m),w&&c<w&&(h=Math.round(h*w/c),c=w),{height:c,width:h}}},{key:"resizeAndRotateImage",value:function(c,d,h,f,m){var w=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"jpeg",y=arguments.length>6&&arguments[6]!==void 0?arguments[6]:100,E=arguments.length>7&&arguments[7]!==void 0?arguments[7]:0,v=y/100,T=document.createElement("canvas"),x=c.width,N=c.height,R=this.changeHeightWidth(N,h,x,d,f,m);!E||E!==90&&E!==270?(T.width=R.width,T.height=R.height):(T.width=R.height,T.height=R.width),x=R.width,N=R.height;var C=T.getContext("2d");return C.fillStyle="rgba(0, 0, 0, 0)",C.fillRect(0,0,x,N),C.imageSmoothingEnabled&&C.imageSmoothingQuality&&(C.imageSmoothingQuality="high"),E&&(C.rotate(E*Math.PI/180),E===90?C.translate(0,-T.width):E===180?C.translate(-T.width,-T.height):E===270?C.translate(-T.height,0):E!==0&&E!==360||C.translate(0,0)),C.drawImage(c,0,0,x,N),T.toDataURL("image/".concat(w),v)}},{key:"b64toByteArrays",value:function(c,d){for(var h=atob(c.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),f=[],m=0;m<h.length;m+=512){for(var w=h.slice(m,m+512),y=new Array(w.length),E=0;E<w.length;E++)y[E]=w.charCodeAt(E);var v=new Uint8Array(y);f.push(v)}return f}},{key:"b64toBlob",value:function(c,d){var h=this.b64toByteArrays(c,d);return new Blob(h,{type:d,lastModified:new Date})}},{key:"b64toFile",value:function(c,d,h){var f=this.b64toByteArrays(c,h);return new File(f,d,{type:h,lastModified:new Date})}},{key:"createResizedImage",value:function(c,d,h,f,m,w,y){var E=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"base64",v=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,T=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,x=new FileReader;if(!c)throw Error("File Not Found!");if(c.type&&!c.type.includes("image"))throw Error("File Is NOT Image!");x.readAsDataURL(c),x.onload=function(){var N=new Image;N.src=x.result,N.onload=function(){var R=i.resizeAndRotateImage(N,d,h,v,T,f,m,w),C="image/".concat(f);switch(E){case"blob":var L=i.b64toBlob(R,C);y(L);break;case"base64":y(R);break;case"file":var b=c.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(f.toString()),_=i.b64toFile(R,b,C);y(_);break;default:y(R)}}},x.onerror=function(N){throw Error(N)}}}],l&&n(a,l),i}();const s={imageFileResizer:function(i,a,l,c,d,h,f,m,w,y){return r.createResizedImage(i,a,l,c,d,h,f,m,w,y)}};vI.exports=e})();var kU=vI.exports;const wI=Dm(kU);function AU(){const{user:t}=Ye(),[e,n]=O.useState([]),[r,s]=O.useState(!0),[i,a]=O.useState(!1),[l,c]=O.useState(null),[d,h]=O.useState({title:"",content:"",category:"general",isPinned:!1}),[f,m]=O.useState(!1),[w,y]=O.useState("800"),E=(b,_)=>new Promise(A=>{wI.imageFileResizer(b,_,_*2,"JPEG",90,0,j=>A(j),"blob")}),v=async b=>{var A;const _=(A=b.target.files)==null?void 0:A[0];if(_){if(!_.type.startsWith("image/")){alert("이미지 파일만 업로드 가능합니다.");return}m(!0);try{const j=parseInt(w),I=await E(_,j),k=`notices/${Date.now()}_${_.name}`,oe=vS(ES,k);await yS(oe,I);const ge=await xS(oe),te=document.querySelector('textarea[name="content"]');if(te){const fe=te.selectionStart,q=te.selectionEnd,ne=d.content.substring(0,fe),re=d.content.substring(q);h({...d,content:ne+`![${_.name}](${ge})`+re})}}catch(j){console.error("Image upload error:",j),alert("이미지 업로드 중 오류가 발생했습니다: "+j.message)}finally{m(!1),b.target.value=""}}},T=()=>{const b=prompt("링크 URL을 입력하세요:");if(!b)return;const _=prompt("링크 텍스트를 입력하세요:",b),A=document.querySelector('textarea[name="content"]');if(A){const j=A.selectionStart,I=A.selectionEnd,P=d.content.substring(0,j),k=d.content.substring(I);h({...d,content:P+`[${_||b}](${b})`+k})}};O.useEffect(()=>{x()},[]);const x=async()=>{const b=await KS(100);n(b),s(!1)},N=async b=>{b.preventDefault();const _={...d,author:(t==null?void 0:t.displayName)||(t==null?void 0:t.email),authorId:t==null?void 0:t.uid};l?await HM(l.id,_):await qM(_),a(!1),c(null),h({title:"",content:"",category:"general",isPinned:!1}),x()},R=b=>{c(b),h({title:b.title||"",content:b.content||"",category:b.category||"general",isPinned:b.isPinned||!1}),a(!0)},C=async b=>{confirm("정말 이 공지사항을 삭제하시겠습니까?")&&(await WM(b),x())},L=b=>b?(b.toDate?b.toDate():new Date(b)).toLocaleDateString("ko-KR"):"-";return o.jsxs("div",{className:"min-h-screen bg-black py-12 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"mb-12 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Y,{to:"/admin",className:"text-gray-400 hover:text-white mb-2 inline-block",children:"← Back to Admin"}),o.jsx("h1",{className:"text-5xl font-black text-white mb-3",children:"MANAGE NOTICES"}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-purple-500 to-pink-500 mb-4"})]}),o.jsxs("button",{onClick:()=>{c(null),h({title:"",content:"",category:"general",isPinned:!1}),a(!0)},className:"px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold hover:shadow-lg hover:shadow-purple-500/50 transition-all flex items-center gap-2",children:[o.jsx(Ih,{className:"w-5 h-5"}),"새 공지 작성"]})]}),r?o.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading..."}):o.jsx("div",{className:"space-y-4",children:e.map(b=>{var _;return o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-6 hover:border-purple-500/50 transition-all",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.isPinned&&o.jsx("span",{className:"px-3 py-1 bg-yellow-500/20 text-yellow-400 text-xs font-bold border border-yellow-500/30",children:"PINNED"}),o.jsx("span",{className:"px-3 py-1 bg-purple-500/20 text-purple-400 text-xs font-bold border border-purple-500/30",children:(_=b.category)==null?void 0:_.toUpperCase()})]}),o.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:b.title}),o.jsx("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:b.content}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[o.jsxs("span",{children:["작성자: ",b.author]}),o.jsx("span",{children:"•"}),o.jsxs("span",{children:["작성일: ",L(b.createdAt)]}),o.jsx("span",{children:"•"}),o.jsxs("span",{children:["조회수: ",b.views||0]})]})]}),o.jsxs("div",{className:"flex gap-2 ml-4",children:[o.jsx("button",{onClick:()=>R(b),className:"p-2 bg-white/5 border border-white/10 text-purple-400 hover:bg-white/10 transition-all",children:o.jsx(Sh,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>C(b.id),className:"p-2 bg-white/5 border border-white/10 text-red-400 hover:bg-white/10 transition-all",children:o.jsx(B0,{className:"w-4 h-4"})})]})]})},b.id)})}),i&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-black border border-white/10 max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-3xl font-black text-white",children:l?"EDIT NOTICE":"NEW NOTICE"}),o.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-white",children:o.jsx($0,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:N,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"TITLE"}),o.jsx("input",{type:"text",required:!0,value:d.title,onChange:b=>h({...d,title:b.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-purple-500 transition-colors"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"CONTENT"}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-black/40 border border-white/10 mb-2",children:[o.jsxs("select",{value:w,onChange:b=>y(b.target.value),className:"px-2 py-1 text-xs bg-black/60 border border-white/10 text-gray-300",children:[o.jsx("option",{value:"400",children:"작게"}),o.jsx("option",{value:"600",children:"중간"}),o.jsx("option",{value:"800",children:"크게"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs border border-white/10 text-gray-300 hover:bg-white/5 cursor-pointer",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden",disabled:f}),f?"업로드 중...":"이미지"]}),o.jsx("button",{type:"button",onClick:T,className:"px-2 py-1 text-xs border border-white/10 text-gray-300 hover:bg-white/5",children:"링크"})]}),o.jsx("textarea",{name:"content",required:!0,rows:10,value:d.content,onChange:b=>h({...d,content:b.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-purple-500 transition-colors font-mono text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"CATEGORY"}),o.jsxs("select",{value:d.category,onChange:b=>h({...d,category:b.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-purple-500 transition-colors",children:[o.jsx("option",{value:"general",children:"일반"}),o.jsx("option",{value:"event",children:"이벤트"}),o.jsx("option",{value:"update",children:"업데이트"}),o.jsx("option",{value:"important",children:"중요"})]})]}),o.jsx("div",{className:"flex items-center",children:o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:d.isPinned,onChange:b=>h({...d,isPinned:b.target.checked}),className:"w-5 h-5"}),o.jsx("span",{className:"text-sm font-bold text-gray-300",children:"PIN TO TOP"})]})})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-6 py-3 bg-white/5 border border-white/20 text-white font-bold hover:bg-white/10 transition-all",children:"취소"}),o.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold hover:shadow-lg hover:shadow-purple-500/50 transition-all",children:l?"수정":"작성"})]})]})]})})})]})]})}const Cm={SUBMITTED:{label:"서류 심사 중",badge:"bg-blue-500/20 text-blue-400 border-blue-500/40",icon:la},DOCUMENT_PASS:{label:"서류 합격",badge:"bg-green-500/20 text-green-400 border-green-500/40",icon:Ln},DOCUMENT_FAIL:{label:"서류 불합격",badge:"bg-red-500/20 text-red-400 border-red-500/40",icon:Go},INTERVIEW_SCHEDULED:{label:"면접 예정",badge:"bg-yellow-500/20 text-yellow-400 border-yellow-500/40",icon:zi},FINAL_PASS:{label:"최종 합격",badge:"bg-emerald-500/20 text-emerald-400 border-emerald-500/40",icon:Ln},FINAL_FAIL:{label:"최종 불합격",badge:"bg-rose-500/20 text-rose-400 border-rose-500/40",icon:Go},ENROLLED:{label:"등록 완료",badge:"bg-emerald-500/25 text-emerald-300 border-emerald-500/40",icon:Ln}},bI=Object.entries(Cm).map(([t,e])=>({value:t,label:e.label})),jU=[{value:"ALL",label:"전체"},...bI];function CU(){const t=gn(),[e,n]=O.useState([]),[r,s]=O.useState(!0),[i,a]=O.useState({}),[l,c]=O.useState("ALL"),[d,h]=O.useState(""),[f,m]=O.useState(null),[w,y]=O.useState(null);O.useEffect(()=>{E()},[]);const E=async()=>{try{s(!0);const C=await AM();n(C);const L=C.reduce((b,_)=>(b[_.id]={status:_.status||"SUBMITTED",note:_.statusNote||""},b),{});a(L)}catch(C){console.error("Failed to load applications:",C)}finally{s(!1)}},v=async C=>{try{y(C),await CM(C),await E()}catch(L){console.error("Failed to confirm enrollment:",L)}finally{y(null)}},T=O.useMemo(()=>e.filter(C=>{var b,_,A,j,I,P,k;if(l!=="ALL"&&C.status!==l)return!1;if(!d)return!0;const L=d.toLowerCase();return((b=C.applicationNumber)==null?void 0:b.toLowerCase().includes(L))||((A=(_=C.user)==null?void 0:_.displayName)==null?void 0:A.toLowerCase().includes(L))||((I=(j=C.user)==null?void 0:j.email)==null?void 0:I.toLowerCase().includes(L))||((k=(P=C.course)==null?void 0:P.title)==null?void 0:k.toLowerCase().includes(L))}),[e,l,d]),x=(C,L,b)=>{a(_=>({..._,[C]:{..._[C],[L]:b}}))},N=async C=>{const L=async(_,A,j)=>{m(_);try{const I=await zS(_,A,j);if(!I.success)throw new Error(I.error||"상태 업데이트에 실패했습니다.");if(A==="FINAL_PASS"){const P=e.find(k=>k.id===_);if(P){const k=await IM({userId:P.userId,courseId:P.courseId});k.success||console.warn("Enrollment update failed:",k.error)}}a(P=>({...P,[_]:{status:A,note:j}})),E()}catch(I){console.error("Failed to update status:",I)}finally{m(null)}},b=i[C];b&&L(C,b.status,b.note)},R=C=>C?(C.toDate?C.toDate():new Date(C)).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return o.jsxs("div",{className:"min-h-screen bg-black py-12 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsx("div",{className:"mb-12 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-5xl font-black text-white mb-3",children:"MANAGE APPLICATIONS"}),o.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-purple-500 to-blue-500 mb-4"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"지원서를 검토하고 합격 상태를 업데이트하세요."})]})}),o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-6 mb-10",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[o.jsx(qr,{className:"w-4 h-4"}),o.jsxs("span",{children:["총 지원서 ",e.length,"건"]})]}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(kS,{className:"w-4 h-4 text-purple-400 absolute left-3 top-1/2 -translate-y-1/2"}),o.jsx("select",{value:l,onChange:C=>c(C.target.value),className:"pl-9 pr-4 py-2 bg-white/5 border border-white/10 text-sm text-gray-300 focus:outline-none focus:border-purple-500",children:jU.map(C=>o.jsx("option",{value:C.value,children:C.label},C.value))})]}),o.jsxs("div",{className:"relative",children:[o.jsx(LV,{className:"w-4 h-4 text-purple-400 absolute left-3 top-1/2 -translate-y-1/2"}),o.jsx("input",{type:"text",value:d,onChange:C=>h(C.target.value),placeholder:"지원번호 / 이름 / 이메일 / 강의명 검색",className:"pl-9 pr-4 py-2 bg-white/5 border border-white/10 text-sm text-gray-300 focus:outline-none focus:border-purple-500 min-w-[240px]"})]})]})]})}),r?o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-16 flex items-center justify-center",children:o.jsx($t,{className:"w-10 h-10 text-purple-400 animate-spin"})}):T.length===0?o.jsxs("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-16 text-center",children:[o.jsx(Us,{className:"w-16 h-16 text-purple-400 mx-auto mb-6"}),o.jsx("p",{className:"text-gray-400",children:"조건에 맞는 지원서가 없습니다."})]}):o.jsx("div",{className:"space-y-6",children:T.map(C=>{var A,j,I,P;const L=Cm[C.status]||Cm.SUBMITTED,b=L.icon,_=i[C.id]||{status:C.status,note:C.statusNote||""};return o.jsx("div",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8",children:o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6",children:[o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsx("span",{className:"px-4 py-2 text-xs font-bold tracking-wider border border-white/10 text-gray-400",children:C.applicationNumber}),o.jsxs("span",{className:`px-4 py-2 text-xs font-bold flex items-center gap-2 ${L.badge}`,children:[o.jsx(b,{className:"w-4 h-4"}),L.label]}),o.jsx("span",{className:"px-4 py-2 text-xs font-bold text-purple-300 bg-purple-500/10 border border-purple-500/30",children:((A=C.course)==null?void 0:A.title)||"Unknown Course"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-400",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"지원자"}),o.jsx("p",{className:"text-white font-semibold",children:((j=C.user)==null?void 0:j.displayName)||C.userName||"N/A"}),o.jsx("p",{className:"font-mono text-xs text-purple-300",children:((I=C.user)==null?void 0:I.email)||C.userEmail})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"지원일"}),o.jsx("p",{children:R(C.createdAt)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"최근 업데이트"}),o.jsx("p",{children:R(C.updatedAt)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"신청 마감"}),o.jsx("p",{children:(P=C.course)!=null&&P.applicationDeadline?R(C.course.applicationDeadline):"상시 모집"})]})]}),C.statusNote&&o.jsxs("div",{className:"p-4 bg-white/5 border border-white/10 text-sm text-gray-300",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"관리자 메모"}),o.jsx("p",{className:"leading-relaxed",children:C.statusNote})]})]}),o.jsxs("div",{className:"w-full max-w-xs border border-white/10 p-4 bg-black/30",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 tracking-[0.2em] mb-2",children:"상태 업데이트"}),o.jsx("select",{value:_.status,onChange:k=>x(C.id,"status",k.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 text-sm text-gray-200 focus:outline-none focus:border-purple-500",children:bI.map(k=>o.jsx("option",{value:k.value,children:k.label},k.value))}),o.jsx("label",{className:"block text-xs font-bold text-gray-400 tracking-[0.2em] mt-4 mb-2",children:"관리자 메모"}),o.jsx("textarea",{value:_.note,onChange:k=>x(C.id,"note",k.target.value),rows:3,className:"w-full px-3 py-2 bg-white/5 border border-white/10 text-sm text-gray-200 focus:outline-none focus:border-purple-500 resize-none",placeholder:"지원자에게 전달할 메모를 작성하세요"}),o.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[C.status==="FINAL_PASS"&&o.jsxs("button",{onClick:()=>v(C.id),disabled:w===C.id,className:"w-full inline-flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white text-sm font-bold tracking-wide hover:shadow-lg hover:shadow-emerald-500/40 transition-all disabled:opacity-50",children:[w===C.id?o.jsx($t,{className:"w-4 h-4 animate-spin"}):null,w===C.id?"등록 처리 중...":"등록 확정"]}),C.status==="ENROLLED"&&o.jsx("div",{className:"w-full px-4 py-2 text-center text-xs font-bold text-emerald-300 bg-emerald-500/10 border border-emerald-500/30",children:"등록이 완료된 지원서입니다."}),o.jsxs("button",{onClick:()=>N(C.id),disabled:f===C.id,className:"w-full inline-flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-blue-500 text-white text-sm font-bold tracking-wide hover:shadow-lg hover:shadow-purple-500/40 transition-all disabled:opacity-50",children:[f===C.id?o.jsx($t,{className:"w-4 h-4 animate-spin"}):null,f===C.id?"업데이트 중...":"상태 저장"]}),o.jsx("button",{onClick:()=>t(`/admin/applications/${C.id}`),className:"w-full px-4 py-2 bg-white/5 border border-white/10 text-white text-sm font-bold tracking-wide hover:bg-white/10 transition-all",children:"상세 보기"})]})]})]})},C.id)})})]})]})}const Rm={SUBMITTED:{label:"서류 심사 중",badge:"bg-blue-500/20 text-blue-400 border-blue-500/40",icon:la},DOCUMENT_PASS:{label:"서류 합격",badge:"bg-green-500/20 text-green-400 border-green-500/40",icon:Ln},DOCUMENT_FAIL:{label:"서류 불합격",badge:"bg-red-500/20 text-red-400 border-red-500/40",icon:Go},INTERVIEW_SCHEDULED:{label:"면접 예정",badge:"bg-yellow-500/20 text-yellow-400 border-yellow-500/40",icon:zi},FINAL_PASS:{label:"최종 합격",badge:"bg-emerald-500/20 text-emerald-400 border-emerald-500/40",icon:Ln},FINAL_FAIL:{label:"최종 불합격",badge:"bg-rose-500/20 text-rose-400 border-rose-500/40",icon:Go}},RU=Object.entries(Rm).map(([t,e])=>({value:t,label:e.label})),PU=[{key:"motivation",label:"지원 동기"},{key:"studyPlan",label:"학습 계획"},{key:"careerGoal",label:"진로 목표"},{key:"technicalSkills",label:"보유 기술"},{key:"certifications",label:"보유 자격증"},{key:"projects",label:"프로젝트 경험"}];function DU(){var N,R,C,L,b,_,A,j;const{applicationId:t}=Hs(),e=gn(),[n,r]=O.useState(null),[s,i]=O.useState(!0),[a,l]=O.useState(""),[c,d]=O.useState("SUBMITTED"),[h,f]=O.useState(""),[m,w]=O.useState(!1);O.useEffect(()=>{y()},[t]);const y=async()=>{if(t)try{i(!0);const I=await qS(t);if(!I){l("신청서를 찾을 수 없습니다."),r(null);return}r(I),d(I.status||"SUBMITTED"),f(I.statusNote||"")}catch(I){console.error("Failed to load application detail:",I),l("신청서를 불러오는 중 문제가 발생했습니다.")}finally{i(!1)}},E=async()=>{if(t)try{w(!0),await zS(t,c,h),await y()}catch(I){console.error("Failed to update application status:",I)}finally{w(!1)}},v=I=>I?(I.toDate?I.toDate():new Date(I)).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",T=O.useMemo(()=>Rm[n==null?void 0:n.status]||Rm.SUBMITTED,[n]);if(s)return o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsx($t,{className:"w-10 h-10 text-purple-400 animate-spin"})});if(!n)return o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsxs("div",{className:"text-center px-6",children:[o.jsx("p",{className:"text-2xl font-black text-white mb-3",children:"APPLICATION NOT FOUND"}),o.jsx("p",{className:"text-gray-500 mb-6",children:a||"요청한 신청서를 찾을 수 없습니다."}),o.jsx("button",{onClick:()=>e("/admin/applications"),className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold hover:shadow-lg hover:shadow-purple-500/40 transition-all",children:"목록으로 돌아가기"})]})});const x=T.icon;return o.jsxs("div",{className:"min-h-screen bg-black py-16 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6 mb-12",children:[o.jsxs("button",{onClick:()=>e("/admin/applications"),className:"inline-flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[o.jsx(Pi,{className:"w-4 h-4"}),"목록으로"]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xs text-gray-500 tracking-[0.3em] mb-2",children:"APPLICATION"}),o.jsx("h1",{className:"text-3xl md:text-4xl font-black text-white mb-3",children:n.applicationNumber}),o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 text-xs font-bold {statusMeta.badge}",children:[o.jsx(x,{className:"w-4 h-4"}),T.label]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[o.jsxs("section",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-6 text-sm text-gray-400",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qi,{className:"w-4 h-4 text-purple-300"}),o.jsx("span",{className:"text-white font-semibold",children:((N=n.user)==null?void 0:N.displayName)||n.userName||"N/A"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Bs,{className:"w-4 h-4 text-purple-300"}),o.jsx("span",{className:"font-mono",children:((R=n.user)==null?void 0:R.email)||n.userEmail})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(M0,{className:"w-4 h-4 text-purple-300"}),o.jsxs("span",{children:["지원일 ",v(n.createdAt)]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-400",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"신청 상태"}),o.jsx("p",{className:"text-white font-semibold",children:T.label})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"최근 업데이트"}),o.jsx("p",{children:v(n.updatedAt)})]})]})]}),o.jsxs("section",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8",children:[o.jsx("h2",{className:"text-sm font-bold tracking-[0.3em] text-gray-500 mb-4",children:"COURSE INFORMATION"}),o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-white text-xl font-black",children:[o.jsx(kt,{className:"w-5 h-5 text-purple-300"}),((C=n.course)==null?void 0:C.title)||"Unknown Course"]}),o.jsx("p",{className:"text-gray-400 text-sm leading-relaxed max-w-2xl",children:((L=n.course)==null?void 0:L.description)||"강의 설명이 등록되지 않았습니다."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-400",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"카테고리"}),o.jsx("p",{className:"text-white font-semibold",children:((b=n.course)==null?void 0:b.category)||"-"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"난이도"}),o.jsx("p",{className:"text-white font-semibold",children:((_=n.course)==null?void 0:_.level)||"-"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"강사"}),o.jsx("p",{className:"text-white font-semibold",children:((A=n.course)==null?void 0:A.instructor)||"TBA"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"지원 마감"}),o.jsx("p",{className:"text-white font-semibold",children:(j=n.course)!=null&&j.applicationDeadline?v(n.course.applicationDeadline):"상시 모집"})]})]})]})]}),o.jsxs("section",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8 space-y-6",children:[o.jsx("h2",{className:"text-sm font-bold tracking-[0.3em] text-gray-500",children:"APPLICATION RESPONSES"}),PU.map(({key:I,label:P})=>{const k=n[I];return k?o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-300 mb-2",children:[o.jsx(U0,{className:"w-4 h-4"}),o.jsx("span",{className:"tracking-[0.2em]",children:P})]}),o.jsx("div",{className:"bg-white/5 border border-white/10 p-4 text-sm text-gray-200 leading-relaxed whitespace-pre-line",children:k})]},I):null})]}),n.statusNote&&o.jsxs("section",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8",children:[o.jsx("h2",{className:"text-sm font-bold tracking-[0.3em] text-gray-500 mb-3",children:"MANAGER NOTE"}),o.jsx("p",{className:"text-sm text-gray-200 leading-relaxed bg-white/5 border border-white/10 p-4",children:n.statusNote})]})]}),o.jsxs("aside",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8 space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-bold tracking-[0.3em] text-gray-500 mb-3",children:"STATUS CONTROL"}),o.jsx("select",{value:c,onChange:I=>d(I.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 text-sm text-gray-200 focus:outline-none focus:border-purple-500",children:RU.map(I=>o.jsx("option",{value:I.value,children:I.label},I.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"관리자 메모"}),o.jsx("textarea",{value:h,onChange:I=>f(I.target.value),rows:5,className:"w-full px-4 py-3 bg-white/5 border border-white/10 text-sm text-gray-200 focus:outline-none focus:border-purple-500",placeholder:"지원자에게 전달할 내용을 입력하세요"})]}),o.jsxs("button",{onClick:E,disabled:m,className:"w-full inline-flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold tracking-wide hover:shadow-lg hover:shadow-purple-500/40 transition-all disabled:opacity-50",children:[m?o.jsx($t,{className:"w-4 h-4 animate-spin"}):null,m?"저장 중...":"상태 업데이트"]})]})]})]})]})}const Ab={SUBMITTED:{label:"서류 심사 중",badge:"bg-blue-500/20 text-blue-400 border-blue-500/40"},DOCUMENT_PASS:{label:"서류 합격",badge:"bg-green-500/20 text-green-400 border-green-500/40"},DOCUMENT_FAIL:{label:"서류 불합격",badge:"bg-red-500/20 text-red-400 border-red-500/40"},INTERVIEW_SCHEDULED:{label:"면접 예정",badge:"bg-yellow-500/20 text-yellow-400 border-yellow-500/40"},FINAL_PASS:{label:"최종 합격",badge:"bg-emerald-500/20 text-emerald-400 border-emerald-500/40"},FINAL_FAIL:{label:"최종 불합격",badge:"bg-rose-500/20 text-rose-400 border-rose-500/40"}},OU=[{key:"motivation",label:"지원 동기"},{key:"studyPlan",label:"학습 계획"},{key:"careerGoal",label:"진로 목표"},{key:"technicalSkills",label:"보유 기술"},{key:"certifications",label:"보유 자격증"},{key:"projects",label:"프로젝트 경험"}];function LU(){var f,m,w,y,E,v,T,x;const{applicationId:t}=Hs(),e=gn(),[n,r]=O.useState(null),[s,i]=O.useState(!0),[a,l]=O.useState("");O.useEffect(()=>{c()},[t]);const c=async()=>{if(t)try{i(!0);const N=await qS(t);if(!N){r(null),l("신청서를 찾을 수 없습니다.");return}r(N)}catch(N){console.error("Failed to load application detail:",N),l("신청서를 불러오는 중 문제가 발생했습니다.")}finally{i(!1)}},d=N=>N?(N.toDate?N.toDate():new Date(N)).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",h=O.useMemo(()=>Ab[n==null?void 0:n.status]||Ab.SUBMITTED,[n]);return s?o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsx($t,{className:"w-10 h-10 text-purple-400 animate-spin"})}):n?o.jsxs("div",{className:"min-h-screen bg-black py-16 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]"}),o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"}),o.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6 mb-12",children:[o.jsxs("button",{onClick:()=>e("/applications"),className:"inline-flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[o.jsx(Pi,{className:"w-4 h-4"}),"목록으로"]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xs text-gray-500 tracking-[0.3em] mb-2",children:"APPLICATION"}),o.jsx("h1",{className:"text-3xl md:text-4xl font-black text-white mb-3",children:n.applicationNumber}),o.jsx("div",{className:`inline-flex items-center gap-2 px-4 py-2 text-xs font-bold ${h.badge}`,children:h.label})]})]}),o.jsxs("div",{className:"space-y-8",children:[o.jsx("section",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-400",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"지원자"}),o.jsxs("div",{className:"flex items-center gap-2 text-white font-semibold",children:[o.jsx(qi,{className:"w-4 h-4 text-purple-300"}),((f=n.user)==null?void 0:f.displayName)||n.userName||"N/A"]}),o.jsxs("div",{className:"flex items-center gap-2 font-mono text-xs text-purple-300",children:[o.jsx(Bs,{className:"w-4 h-4"}),((m=n.user)==null?void 0:m.email)||n.userEmail]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"지원일"}),o.jsx("p",{children:d(n.createdAt)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"최근 업데이트"}),o.jsx("p",{children:d(n.updatedAt)})]})]})}),o.jsxs("section",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8",children:[o.jsx("h2",{className:"text-sm font-bold tracking-[0.3em] text-gray-500 mb-4",children:"COURSE INFORMATION"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3 text-white text-xl font-black",children:[o.jsx(kt,{className:"w-5 h-5 text-purple-300"}),((w=n.course)==null?void 0:w.title)||"Unknown Course"]}),o.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:((y=n.course)==null?void 0:y.description)||"강의 설명이 등록되지 않았습니다."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-400",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"카테고리"}),o.jsx("p",{className:"text-white font-semibold",children:((E=n.course)==null?void 0:E.category)||"-"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"난이도"}),o.jsx("p",{className:"text-white font-semibold",children:((v=n.course)==null?void 0:v.level)||"-"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"강사"}),o.jsx("p",{className:"text-white font-semibold",children:((T=n.course)==null?void 0:T.instructor)||"TBA"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"신청 마감"}),o.jsx("p",{className:"text-white font-semibold",children:(x=n.course)!=null&&x.applicationDeadline?d(n.course.applicationDeadline):"상시 모집"})]})]})]})]}),o.jsxs("section",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8 space-y-6",children:[o.jsx("h2",{className:"text-sm font-bold tracking-[0.3em] text-gray-500",children:"APPLICATION RESPONSES"}),OU.map(({key:N,label:R})=>{const C=n[N];return C?o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-300 mb-2",children:[o.jsx(U0,{className:"w-4 h-4"}),o.jsx("span",{className:"tracking-[0.2em]",children:R})]}),o.jsx("div",{className:"bg-white/5 border border-white/10 p-4 text-sm text-gray-200 leading-relaxed whitespace-pre-line",children:C})]},N):null})]}),n.statusNote&&o.jsxs("section",{className:"bg-black/40 backdrop-blur-xl border border-white/10 p-8",children:[o.jsx("h2",{className:"text-sm font-bold tracking-[0.3em] text-gray-500 mb-3",children:"관리자 메모"}),o.jsx("p",{className:"text-sm text-gray-200 leading-relaxed bg-white/5 border border-white/10 p-4",children:n.statusNote})]})]})]})]}):o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsxs("div",{className:"text-center px-6",children:[o.jsx("p",{className:"text-2xl font-black text-white mb-3",children:"APPLICATION NOT FOUND"}),o.jsx("p",{className:"text-gray-500 mb-6",children:a||"요청한 신청서를 찾을 수 없습니다."}),o.jsx("button",{onClick:()=>e("/applications"),className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold hover:shadow-lg hover:shadow-purple-500/40 transition-all",children:"목록으로 돌아가기"})]})})}function VU(){const{user:t}=Ye(),[e,n]=O.useState([]),[r,s]=O.useState(!0),[i,a]=O.useState(null);O.useEffect(()=>{if(!(t!=null&&t.uid))return;let c=!0;return(async()=>{try{s(!0);const h=await hb(t.uid);c&&(n(h),a(null))}catch(h){console.error("Failed to load instructor courses:",h),c&&a("강의 목록을 불러오지 못했습니다. 잠시 후 다시 시도해 주세요.")}finally{c&&s(!1)}})(),()=>{c=!1}},[t==null?void 0:t.uid]);const l=[{to:"",label:"개요",icon:IV,end:!0},{to:"courses",label:"내 강좌",icon:kt}];return t!=null&&t.uid?o.jsx("div",{className:"min-h-screen bg-black text-gray-100 py-12",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("p",{className:"text-sm text-blue-300 tracking-[0.3em] uppercase",children:"Instructor Console"}),o.jsx("h1",{className:"text-4xl sm:text-5xl font-black text-white mt-2",children:"강사 전용 관리"}),o.jsx("p",{className:"text-gray-400 mt-3 text-sm sm:text-base",children:"담당 강좌의 커리큘럼과 학습 자료를 직접 업데이트해 주세요."})]}),o.jsxs("div",{className:"grid lg:grid-cols-[240px,1fr] gap-6",children:[o.jsx("aside",{className:"space-y-3",children:l.map(c=>{const d=c.icon;return o.jsxs(Z1,{to:c.to,end:c.end,className:({isActive:h})=>`flex items-center gap-3 px-4 py-3 border border-white/10 transition-all ${h?"bg-white/10 text-white border-blue-500/40":"bg-black/40 hover:bg-white/5 text-gray-300"}`,children:[o.jsx(d,{className:"w-4 h-4"}),o.jsx("span",{className:"font-semibold tracking-wide text-sm",children:c.label})]},c.label)})}),o.jsx("section",{className:"bg-black/40 border border-white/10 min-h-[480px]",children:o.jsxs(Qd,{children:[o.jsx(ve,{index:!0,element:o.jsx(MU,{courses:e,loading:r,error:i})}),o.jsx(ve,{path:"courses",element:o.jsx(FU,{courses:e,loading:r,error:i})}),o.jsx(ve,{path:"courses/:courseId",element:o.jsx(UU,{courses:e,loading:r,onCurriculumUpdated:async()=>{if(!(t!=null&&t.uid))return;const c=await hb(t.uid);n(c)}})}),o.jsx(ve,{path:"*",element:o.jsx(Ti,{to:"",replace:!0})})]})})]})]})}):null}function MU({courses:t,loading:e,error:n}){const r=t.filter(i=>i.isActive).length,s=t.reduce((i,a)=>i+(a.enrollmentCount||0),0);return o.jsxs("div",{className:"p-8",children:[o.jsx("h2",{className:"text-2xl font-black text-white mb-6",children:"대시보드"}),e?o.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[o.jsx($t,{className:"w-5 h-5 animate-spin"}),o.jsx("span",{children:"강의 정보를 불러오는 중입니다..."})]}):n?o.jsx("p",{className:"text-red-400 text-sm",children:n}):o.jsxs("div",{className:"grid sm:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-black/60 border border-blue-500/20 p-6",children:[o.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-[0.2em]",children:"총 강좌 수"}),o.jsx("p",{className:"text-3xl font-black text-white mt-3",children:t.length})]}),o.jsxs("div",{className:"bg-black/60 border border-purple-500/20 p-6",children:[o.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-[0.2em]",children:"활성 강좌"}),o.jsx("p",{className:"text-3xl font-black text-purple-200 mt-3",children:r})]}),o.jsxs("div",{className:"bg-black/60 border border-emerald-500/20 p-6",children:[o.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-[0.2em]",children:"누적 수강생"}),o.jsx("p",{className:"text-3xl font-black text-emerald-200 mt-3",children:s})]})]})]})}function FU({courses:t,loading:e,error:n}){return e?o.jsxs("div",{className:"p-8 flex items-center gap-3 text-gray-400",children:[o.jsx($t,{className:"w-5 h-5 animate-spin"}),o.jsx("span",{children:"강의 정보를 불러오는 중입니다..."})]}):n?o.jsx("div",{className:"p-8",children:o.jsx("p",{className:"text-red-400 text-sm",children:n})}):t.length?o.jsxs("div",{className:"p-8 space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-2xl font-black text-white",children:"내 강좌"}),o.jsxs("p",{className:"text-xs text-gray-500",children:["총 ",t.length,"개 과정"]})]}),o.jsx("div",{className:"grid gap-5",children:t.map(r=>{var s;return o.jsxs(Y,{to:`courses/${r.id}`,className:"group bg-black/60 border border-white/10 hover:border-blue-500/40 transition-all p-6 block",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 tracking-[0.3em]",children:"COURSE"}),o.jsx("h3",{className:"text-xl font-bold text-white mt-1",children:r.title||"제목 미정"}),o.jsx("p",{className:"text-sm text-gray-400 mt-3 line-clamp-2",children:r.description||"등록된 강의 설명이 없습니다."})]}),o.jsx(Sh,{className:"w-5 h-5 text-blue-300 opacity-0 group-hover:opacity-100 transition-opacity"})]}),o.jsxs("div",{className:"grid sm:grid-cols-3 gap-4 mt-6 text-xs text-gray-400",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"진행 상태"}),o.jsx("p",{className:"mt-1 font-semibold text-white",children:r.isActive?"운영 중":"비활성"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"등록 인원"}),o.jsxs("p",{className:"mt-1 font-semibold text-white",children:[r.enrollmentCount||0,"명"]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"마지막 업데이트"}),o.jsx("p",{className:"mt-1 font-semibold text-white/80",children:(s=r.updatedAt)!=null&&s.toDate?r.updatedAt.toDate().toLocaleString("ko-KR"):"기록 없음"})]})]})]},r.id)})})]}):o.jsx("div",{className:"p-8",children:o.jsxs("div",{className:"border border-white/10 bg-black/60 p-8 text-center",children:[o.jsx(kt,{className:"w-10 h-10 text-blue-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"등록된 강좌가 없습니다. 관리자에게 강좌 배정을 요청해 주세요."})]})})}function UU({courses:t,loading:e,onCurriculumUpdated:n}){const{courseId:r}=Hs(),s=gn(),[i,a]=O.useState(""),[l,c]=O.useState(!1),[d,h]=O.useState(null);O.useEffect(()=>{if(!e){const y=t.find(E=>E.id===r);a((y==null?void 0:y.curriculumContent)||"")}},[e,t,r]);const f=O.useMemo(()=>J0(i),[i]),m=t.find(y=>y.id===r),w=async()=>{if(r)try{c(!0);const y=await US(r,i);if(!y.success)throw new Error(y.error||"커리큘럼 저장 실패");h("커리큘럼이 저장되었습니다."),await n()}catch(y){console.error("Failed to save curriculum:",y),h("커리큘럼 저장 중 오류가 발생했습니다.")}finally{c(!1),setTimeout(()=>h(null),3500)}};return e?o.jsxs("div",{className:"p-8 flex items-center gap-3 text-gray-400",children:[o.jsx($t,{className:"w-5 h-5 animate-spin"}),o.jsx("span",{children:"강의 정보를 불러오는 중입니다..."})]}):m?o.jsxs("div",{className:"grid lg:grid-cols-2 border-t border-white/10",children:[o.jsxs("div",{className:"p-8 space-y-4 border-b lg:border-b-0 lg:border-r border-white/10",children:[o.jsxs("button",{onClick:()=>s(-1),className:"inline-flex items-center gap-2 px-4 py-2 text-sm text-gray-300 border border-white/10 hover:bg-white/5 transition",children:[o.jsx(Pi,{className:"w-4 h-4"}),"강좌 목록으로 돌아가기"]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 tracking-[0.3em]",children:"CURRICULUM EDITOR"}),o.jsx("h2",{className:"text-2xl font-black text-white mt-2",children:m.title||"제목 미정"}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"모듈형 커리큘럼을 작성하세요. JSON 배열 또는 `---` 구분 텍스트 형식을 지원합니다."})]}),o.jsx("textarea",{value:i,onChange:y=>a(y.target.value),rows:18,className:"w-full bg-black/60 border border-white/10 text-white px-4 py-3 focus:outline-none focus:border-blue-500 transition",placeholder:`---
Title: 미션 소개
Summary: 과정 개요
- Step 1
- Step 2`}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{onClick:w,disabled:l,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-bold hover:shadow-lg hover:shadow-blue-500/50 transition disabled:opacity-60",children:[l?o.jsx($t,{className:"w-4 h-4 animate-spin"}):o.jsx(Th,{className:"w-4 h-4"}),l?"저장 중...":"커리큘럼 저장"]}),d&&o.jsx("p",{className:"text-sm text-gray-400",children:d})]})]}),o.jsxs("div",{className:"p-8 space-y-6",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 tracking-[0.3em]",children:"PREVIEW"}),o.jsx("h3",{className:"text-xl font-black text-white mt-2",children:"학습자 미리보기"})]}),f.length===0?o.jsx("p",{className:"text-gray-500 text-sm",children:"커리큘럼 섹션이 없습니다. 왼쪽 편집 영역에 내용을 입력해 주세요."}):o.jsx("div",{className:"space-y-6",children:f.map((y,E)=>o.jsxs("div",{className:"border border-white/10 bg-black/50 p-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["SECTION ",String(E+1).padStart(2,"0")]}),o.jsx("h4",{className:"text-lg font-bold text-white mt-1",children:y.title||`섹션 ${E+1}`}),y.summary&&o.jsx("p",{className:"text-sm text-gray-400 mt-1",children:y.summary})]})}),y.body&&o.jsx("p",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line mt-4",children:y.body}),y.steps&&y.steps.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-[0.2em]",children:"Steps"}),o.jsx("ul",{className:"mt-2 space-y-2 text-sm text-gray-300",children:y.steps.map((v,T)=>o.jsxs("li",{className:"flex gap-3",children:[o.jsxs("span",{className:"text-blue-300 font-semibold",children:[T+1,"."]}),o.jsx("span",{children:v})]},T))})]}),y.hints&&y.hints.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-xs text-purple-400 uppercase tracking-[0.2em]",children:"Hints"}),o.jsx("ul",{className:"mt-2 space-y-2 text-sm text-purple-200",children:y.hints.map((v,T)=>o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{className:"text-purple-300",children:"•"}),o.jsx("span",{children:v})]},T))})]})]},E))})]})]}):o.jsxs("div",{className:"p-8 space-y-4",children:[o.jsxs("button",{onClick:()=>s(-1),className:"inline-flex items-center gap-2 px-4 py-2 text-sm text-gray-300 border border-white/10 hover:bg-white/5 transition",children:[o.jsx(Pi,{className:"w-4 h-4"}),"강좌 목록으로 돌아가기"]}),o.jsx("p",{className:"text-gray-400",children:"선택한 강좌를 찾을 수 없습니다."})]})}function BU(){const t=$U();return t.loading?o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsx($t,{className:"w-6 h-6 text-white animate-spin"})}):t.options.length?o.jsxs(Qd,{children:[o.jsx(ve,{index:!0,element:o.jsx(Ti,{to:`course/${t.options[0].id}`,replace:!0})}),o.jsx(ve,{path:"course/:courseId/*",element:o.jsx(zU,{courses:t.options})}),o.jsx(ve,{path:"*",element:o.jsx(Ti,{to:".",replace:!0})})]}):o.jsxs("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center text-center px-6",children:[o.jsx(TS,{className:"w-12 h-12 text-gray-500 mb-4"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"등록된 강좌가 없습니다. 먼저 강좌를 생성해 주세요."})]})}function $U(){const[t,e]=O.useState([]),[n,r]=O.useState(!0);return O.useEffect(()=>{let s=!0;return(async()=>{try{const a=await Q0();s&&e(a)}finally{s&&r(!1)}})(),()=>{s=!1}},[]),{options:t,loading:n}}function zU({courses:t}){const{courseId:e}=Hs(),n=gn(),[r,s]=O.useState(null),[i,a]=O.useState(!0),[l,c]=O.useState([]),[d,h]=O.useState([]),[f,m]=O.useState(""),[w,y]=O.useState(!1),[E,v]=O.useState(null),T=O.useMemo(()=>[{slug:"",label:"개요",icon:TS},{slug:"curriculum",label:"커리큘럼",icon:SS},{slug:"assignments",label:"과제",icon:Th},{slug:"students",label:"수강생",icon:qr}],[]);O.useEffect(()=>{if(!e)return;let C=!0;return(async()=>{try{a(!0);const[b,_,A]=await Promise.all([mc(e),Nm(e),EM(e)]);C&&(s(b),c(_),h(A),m((b==null?void 0:b.curriculumContent)||""))}finally{C&&a(!1)}})(),()=>{C=!1}},[e]);const x=O.useMemo(()=>J0(f),[f]),N=async()=>{if(e)try{y(!0);const C=await US(e,f);if(!C.success)throw new Error(C.error);v("커리큘럼이 저장되었습니다.")}catch(C){console.error("Failed to save curriculum:",C),v("커리큘럼 저장 중 오류가 발생했습니다.")}finally{y(!1),setTimeout(()=>v(null),3500)}},R=async()=>{const C=await Nm(e);c(C)};return i?o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsx($t,{className:"w-6 h-6 text-white animate-spin"})}):r?o.jsx("div",{className:"min-h-screen bg-black py-12",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("button",{onClick:()=>n("/admin/courses"),className:"inline-flex items-center gap-2 text-sm text-gray-400 hover:text-white",children:[o.jsx(Pi,{className:"w-4 h-4"}),"강좌 목록으로 돌아가기"]}),o.jsxs("div",{className:"mt-6 mb-10",children:[o.jsx("p",{className:"text-xs text-blue-300 tracking-[0.3em] uppercase",children:"Course Management"}),o.jsx("h1",{className:"text-4xl font-black text-white mt-3",children:r.title}),o.jsx("p",{className:"text-gray-400 mt-3 text-sm sm:text-base",children:r.description||"등록된 설명이 없습니다."})]}),o.jsxs("div",{className:"grid lg:grid-cols-[220px,1fr] gap-6",children:[o.jsxs("aside",{className:"space-y-3",children:[o.jsx(KU,{courses:t,activeCourseId:e}),o.jsx("nav",{className:"space-y-2",children:T.map(C=>{const L=C.icon;return o.jsxs(Z1,{to:C.slug===""?`/admin/course-manager/course/${e}`:`/admin/course-manager/course/${e}/${C.slug}`,end:C.slug==="",className:({isActive:b})=>`flex items-center gap-3 px-4 py-3 border border-white/10 transition-colors ${b?"bg-white/10 text-white border-blue-500/40":"bg-black/40 text-gray-300 hover:bg-white/5"}`,children:[o.jsx(L,{className:"w-4 h-4"}),o.jsx("span",{className:"font-semibold text-sm tracking-wide",children:C.label})]},C.slug)})})]}),o.jsx("section",{className:"bg-black/40 border border-white/10 min-h-[520px]",children:o.jsxs(Qd,{children:[o.jsx(ve,{index:!0,element:o.jsx(qU,{course:r,assignments:l,enrollments:d})}),o.jsx(ve,{path:"curriculum",element:o.jsx(HU,{curriculum:f,onChange:m,onSave:N,saving:w,message:E,sections:x})}),o.jsx(ve,{path:"assignments",element:o.jsx(WU,{courseId:e,assignments:l,refreshAssignments:R})}),o.jsx(ve,{path:"students",element:o.jsx(GU,{enrollments:d})}),o.jsx(ve,{path:"*",element:o.jsx(Ti,{to:"",replace:!0})})]})})]})]})}):o.jsxs("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center text-center px-6",children:[o.jsx("p",{className:"text-gray-400 text-sm",children:"선택한 강좌를 찾을 수 없습니다."}),o.jsx("button",{onClick:()=>n("/admin/courses"),className:"mt-6 px-5 py-2 text-sm text-gray-200 border border-white/10 hover:bg-white/5",children:"강좌 목록으로 돌아가기"})]})}function qU({course:t,assignments:e,enrollments:n}){const r=e.length,s=e.filter(i=>{var l,c;const a=((c=(l=i.dueDate)==null?void 0:l.toDate)==null?void 0:c.call(l))||(i.dueDate?new Date(i.dueDate):null);return a&&a>new Date}).length;return o.jsxs("div",{className:"p-8 space-y-6",children:[o.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[o.jsx(Kf,{label:"총 수강생",value:`${t.enrollmentCount||n.length||0}명`,icon:qr,accent:"from-blue-500 to-cyan-500"}),o.jsx(Kf,{label:"등록된 과제",value:`${r}개`,icon:SS,accent:"from-purple-500 to-pink-500"}),o.jsx(Kf,{label:"마감 예정",value:`${s}개`,icon:Th,accent:"from-green-500 to-emerald-500"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:"강좌 정보"}),o.jsxs("div",{className:"border border-white/10 bg-black/50 p-6 space-y-3 text-sm text-gray-300",children:[o.jsx($a,{label:"카테고리",value:t.category||"미지정"}),o.jsx($a,{label:"레벨",value:t.level||"beginner"}),o.jsx($a,{label:"강사",value:t.instructor||"미지정"}),o.jsx($a,{label:"수강 인원 제한",value:t.maxStudents??"제한 없음"}),o.jsx($a,{label:"신청 마감일",value:Pm(t.applicationDeadline)})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:"최근 과제"}),e.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"등록된 과제가 없습니다."}):o.jsx("div",{className:"grid gap-3",children:e.slice(0,3).map(i=>o.jsxs("div",{className:"border border-white/10 bg-black/50 p-4",children:[o.jsx("h4",{className:"text-white font-semibold",children:i.title}),o.jsx("p",{className:"text-sm text-gray-400 mt-2 line-clamp-2",children:i.description||"설명이 없습니다."}),o.jsxs("div",{className:"text-xs text-gray-500 mt-3",children:["마감일: ",Pm(i.dueDate)]})]},i.id))})]})]})}function Kf({label:t,value:e,icon:n,accent:r}){return o.jsxs("div",{className:"p-6 border border-white/10 bg-white/5 relative overflow-hidden",children:[o.jsx("div",{className:`absolute inset-0 opacity-20 bg-gradient-to-r ${r}`}),o.jsxs("div",{className:"relative flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-[0.2em]",children:t}),o.jsx("p",{className:"text-2xl font-black text-white mt-3",children:e})]}),o.jsx(n,{className:"w-8 h-8 text-white/70"})]})]})}function $a({label:t,value:e}){return o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 text-xs uppercase tracking-[0.2em]",children:t}),o.jsx("p",{className:"mt-1 text-white font-medium",children:e})]})}function HU({curriculum:t,onChange:e,onSave:n,saving:r,message:s,sections:i}){const[a,l]=O.useState(0),[c,d]=O.useState(!1),[h,f]=O.useState("800");O.useState(null)[0];const m=N=>{const R=document.querySelector("textarea");if(!R)return;const C=R.selectionStart,L=R.selectionEnd,b=t.substring(0,C),_=t.substring(L);e(b+N+_),setTimeout(()=>{R.focus(),R.setSelectionRange(C+N.length,C+N.length)},0)},w=(N,R)=>new Promise(C=>{wI.imageFileResizer(N,R,R*2,"JPEG",90,0,L=>C(L),"blob")}),y=async N=>{var C;const R=(C=N.target.files)==null?void 0:C[0];if(R){if(!R.type.startsWith("image/")){alert("이미지 파일만 업로드 가능합니다.");return}d(!0);try{const L=parseInt(h),b=await w(R,L),A=`curriculum/${Date.now()}_${R.name}`,j=vS(ES,A);await yS(j,b);const I=await xS(j);m(`![${R.name}](${I})`)}catch(L){console.error("Image upload error:",L),alert("이미지 업로드 중 오류가 발생했습니다: "+L.message)}finally{d(!1),N.target.value=""}}},E=()=>{const N=prompt("링크 URL을 입력하세요:");if(!N)return;const R=prompt("링크 텍스트를 입력하세요:",N);m(`[${R||N}](${N})`)};O.useEffect(()=>{i.length===0?l(0):a>i.length-1&&l(i.length-1)},[i,a]);const v=()=>{const R=`${t.trim()?`
---
`:`---
`}Title: 새 모듈 ${i.length+1}
Summary: 섹션 요약
Body: 학습 내용을 작성하세요
Steps:
- 단계 1`,C=t.trim()?`${t.trim()}${R}`:R;e(C),l(i.length)},T=N=>{i.length!==0&&l(R=>N==="prev"?R===0?R:R-1:N==="next"?R===i.length-1?R:R+1:R)},x=i[a]||null;return o.jsxs("div",{className:"grid lg:grid-cols-2 border-t border-white/10",children:[o.jsxs("div",{className:"p-8 space-y-5 border-b lg:border-b-0 lg:border-r border-white/10",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-gray-500 tracking-[0.3em] uppercase",children:"Curriculum Builder"}),o.jsx("h2",{className:"text-2xl font-black text-white",children:"모듈 기반 커리큘럼 편집기"}),o.jsx("p",{className:"text-sm text-gray-400",children:"`---` 구분자나 JSON 배열로 모듈을 작성하세요. 오른쪽에서 현재 모듈을 확인할 수 있습니다."})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-3 bg-black/40 border border-white/10",children:[o.jsxs("select",{value:h,onChange:N=>f(N.target.value),className:"px-3 py-2 text-xs bg-black/60 border border-white/10 text-gray-300 focus:outline-none focus:border-blue-500",children:[o.jsx("option",{value:"400",children:"작게 (400px)"}),o.jsx("option",{value:"600",children:"중간 (600px)"}),o.jsx("option",{value:"800",children:"크게 (800px)"}),o.jsx("option",{value:"1200",children:"매우 크게 (1200px)"}),o.jsx("option",{value:"9999",children:"원본 크기"})]}),o.jsxs("label",{className:"inline-flex items-center gap-2 px-3 py-2 text-xs border border-white/10 text-gray-300 hover:bg-white/5 hover:text-white cursor-pointer transition",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"hidden",disabled:c}),c?o.jsx($t,{className:"w-4 h-4 animate-spin"}):o.jsx(UV,{className:"w-4 h-4"}),c?"업로드 중...":"이미지 업로드"]}),o.jsxs("button",{type:"button",onClick:E,className:"inline-flex items-center gap-2 px-3 py-2 text-xs border border-white/10 text-gray-300 hover:bg-white/5 hover:text-white transition",children:[o.jsx(AV,{className:"w-4 h-4"})," 링크 삽입"]}),o.jsx("button",{type:"button",onClick:()=>m(`

`),className:"inline-flex items-center gap-2 px-3 py-2 text-xs border border-white/10 text-gray-300 hover:bg-white/5 hover:text-white transition",children:"빈 줄 삽입"}),o.jsxs("div",{className:"ml-auto text-xs text-gray-500",children:[o.jsx("span",{className:"text-blue-300",children:"![alt](url)"})," 이미지 | ",o.jsx("span",{className:"text-blue-300",children:"[text](url)"})," 링크"]})]}),o.jsx("textarea",{value:t,onChange:N=>e(N.target.value),rows:20,className:"w-full bg-black/60 border border-white/10 text-white px-4 py-3 focus:outline-none focus:border-blue-500 transition font-mono text-sm",placeholder:`---
Title: Intro
Summary: 과정 개요
Body: ...`}),o.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsxs("button",{type:"button",onClick:v,className:"inline-flex items-center gap-2 px-4 py-2 text-sm border border-white/10 text-blue-300 hover:bg-white/5",children:[o.jsx(Ih,{className:"w-4 h-4"})," 새 모듈 추가"]}),o.jsxs("button",{onClick:n,disabled:r,className:"inline-flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white text-sm font-bold hover:shadow-lg hover:shadow-blue-500/40 transition disabled:opacity-60",children:[r?o.jsx($t,{className:"w-4 h-4 animate-spin"}):o.jsx(Th,{className:"w-4 h-4"}),r?"저장 중...":"커리큘럼 저장"]}),s&&o.jsx("p",{className:"text-sm text-gray-400",children:s})]})]}),o.jsxs("div",{className:"p-8 space-y-5",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 tracking-[0.3em] uppercase",children:"Module Preview"}),o.jsx("h3",{className:"text-xl font-black text-white",children:"학습자 화면 미리보기"})]}),o.jsxs("div",{className:"inline-flex items-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>T("prev"),disabled:i.length===0||a===0,className:"p-2 border border-white/10 text-gray-400 hover:text-white disabled:opacity-40",children:o.jsx(Ao,{className:"w-4 h-4"})}),o.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-[0.2em]",children:i.length===0?"섹션 없음":`SECTION ${String(a+1).padStart(2,"0")} / ${i.length}`}),o.jsx("button",{type:"button",onClick:()=>T("next"),disabled:i.length===0||a===i.length-1,className:"p-2 border border-white/10 text-gray-400 hover:text-white disabled:opacity-40",children:o.jsx(F0,{className:"w-4 h-4"})})]})]}),i.length===0?o.jsx("div",{className:"border border-white/10 bg-black/50 p-6 text-sm text-gray-400",children:"섹션이 없습니다. 왼쪽에서 모듈을 추가해 주세요."}):o.jsxs("div",{className:"border border-white/10 bg-black/50 p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(bm,{className:"w-5 h-5 text-blue-300"}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["MODULE ",String(a+1).padStart(2,"0")]}),o.jsx("h4",{className:"text-lg font-bold text-white",children:(x==null?void 0:x.title)||`모듈 ${a+1}`}),(x==null?void 0:x.summary)&&o.jsx("p",{className:"text-sm text-gray-400 mt-1",children:x.summary})]})]}),(x==null?void 0:x.body)&&o.jsx("div",{className:"prose prose-invert max-w-none text-sm text-gray-300 leading-relaxed",dangerouslySetInnerHTML:{__html:x.body.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" class="max-w-full h-auto my-4 rounded border border-white/10" />').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 underline">$1</a>').replace(/```([\s\S]*?)```/g,'<pre class="bg-black/60 border border-white/10 p-3 rounded my-3 overflow-x-auto"><code>$1</code></pre>').replace(/`([^`]+)`/g,'<code class="bg-purple-500/10 border border-purple-500/20 text-purple-300 px-1.5 py-0.5 rounded text-xs">$1</code>').replace(/\n/g,"<br/>")}}),(x==null?void 0:x.steps)&&x.steps.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-[0.2em] mb-2",children:"Steps"}),o.jsx("ul",{className:"space-y-2 text-sm text-gray-300",children:x.steps.map((N,R)=>o.jsxs("li",{className:"flex gap-3",children:[o.jsxs("span",{className:"text-blue-300 font-semibold",children:[R+1,"."]}),o.jsx("span",{children:N})]},R))})]})]})]})]})}function WU({courseId:t,assignments:e,refreshAssignments:n}){const[r,s]=O.useState(!1),[i,a]=O.useState(null),[l,c]=O.useState({title:"",description:"",dueDate:"",points:""}),[d,h]=O.useState(!1),f=()=>{a(null),c({title:"",description:"",dueDate:"",points:""}),s(!0)},m=v=>{var T,x;a(v),c({title:v.title||"",description:v.description||"",dueDate:(x=(T=v.dueDate)==null?void 0:T.toDate)!=null&&x.call(T)?v.dueDate.toDate().toISOString().slice(0,16):v.dueDate?new Date(v.dueDate).toISOString().slice(0,16):"",points:v.points||""}),s(!0)},w=()=>{s(!1)},y=async v=>{if(v.preventDefault(),!!t)try{h(!0),i?await bM(t,i.id,l):await wM(t,l),await n(),w()}catch(T){console.error("Failed to save assignment:",T)}finally{h(!1)}},E=async v=>{if(t&&confirm("이 과제를 삭제하시겠습니까?"))try{await _M(t,v),await n()}catch(T){console.error("Failed to delete assignment:",T)}};return o.jsxs("div",{className:"p-8 space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-black text-white",children:"과제 관리"}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"단계별 실습 과제를 구성하고 관리할 수 있습니다."})]}),o.jsxs("button",{onClick:f,className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white text-sm font-bold hover:shadow-lg hover:shadow-blue-500/40",children:[o.jsx(Ih,{className:"w-4 h-4"}),"새 과제 추가"]})]}),e.length===0?o.jsx("div",{className:"border border-white/10 bg-black/50 p-6 text-sm text-gray-400",children:'아직 등록된 과제가 없습니다. "새 과제 추가" 버튼을 눌러 첫 과제를 등록하세요.'}):o.jsx("div",{className:"grid gap-4",children:e.map(v=>o.jsx("div",{className:"border border-white/10 bg-black/50 p-6",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:v.title}),o.jsx("p",{className:"text-sm text-gray-400 mt-2 leading-relaxed",children:v.description||"설명이 없습니다."}),o.jsxs("div",{className:"text-xs text-gray-500 mt-3 space-x-4",children:[o.jsxs("span",{children:["마감일: ",Pm(v.dueDate)]}),o.jsxs("span",{children:["배점: ",v.points??"없음"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>m(v),className:"inline-flex items-center gap-2 px-3 py-2 text-xs border border-white/10 text-blue-300 hover:bg-white/5",children:[o.jsx(Sh,{className:"w-3 h-3"}),"수정"]}),o.jsxs("button",{onClick:()=>E(v.id),className:"inline-flex items-center gap-2 px-3 py-2 text-xs border border-white/10 text-red-300 hover:bg-white/5",children:[o.jsx(B0,{className:"w-3 h-3"}),"삭제"]})]})]})},v.id))}),r&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 px-4",children:o.jsxs("div",{className:"bg-black border border-white/10 w-full max-w-lg",children:[o.jsxs("div",{className:"p-6 border-b border-white/10",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:i?"과제 수정":"새 과제 생성"}),o.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"과제의 세부 내용을 입력하세요."})]}),o.jsxs("form",{onSubmit:y,className:"p-6 space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-400 uppercase tracking-[0.2em] mb-2",children:"제목"}),o.jsx("input",{type:"text",required:!0,value:l.title,onChange:v=>c({...l,title:v.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-400 uppercase tracking-[0.2em] mb-2",children:"설명"}),o.jsx("textarea",{rows:4,value:l.description,onChange:v=>c({...l,description:v.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-blue-500"})]}),o.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-400 uppercase tracking-[0.2em] mb-2",children:"마감일"}),o.jsx("input",{type:"datetime-local",value:l.dueDate,onChange:v=>c({...l,dueDate:v.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-400 uppercase tracking-[0.2em] mb-2",children:"배점"}),o.jsx("input",{type:"number",min:"0",value:l.points,onChange:v=>c({...l,points:v.target.value}),className:"w-full px-4 py-3 bg-black/50 border border-white/10 text-white focus:outline-none focus:border-blue-500"})]})]}),o.jsxs("div",{className:"flex items-center justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 text-sm text-gray-300 border border-white/10 hover:bg-white/5",children:"취소"}),o.jsx("button",{type:"submit",disabled:d,className:"px-5 py-2 text-sm font-bold bg-gradient-to-r from-blue-500 to-cyan-500 text-white hover:shadow-lg hover:shadow-blue-500/40 disabled:opacity-60",children:d?"저장 중...":i?"과제 수정":"과제 생성"})]})]})]})})]})}function GU({enrollments:t}){const e=t.length,n=t.map(r=>{var l,c;const s=(c=(l=r.enrolledAt)==null?void 0:l.toDate)!=null&&c.call(l)?r.enrolledAt.toDate():r.enrolledAt?new Date(r.enrolledAt):null,i=r.user||{},a=i.studentInfo||{};return{id:r.id,name:i.displayName||r.userName||r.userEmail||r.userId,email:i.email||r.userEmail,classInfo:a.grade?`${a.grade}학년 ${a.class||"-"}반 ${a.studentNumber||"-"}번`:"미등록",enrolledAt:s,progress:r.progress??null}}).sort((r,s)=>{var i,a,l,c;return(((a=(i=s.enrolledAt)==null?void 0:i.getTime)==null?void 0:a.call(i))||0)-(((c=(l=r.enrolledAt)==null?void 0:l.getTime)==null?void 0:c.call(l))||0)});return o.jsxs("div",{className:"p-8 space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-black text-white",children:"수강생 관리"}),o.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["총 ",e,"명의 수강생이 등록되어 있습니다."]})]}),e===0?o.jsx("div",{className:"border border-white/10 bg-black/50 p-6 text-sm text-gray-400",children:"아직 등록된 수강생이 없습니다."}):o.jsxs("div",{className:"border border-white/10 bg-black/40",children:[o.jsxs("div",{className:"grid grid-cols-[2fr,1.2fr,1fr,0.8fr] gap-4 px-6 py-3 border-b border-white/10 text-xs text-gray-500 uppercase tracking-[0.2em]",children:[o.jsx("span",{children:"수강생"}),o.jsx("span",{children:"학급 정보"}),o.jsx("span",{children:"등록일"}),o.jsx("span",{children:"진행률"})]}),o.jsx("ul",{className:"divide-y divide-white/10 max-h-[28rem] overflow-y-auto",children:n.map(r=>o.jsxs("li",{className:"px-6 py-4 grid grid-cols-[2fr,1.2fr,1fr,0.8fr] gap-4 text-sm text-gray-300",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-white",children:r.name}),r.email&&o.jsx("p",{className:"text-xs text-gray-500",children:r.email})]}),o.jsx("span",{children:r.classInfo}),o.jsx("span",{children:r.enrolledAt?r.enrolledAt.toLocaleString("ko-KR"):"기록 없음"}),o.jsx("span",{children:r.progress!=null?`${r.progress}%`:"미집계"})]},r.id))})]})]})}function Pm(t){var n;if(!t)return"미정";const e=((n=t==null?void 0:t.toDate)==null?void 0:n.call(t))||(typeof t=="string"||t instanceof Date?new Date(t):null);return!e||Number.isNaN(e.getTime())?"미정":e.toLocaleString("ko-KR")}function KU({courses:t,activeCourseId:e}){const n=gn();return o.jsxs("div",{className:"border border-white/10 bg-black/40",children:[o.jsx("div",{className:"px-4 py-3 border-b border-white/10 text-xs text-gray-500 uppercase tracking-[0.3em]",children:"강좌 선택"}),o.jsx("ul",{className:"max-h-72 overflow-y-auto",children:t.map(r=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>n(`/admin/course-manager/course/${r.id}`),className:`w-full text-left px-4 py-3 text-sm transition-colors border-b border-white/5 last:border-b-0 ${r.id===e?"bg-blue-500/20 text-white border-blue-400/40":"text-gray-300 hover:bg-white/5"}`,children:[o.jsx("p",{className:"font-semibold line-clamp-1",children:r.title||"제목 미정"}),o.jsxs("p",{className:"text-xs text-gray-400",children:["등록 ",r.enrollmentCount||0,"명"]})]})},r.id))})]})}function ri({children:t}){const{isAuthenticated:e}=Ye();return e?t:o.jsx(Ti,{to:"/login"})}function QU(){return o.jsx(gj,{children:o.jsx(Qd,{children:o.jsxs(ve,{path:"/",element:o.jsx(zV,{}),children:[o.jsx(ve,{index:!0,element:o.jsx(WV,{})}),o.jsx(ve,{path:"login",element:o.jsx(gM,{})}),o.jsx(ve,{path:"signup",element:o.jsx(yM,{})}),o.jsx(ve,{path:"courses",element:o.jsx(PM,{})}),o.jsx(ve,{path:"courses/:id",element:o.jsx(VM,{})}),o.jsx(ve,{path:"courses/:id/learn",element:o.jsx(qV,{children:o.jsx(FM,{})})}),o.jsx(ve,{path:"notices",element:o.jsx(GM,{})}),o.jsx(ve,{path:"notices/:id",element:o.jsx(KM,{})}),o.jsx(ve,{path:"faq",element:o.jsx(QM,{})}),o.jsx(ve,{path:"admin",element:o.jsx(Ji,{children:o.jsx(SU,{})})}),o.jsx(ve,{path:"admin/courses",element:o.jsx(Ji,{children:o.jsx(IU,{})})}),o.jsx(ve,{path:"admin/course-manager/*",element:o.jsx(Ji,{children:o.jsx(BU,{})})}),o.jsx(ve,{path:"admin/notices",element:o.jsx(Ji,{children:o.jsx(AU,{})})}),o.jsx(ve,{path:"admin/applications",element:o.jsx(Ji,{children:o.jsx(CU,{})})}),o.jsx(ve,{path:"admin/applications/:applicationId",element:o.jsx(Ji,{children:o.jsx(DU,{})})}),o.jsx(ve,{path:"instructor/*",element:o.jsx(HV,{children:o.jsx(VU,{})})}),o.jsx(ve,{path:"dashboard",element:o.jsx(ri,{children:o.jsx(RM,{})})}),o.jsx(ve,{path:"my-classroom",element:o.jsx(ri,{children:o.jsx(UM,{})})}),o.jsx(ve,{path:"applications",element:o.jsx(ri,{children:o.jsx(BM,{})})}),o.jsx(ve,{path:"applications/new/:courseId",element:o.jsx(ri,{children:o.jsx($M,{})})}),o.jsx(ve,{path:"applications/:applicationId",element:o.jsx(ri,{children:o.jsx(LU,{})})}),o.jsx(ve,{path:"inquiry",element:o.jsx(ri,{children:o.jsx(JM,{})})}),o.jsx(ve,{path:"profile",element:o.jsx(ri,{children:o.jsx(TU,{})})})]})})})}Qf.createRoot(document.getElementById("root")).render(o.jsx(Lt.StrictMode,{children:o.jsx(QU,{})}));
